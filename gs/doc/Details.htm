<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"   "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Ghostscript change history (detailed)</title></title>
<!-- generated by split_changelog.py from the output of cvs2cl.pl -->
<!-- $Id$ -->
<link rel=stylesheet type="text/css" href="gs.css">
</head>
<body>

<p><strong><a name="2004-10-26_0431"></a>
2004-10-26 04:31 Ralph Giles</strong></p>
<blockquote>
<pre>
Move a dependency out of order so it's available when needed.</pre>
<p>[src/lib.mak 1.202]</p>
</blockquote>

<p><strong><a name="2004-10-26_0425"></a>
2004-10-26 04:25 Ralph Giles</strong></p>
<blockquote>
<pre>
Update version and release date in the documentation.</pre>
<p>[doc/API.htm 1.45, doc/Bug-form.htm 1.42, doc/Bug-info.htm 1.41, doc/C-style.htm 1.48, doc/Commprod.htm 1.34, doc/Copying.htm 1.32, doc/DLL.htm 1.36, doc/Deprecated.htm 1.13, doc/Details8.htm 1.11, doc/Develop.htm 1.141, doc/Devices.htm 1.82, doc/Drivers.htm 1.50, doc/Fonts.htm 1.43, doc/Helpers.htm 1.36, doc/History1.htm 1.32, doc/History2.htm 1.32, doc/History3.htm 1.32, doc/History4.htm 1.32, doc/History5.htm 1.34, doc/History6.htm 1.49, doc/History7.htm 1.37, doc/History8.htm 1.15, doc/Htmstyle.htm 1.37, doc/Install.htm 1.47, doc/Issues.htm 1.43, doc/Language.htm 1.88, doc/Lib.htm 1.35, doc/Maintain.htm 1.43, doc/Make.htm 1.81, doc/New-user.htm 1.53, doc/Projects.htm 1.60, doc/Ps-style.htm 1.30, doc/Ps2epsi.htm 1.34, doc/Ps2pdf.htm 1.72, doc/Psfiles.htm 1.54, doc/Readme.htm 1.58, doc/Release.htm 1.87, doc/Source.htm 1.32, doc/Tester.htm 1.32, doc/Testing.htm 1.28, doc/Unix-lpr.htm 1.32, doc/Use.htm 1.115, doc/Xfonts.htm 1.32, doc/gs-vms.hlp 1.30, man/dvipdf.1 1.30, man/font2c.1 1.30, man/gs.1 1.31, man/gslp.1 1.30, man/gsnd.1 1.30, man/pdf2dsc.1 1.29, man/pdf2ps.1 1.31, man/pdfopt.1 1.29, man/pf2afm.1 1.30, man/pfbtopfa.1 1.31, man/printafm.1 1.30, man/ps2ascii.1 1.29, man/ps2epsi.1 1.28, man/ps2pdf.1 1.35, man/ps2pdfwr.1 1.34, man/ps2ps.1 1.37, man/wftopfa.1 1.30]</p>
</blockquote>

<p><strong><a name="2004-10-26_0424"></a>
2004-10-26 04:24 Ralph Giles</strong></p>
<blockquote>
<pre>
Update libpng version to the latest release. There are security
issues with 1.2.5, so upgrading is recommended.</pre>
<p>[src/all-arch.mak 1.15, src/bcwin32.mak 1.34, src/dvx-gcc.mak 1.28, src/macos-mcp.mak 1.27, src/macosx.mak 1.24, src/msvc32.mak 1.65, src/msvclib.mak 1.27, src/openvms.mak 1.38, src/openvms.mmk 1.30, src/os2.mak 1.42, src/ugcclib.mak 1.28, src/unix-gcc.mak 1.47, src/unixansi.mak 1.38, src/watclib.mak 1.23, src/watcw32.mak 1.31]</p>
</blockquote>

<p><strong><a name="2004-10-26_0408"></a>
2004-10-26 04:08 Ralph Giles</strong></p>
<blockquote>
<pre>
Back out double-include protection for gxfill*.h. Contrary to C-style,
these are templates that are configured and included multiple times.
They should probably be .c files rather than .h.</pre>
<p>[src/gxfillsl.h 1.6, src/gxfilltr.h 1.9, src/gxfillts.h 1.5]</p>
</blockquote>

<p><strong><a name="2004-10-26_0351"></a>
2004-10-26 03:51 Ralph Giles</strong></p>
<blockquote>
<pre>
Add double-include protection to four files that needed it. Also
correct a comment typo in a related file's protection.</pre>
<p>[src/gp_os2.h 1.2, src/gxfill.h 1.23, src/gxfillsl.h 1.5, src/gxfilltr.h 1.8, src/gxfillts.h 1.4]</p>
</blockquote>

<p><strong><a name="2004-10-26_0343"></a>
2004-10-26 03:43 Ralph Giles</strong></p>
<blockquote>
<pre>
Add a new-style RCS Id line to the re-instated LZWEncode filter.</pre>
<p>[src/slzwe.c 1.3]</p>
</blockquote>

<p><strong><a name="2004-10-26_0341"></a>
2004-10-26 03:41 Ralph Giles</strong></p>
<blockquote>
<pre>
Commute a C++ style comment.</pre>
<p>[src/main.h 1.8]</p>
</blockquote>

<p><strong><a name="2004-10-26_0338"></a>
2004-10-26 03:38 Ralph Giles</strong></p>
<blockquote>
<pre>
Exempt the rinkj CVS directories from the documentation reference check.</pre>
<p>[toolbin/tests/check_docrefs.py 1.11]</p>
</blockquote>

<p><strong><a name="2004-10-26_0316"></a>
2004-10-26 03:16 Ralph Giles</strong></p>
<blockquote>
<pre>
Revert jbig2 makefile update accidentally included in the last commit.
We want to maintain compatibility with 0.6 for this release.</pre>
<p>[src/jbig2.mak 1.8]</p>
</blockquote>

<p><strong><a name="2004-10-26_0312"></a>
2004-10-26 03:12 Ralph Giles</strong></p>
<blockquote>
<pre>
Add the new gsutil.py source to the file catalog</pre>
<p>[doc/News.htm 1.152, doc/Testing.htm 1.27]</p>
</blockquote>

<p><strong><a name="2004-10-26_0312"></a>
2004-10-26 03:12 Ralph Giles</strong></p>
<blockquote>
<pre>
Update notes and dates for the 8.32 release.</pre>
<p>[src/gscdef.c 1.47, src/jbig2.mak 1.7, src/version.mak 1.75]</p>
</blockquote>

<p><strong><a name="2004-10-26_0250"></a>
2004-10-26 02:50 Ralph Giles</strong></p>
<blockquote>
<pre>
Add libctx memory pointers where required in the compiled-fonts code. This
was missed in the initial commit. Also, add the OBJ directory to the include
path when compiling the font data, since stdpre.h now requires the generate
arch.h header. Closes bug 687758.</pre>
<p>[src/cfonts.mak 1.5, src/iccfont.c 1.11]</p>
</blockquote>

<p><strong><a name="2004-10-25_1511"></a>
2004-10-25 15:11 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix : CIDFont-CMap construction didn't work with substituted CID font resources.

DETAILS :

Bug 687766 "CJK cidfmap ignores aliases".

This patch fixes the problem (the change to gs_cidfm.ps)
and provides a debug printing in various modules
related to CID font substitution.

EXPECTED DIFFERENCES :

None.</pre>
<p>[lib/gs_cidcm.ps 1.12, lib/gs_cidfm.ps 1.7, lib/gs_fntem.ps 1.8, lib/gs_init.ps 1.112, lib/gs_resmp.ps 1.11]</p>
</blockquote>

<p><strong><a name="2004-10-22_0807"></a>
2004-10-22 08:07 Raph Levien</strong></p>
<blockquote>
<pre>
Fixes copying of paths into clipping path list so that it works even
when the path is allocated with local_segments. Fixes bugs #687401,
#687612, and #687750.</pre>
<p>[src/gxcpath.c 1.13]</p>
</blockquote>

<p><strong><a name="2004-10-21_1757"></a>
2004-10-21 17:57 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix (TT interpreter) : Subglyphs were positioned wrongly (continued).

DETAILS :

This fixes the log message of the previous patch in the "expected differences" section.
Bug 687589 "A composite glyph renders wrongly".
Bug 687768 "umlauts misplaced in eps file".

EXPECTED DIFFERENCES :

Testform.v1.0.2.pdf"</pre>
<p>[src/ttfmain.c 1.31]</p>
</blockquote>

<p><strong><a name="2004-10-21_1752"></a>
2004-10-21 17:52 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix (TT interpreter) : Subglyphs were positioned wrongly.

DETAILS :

Bug 687589 "A composite glyph renders wrongly".
Bug 687768 "umlauts misplaced in eps file".

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/ttfmain.c 1.30]</p>
</blockquote>

<p><strong><a name="2004-10-21_1505"></a>
2004-10-21 15:05 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix (TT interpreter) : A tolerance to bad TT instructions.

DETAILS :

Bug 687764 "/invalidfont in .type42execchar".
Since we met several fonts with bad TT instructions,
we print a warning and continue with ignoring instructions.

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gstype42.c 1.46, src/gxfont42.h 1.20, src/gxttfb.c 1.35, src/ttfmain.c 1.29, src/ttfoutl.h 1.14]</p>
</blockquote>

<p><strong><a name="2004-10-20_1558"></a>
2004-10-20 15:58 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix (pdfwrite) : Glyph positions were wrong for vertical CID fonts (continued).

DETAILS :

Bug 687603 "vertical text misplaced after distilling", reopened.
Bug 687753 "Text not aligned when viewed with Acrobat Reader", re-testing.

Disposition :
D1. The PDF spec requires X-compomenent of v-vector always equals to half glyph width.
D2. AR5 appears to use W|DW to compute the X-component of the v-vector of WMode 1.

The previous patch fixed most problems, but one left unfixed.
When a glyph is used with WMode 0, and later with WMode 1,
the second usage doesn't store Width and V due to the 'used' flag is already set.
This patch introduces 2 separate sets of flags for WNode 0 and WMode 1.

Changes :
1. Defined a new field 'used2' fro WMode 1 in gdevpdtf.h .
2. Allocated the used2 array, provided garbager methods,
   and a resizing on demand in gdevpdtf.c .
3. gdevpdtc.c sets used2.
4. Improved the computation of the v-vector in gdevpdtt.c .
   Now pdf_glyph_widths should be conforming to (D1) and (D2).
5. The coordinate adjustment in gdevpdte.c is not longer useful
   due to (4). Removed.
6. When writing W, W2, glyphs are being enumerated with used, used2
   correspondingly (gdevpdtw.c).
7. The accedd to Widths2 sometimes was incorrect. Now fixed (gdevpdtf.c).
8. gdevpdtc.c misused Widths2 as Widths when storing the WMode 0 width
   as a component of theWMode 1 v-vector. Now fixed.

EXPECTED DIFFERENCES :

Bug687603.ps</pre>
<p>[src/gdevpdtc.c 1.39, src/gdevpdte.c 1.64, src/gdevpdtf.c 1.40, src/gdevpdtf.h 1.25, src/gdevpdtt.c 1.92, src/gdevpdtw.c 1.34]</p>
</blockquote>

<p><strong><a name="2004-10-20_0252"></a>
2004-10-20 02:52 Jack Moffitt</strong></p>
<blockquote>
<pre>
Remove quotes from input filenames.</pre>
<p>[toolbin/tests/update_specific 1.3]</p>
</blockquote>

<p><strong><a name="2004-10-20_0130"></a>
2004-10-20 01:30 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix (pdfwrite, PDF interpreter) : Glyph positions were wrong for vertical CID fonts.

DETAILS :

Bug 687753 "Text not aligned when viewed with Acrobat Reader".

Disposition :
D1. The PDF spec requires X-compomenent of v-vector always equals to half glyph width.
D2. AR5 appears to use W|DW to compute the X-component of the v-vector of WMode 1.

Changes :
1. With WMode 1, pdf_obtain_cidfont_widths_arrays obtains both Widths and Widths2 arrays
   (gdevpdtf.c, gdevpdtf.h, gdevpdtc.c).
2. For CID fonts gdevpdtc.c computes both WMode 1 and WMode 2 width
   when WMode 1 is requested.
3. Due to (D1), must compensate the half width when computing a glyph position
   in gdevpdte.c (hunk #2).
4. In gdevpdte.c internal data glyph_origin_shift used opposite signs for
   CID and non-CID fonts. Now made uniform.
5. The Type 0 font matrix and the descendent CID font matrix were applied
   in a wrong order in gdevpdte.c .
6. To satisfy (D2) when WMode 1 is only requested,
   write DW 0 when WMode 1 is only requested.
7. After fixing all above, from the test file of the bug 687753 pdfwrite
   generated a PDF, which GS failed interpret due to a curious failure
   with e_dictfull while checking for an absent key /File in the font dictionary.
   Patched zfcid1.c to provide a tolerance.
   Meanwhile we're not sure that it's the best way for fixing that,
   so if someone can bring a better method, feel free to improve.
8. The PDF interpreter is patched to comply with (D2) - pdf_font.ps, hunk #2 .
9. Fixed a bug in .pdfMakeInternalMTXArray : W2 arraytype elements wrongly
   computed the range (debugged with re-distilled Bug687603.ps).

EXPECTED DIFFERENCES :

Bug687603.ps

besides that, it generates an improved PDF for japan-.ps, Type11CDevProc.ps,
but rasters appear same because a change to the PDF interpreter compensates
changes to the PDF writer.</pre>
<p>[lib/pdf_font.ps 1.70, src/gdevpdtc.c 1.38, src/gdevpdte.c 1.63, src/gdevpdtf.c 1.39, src/gdevpdtf.h 1.24, src/gdevpdtw.c 1.33, src/zfcid1.c 1.21]</p>
</blockquote>

<p><strong><a name="2004-10-18_1523"></a>
2004-10-18 15:23 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix : Degenerate segments must not paint when caps is not round.

DETAILS :

Bug 687720 "Zero length lines must not stroke".
See comment in code.

EXPECTED DIFFERENCES :

Normal 72 dpi :

"012-05.ps"
"013-05.ps"
"014-05.ps"
"015-01.ps"
"015-05.ps"
"027-01.ps"
"027-09.ps"
"032-01.ps"
"034-01.ps"
"034-10.ps"
"083-05.ps"
"123-05.ps"
"169-05.ps"
"192-01.ps"
"222-05.ps"
"298-05.ps"
"307-01.ps"
"321-05.ps"
"file2.pdf"

Normal 300 dpi :

"012-05.ps"
"014-05.ps"
"015-01.ps"
"015-05.ps"
"027-01.ps"
"027-09.ps"
"034-01.ps"
"034-10.ps"
"123-05.ps"
"169-05.ps"
"192-01.ps"
"222-05.ps"
"298-05.ps"
"307-01.ps"
"321-05.ps"
"a.pdf"
"file2.pdf"

pdfwrite 72 dpi :

"012-05.ps"
"013-05.ps"
"014-05.ps"
"015-01.ps"
"015-05.ps"
"027-01.ps"
"027-09.ps"
"032-01.ps"
"034-01.ps"
"034-10.ps"
"083-05.ps"
"123-05.ps"
"169-05.ps"
"192-01.ps"
"222-05.ps"
"298-05.ps"
"307-01.ps"
"321-05.ps"
"ai2.pdf"
"file2.pdf"

pdfwrite 300 dpi :

"012-05.ps"
"014-05.ps"
"015-01.ps"
"015-05.ps"
"027-01.ps"
"027-09.ps"
"034-01.ps"
"034-10.ps"
"083-05.ps"
"123-05.ps"
"169-05.ps"
"192-01.ps"
"222-05.ps"
"298-05.ps"
"307-01.ps"
"321-05.ps"
"a.pdf"
"file2.pdf"</pre>
<p>[src/gxpdash.c 1.6, src/gxstroke.c 1.13]</p>
</blockquote>

<p><strong><a name="2004-10-18_0843"></a>
2004-10-18 08:43 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix (Type 1 hinter) : Don't align glyph width to pixels.

DETAILS :

See comment in code.
Bug 687719 "PDFWRITE corrupts letter spacing/placement".

When porting this patch to GS_8_1X please note that the default value
of AlignToPixels is different in HEAD andf GS_8_1X.
Therefore this patch may cause differences witg GS_8_1X.

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gxhintn.c 1.54]</p>
</blockquote>

<p><strong><a name="2004-10-15_1824"></a>
2004-10-15 18:24 Igor Melichev</strong></p>
<blockquote>
<pre>
(pdfwrite) : Implementing a dynamic recongnition for Type 3 charproc variations (continued 9).
Check the Encoding compatibility while merging Type 3 glyph variations.

DETAILS :

Fixes the reopened bug 687660
"incorrect font rendering/missing glyphs from ps2pdf".

pdf_is_same_charproc1 now checks whether we try to replace
a charproc with one taken from a font with a compatible Encoding.
Before now the encoding was ingnored,
causing a subsequent failure (due to an encoding conflict)
when adding glyphs to the font copy, and an infinite loop.
As usual, the encoding compatibility
is being checked within the list of characters of a current text.

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gdevpdfx.h 1.102, src/gdevpdti.c 1.38, src/gdevpdtt.c 1.91, src/gdevpdtt.h 1.25]</p>
</blockquote>

<p><strong><a name="2004-10-15_1818"></a>
2004-10-15 18:18 Igor Melichev</strong></p>
<blockquote>
<pre>
(pdfwrite) : Implementing a dynamic recongnition for Type 3 charproc variations (continued 8).
Allocate a single character list per text.

DETAILS :

This change is algorithmically equivalent.
It's a preparation for fixing the reopened bug 687660
"incorrect font rendering/missing glyphs from ps2pdf".

For 1-byte fonts now we allocate a singe instance of
pdf_char_glyph_pairs_t for storing the character list for entire text.
Now it is done once per text as an extention to pdf_text_enum_t.
The intention is to provide an access to it from pdf_find_same_charproc.

CID text is still processed in chunks, which
are delimited by font changes or CDevProc callouts.
It may cause a searchability problem with some viewers,
when converting a composefont with a Type 3 descendent.
But unlikely we'll met such case in practice,
due to we have no exmples of composefont with a Type 3 descendent.

We would like to improve the CID text processing sometimes with
with building a complete character list for a text portion
delimited with font changes. The new algorithm for scan_cmap_text
should be like this : first delimit a single font portion,
then construct the character list for the portion,
and then process the portion with possible CDevProc and charproc callouts.

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gdevpdtc.c 1.37, src/gdevpdte.c 1.62, src/gdevpdtf.c 1.38, src/gdevpdtf.h 1.23, src/gdevpdtt.c 1.90, src/gdevpdtt.h 1.24, src/gxfcopy.c 1.52, src/gxfcopy.h 1.11]</p>
</blockquote>

<p><strong><a name="2004-10-15_0855"></a>
2004-10-15 08:55 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix : toolbin/pdfinflt.ps did not decompress some streams.

DETAILS :

Patch from SaGS for the bug 687746
"gs\toolbin\pdfinflt.ps doesn't unpack a stream"

Current version of pdfinflt.ps uncompresses only streams that have a single
filter applied, and only if that single filter is /FlateDecode. Proposed
patch (attached) ads support for procesing streams with multiple filters.

However, not all decompressing filters can be removed, and not in all cases
it would be desirable to remove them. The /filterstoremove dictionary lists
filters that are to be processed, and omits filters that are to be preserved
in the output. For streams with multiple filters chained together, the new
version of pdfinflt.ps removes all filters from the first in the
decompressing chain up to, but excluding, the first filter that is to be
preserved. The list of preserved filters, with the reason why these are not
removed, follows:

/RunLengthDecode, /CCITTFaxDecode, /DCTDecode:
These are normaly used for compressing raster images. I assume the main
purpose of this tool is to decompress page streams for debugging, and
decompressing images only adds a huge amount of binary data, making harder
to find and examine content streams. If this is not the case, and getting
raw image data is necessary, simply uncomment the lines corresponding to
these filters.

/JBIG2Decode, /JPXDecode:
There's no (standard) PostScript filter that corresponds to these PDF
filters. (I think) GhostScript implements these filters in the PostScript
interpreter, but not for all platforms, so I added some detection code for
them. The preceding paragraph applies too, so I left the lines corresponding
to these filters commented out.

/Crypt (PDF1.5-specific):
This is a generic interface with decryption plug-ins, and has no PostScript
counterpart (and I don't see how it could have one).

EXPECTED DIFFERENCES :

None.</pre>
<p>[toolbin/pdfinflt.ps 1.6]</p>
</blockquote>

<p><strong><a name="2004-10-14_1832"></a>
2004-10-14 18:32 Ray Johnston</strong></p>
<blockquote>
<pre>
Add logic to capture the ENTIRE regression report to a rotating log file.
As before the ENTIRE regression report is only emailed on Mondays.</pre>
<p>[toolbin/tests/run_nightly 1.29]</p>
</blockquote>

<p><strong><a name="2004-10-14_1728"></a>
2004-10-14 17:28 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix (pdfwrite) : Fixing some Type 3 encoding problems.

DETAILS :

We found that Encoding compatibility was insufficiently checked
with Type 3 glyph variations.

It's a preparation for fixing the reopened bug 687660
"incorrect font rendering/missing glyphs from ps2pdf".

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gdevpdti.c 1.37, src/gdevpdtt.c 1.89]</p>
</blockquote>

<p><strong><a name="2004-10-13_1531"></a>
2004-10-13 15:31 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix (pdfwrite, PDF interpreter) : Correctly handle different widths for same glyph (continued).

DETAILS :

This patch continues a long story about the handling of different widths for same glyph
in a PDF embedded font.
The last patch in this series was
http://www.ghostscript.com/pipermail/gs-cvs/2004-September/004834.html

That patch caused a problem with pdfwrite,
which needs to write an original glyph name
rather than a substituted one.

This change establish a new discipnile for
passing the original glyph name from the PDF interpreter to pdfwrite
inside a substituted glyph name, with using an
implementation specific separator (~GS~).

Before writing a font, we apply copied_drop_extension_glyphs
to remove extended glyph names. We don't like to
modify the font, but choose this minimal solution for now.
A better solution would be to introduce another flag to glyph slots
to mark ones, which to be skipped when writing the embedded font.

Bug 687740 "(pdfwrite) A character dissappeared in ADOBE1-4.pdf".

EXPECTED DIFFERENCES :

pdfwrite :

ADOBE1-4.pdf</pre>
<p>[src/gdevpdtb.c 1.29, src/gdevpdtw.c 1.32, src/gxfcopy.c 1.51, src/gxfcopy.h 1.10, src/gxfont.h 1.23, src/gxtype1.c 1.40, lib/pdf_font.ps 1.69]</p>
</blockquote>

<p><strong><a name="2004-10-12_2308"></a>
2004-10-12 23:08 Ray Johnston</strong></p>
<blockquote>
<pre>
Fix LZWEncode filter to use the EarlyChange parameter and also correct the
tifflzw device to initialize EarlyChange to the proper value (1).
Bug 687726.

DETAILS:

The LZWEncode filter failed to use the EarlyChange param but the LZWDecode
did honor this setting. The LZWEncode always acted as if EarlyChange = 1
which since that was the default, worked as long as the Decoder wasn't set
for EarlyChange == 0.

Also, now that the Encoder honors EarlyChange = 0, the tifflzw device needed
to have the flag set correctly (it needs EarlyChange == 1).

EXPECTED DIFFERENCES:

430-01.ps</pre>
<p>[src/gdevtfax.c 1.8, src/slzwe.c 1.2]</p>
</blockquote>

<p><strong><a name="2004-10-08_2255"></a>
2004-10-08 22:55 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix (pdfwrite) : *bfrange boundaries may differ in the last byte only.

DETAILS :

The PDF specification requires so.
Bug 687737 "can't select text in distilled pdf".

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gsfcmap.c 1.25]</p>
</blockquote>

<p><strong><a name="2004-10-08_1327"></a>
2004-10-08 13:27 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix (pdfwrite) : The function same_type42_hinting was indeterministic.

DETAILS :

It compares few TrueType tables for equality,
but didn't work out the case when a table is absent.
In that case the bahavior was indeterministic.

Bug 687736 "pdfwrite hangs (or takes really long) on input file".
It created too many font copies and spent lots of time
for garbage collection.

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gxfcopy.c 1.50]</p>
</blockquote>

<p><strong><a name="2004-10-07_2112"></a>
2004-10-07 21:12 Alex Cherepanov</strong></p>
<blockquote>
<pre>
Don't overwrite CFLAGS variable if it is already defined.
Bug 687739</pre>
<p>[src/msvc32.mak 1.64]</p>
</blockquote>

<p><strong><a name="2004-10-07_0518"></a>
2004-10-07 05:18 Ray Johnston</strong></p>
<blockquote>
<pre>
Fix initialization of C stack streams that did not perform s_init().
Bug 687709 that could result in a Segmentation Fault (SEGV)

DETAILS:
The normal s_alloc() streams included s_init() on the allocated stream,
but C stack streams could have uninitialized elements in the stream struct.
Since this was UMR related, and affected the clist mode, the jpeg device
and the pswrite device (and possibly some pdfwrite data), this would be
different on different platforms.

The premature 'CloseTarget' action when the stream->close_strm was not
initialized as 0 (false) would show up as a SEGV when the -Z@ was used.
Other problems that this patch fixes are not linked to a test file at
the current time.

This change also corrects a trivial typo and a NUL character found in
src/gxtype1.c as a header file related warning in src/imain.c</pre>
<p>[src/gdevjpeg.c 1.8, src/gdevlj56.c 1.6, src/gdevpdfc.c 1.49, src/gdevpdfm.c 1.47, src/gdevpdtb.c 1.28, src/gdevpdtw.c 1.31, src/gdevps.c 1.40, src/gdevpsf1.c 1.17, src/gdevpsf2.c 1.32, src/gdevpsft.c 1.32, src/gdevpsim.c 1.14, src/gdevpsu.c 1.18, src/gsfunc4.c 1.16, src/gxclimag.c 1.11, src/gxclpath.c 1.20, src/gxclrast.c 1.31, src/gxclread.c 1.13, src/gxfcopy.c 1.49, src/gxtype1.c 1.39, src/iccfont.c 1.10, src/imain.c 1.40, src/imainarg.c 1.33, src/stream.c 1.26]</p>
</blockquote>

<p><strong><a name="2004-10-06_1412"></a>
2004-10-06 14:12 Ralph Giles</strong></p>
<blockquote>
<pre>
Add a missing dependency on version.mak to the generation of gconfigd.h.
Without this the revision number isn't correctly updated in an incremental
build. Closes bug 687733.</pre>
<p>[src/gs.mak 1.27, src/version.mak 1.74]</p>
</blockquote>

<p><strong><a name="2004-10-06_1132"></a>
2004-10-06 11:32 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix (TrueType interpreter) : Calls to user defined instructions were not implemented.

DETAILS :

This implements IDEF and user defined instructions calls
according to the TrueType specification by Apple
http://developer.apple.com/fonts/TTRefMan/ .

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/ttinterp.c 1.15, src/ttobjs.c 1.8, src/ttobjs.h 1.6]</p>
</blockquote>

<p><strong><a name="2004-10-05_1245"></a>
2004-10-05 12:45 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix : The 'gslibctx' patch had broken FAPI.

DETAILS :

A memory context pointer was added with no initialization.

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/zfapi.c 1.53]</p>
</blockquote>

<p><strong><a name="2004-10-05_1024"></a>
2004-10-05 10:24 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix (Type 1 hinter) : 'int32' conflicts with AIX compiler standard types.

DETAILS :

Bug 687723 "type conflicts in gxhintn.h"

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gxhintn.c 1.53, src/gxhintn.h 1.23, src/lib.mak 1.201]</p>
</blockquote>

<p><strong><a name="2004-10-04_1728"></a>
2004-10-04 17:28 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix : Optimize gs_c_decode with a binary search.

DETAILS :

Bug 687102 "Optimize gs_c_decode".
Patch from John Desrosiers.

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gscedata.c 1.5, src/gscedata.h 1.4, src/gscencs.c 1.8, toolbin/encs2c.ps 1.5]</p>
</blockquote>

<p><strong><a name="2004-10-02_0145"></a>
2004-10-02 01:45 Alex Cherepanov</strong></p>
<blockquote>
<pre>
Add TrivialCMYK color space, which simulates standard PostScript CMYK
to RGB conversion on device-independent level.
Fix bug 687711

[DETAILS]
Recent versions of Adobe Acrobat simulate on screen the appearance
of printed documents when the color of an object is specified
in DeviceCMYK color space. The resulting dark colors can be undesirable
for presentation graphics. TrivialCMYK can help when the user had
RGB colors in mind, but for some reason used CMYK colors instead in the
document.</pre>
<p>[Resource/ColorSpace/DefaultCMYK 1.4, Resource/ColorSpace/DefaultRGB 1.4, Resource/ColorSpace/TrivialCMYK 1.1]</p>
</blockquote>

<p><strong><a name="2004-10-01_2336"></a>
2004-10-01 23:36 Russell Lang</strong></p>
<blockquote>
<pre>
Change OS/2 gx_color_index from 32 to 64 bits to allow better
support for DeviceN.</pre>
<p>[src/os2.mak 1.41]</p>
</blockquote>

<p><strong><a name="2004-10-01_2335"></a>
2004-10-01 23:35 Russell Lang</strong></p>
<blockquote>
<pre>
Fix for 687706 Display device 8-bit native incorrectly dithers grays.
This is a partial fix and also needs Dan Coby's fixes to the post
DeviceN halftoning.  The DeviceRGBK color model is added.

DETAILS:
Prior to GS 8, the display device 8-bit native format would use 32
gray levels to avoid halftoning, and a 4x4x4 color cube which did use
halftoning.  The halftoning logic was changed with the introduction
of DeviceN and in GS 8 both grays and colors were being halftoned.

The DeviceRGBK color model is added and used by the display device
native 8-bit format.  The RGB color space to RGBK color model
conversion converts pure RGB grays to the K (black/gray additive)
component.  This allows the 32 gray levels to be recognised by the
halftoning logic as being sufficient to avoid halftoning.</pre>
<p>[src/gdevdsp.c 1.30, src/gxcmap.c 1.23, src/gxcmap.h 1.12, src/zcolor.c 1.21]</p>
</blockquote>

<p><strong><a name="2004-10-01_0340"></a>
2004-10-01 03:40 Dan Coby</strong></p>
<blockquote>
<pre>
Fix for 687718 The tiffsep device fails when the size of gx_color_index is 32 bits

DETAILS:

The comments on bug 687705 "Compile of 8.31 fails on OS/2" point out that the
tiffsep device fails during device initialization if the size of
gx_color_index is 32 bits.

This is due to a recent change which made the default number of components for
this device equal to 8.  This works if the size of gx_color_index is 64 bits.
But it fails with 32 bits.

This fix changes the default number of components for this device to be
based upon the size of gx_color_index.  It also changes the psdcmyk device
to use the same logic for its default number of components.

This fix also includes changes to doc/Devices.htm which explains that the number
of components will differ based upon the size of gx_color_index (and a link
giving more details on gx_color_index).  More information about the parameters
for the tiffsep device is given including an example command line.</pre>
<p>[doc/Drivers.htm 1.49, src/gdevpsd.c 1.18, src/gdevtsep.c 1.5]</p>
</blockquote>

<p><strong><a name="2004-09-30_1731"></a>
2004-09-30 17:31 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix : Moving type1_cis_get_metrics to the graphics library.

DETAILS :

Doing so since copied_type1_glyph_outline calls it.
This change is algorithmically equivalent.
Thanks to Stefan for pointing this out.

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gxtype1.c 1.38, src/zchar1.c 1.40]</p>
</blockquote>

<p><strong><a name="2004-09-30_0637"></a>
2004-09-30 06:37 Dan Coby</strong></p>
<blockquote>
<pre>
This is a partial fix for 687706 Display device 8-bit native incorrectly
dithers grays.  Russell Lang is improving the 8-bit (256 color) display
device to allow more shades of gray.  This change is required for that
effort.

DETAILS:

The pre 8.00 release had more gray levels for the 8-bit display device
but the pre 8.00 release had other related problems in halftoning.  The
fix for those problems eliminated the extra gray levels.

Russell's effort dug up some problems with the handling of halftones
for devices in which the max_color and max_gray values are different
and gray_index is set to an actual component number.  This fix corrects
those problems.

Russell has a patch for the remainder of the effort.  His changes
involve changing the 256 color display device to use a DeviceRGBK process
color model:  red, green, blue and an additive black (gray).  New
device color mapping procs also have been created for this process color
model.  (This is the first example of this process color model in
Ghostscript.)</pre>
<p>[src/gxdevice.h 1.20, src/gxdevndi.c 1.4]</p>
</blockquote>

<p><strong><a name="2004-09-29_2136"></a>
2004-09-29 21:36 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix (the filling algorithm) : Unite trapezoids if they have a common side.

DETAILS :

Bug 687716 "Assertion fails in gzspotan.c".
The spot analyzer can't reconstruct the topology when there are
two trapezoids with a common side.

We patched the spot decomposition algorithm with
uniting such trapezoids, because (1) it's too hard to
unite them in the "spotan" device, and (2)
the post-condition of the spot decomposer simplifies.

For more details see a new comment in code.

This patch causes a rendering difference.
We believe that a big part of differences happens due to the bug 687717,
which is currently unfixed due to the QA overload.

If the bug 687717 is fixed before this patch,
a small rendering difference can also appear,
because we unite trapezoids by the equality of x_current, x_next,
which have an arithmetic error. Therefore ununited trapezoids
may have a pixel center between them, which is not painted,
but shifting a boundary to x_current, x_next the pixel center
may fall into a trapezoid, then it is covered by the union and painted.

Besides that, with dropout prevention, a pixel set for the union of
two trapezoids may differ from the union of pixel sets for ununited trapezoids
when at least one of the trapezoids is narrow.
Particularly, two narrow trapezoids may paint 2 pixels,
but its (narrow) union does a single pixel.
Contacting trapesoids are not regular in characters,
which only use a dropout prevention,
but the test file of the bug 687698 (same as for 687667)
demonstrates some ones in a CJK TT font,
which composes hieroglyphs from subglyphs with a deformation and shifting.

EXPECTED DIFFERENCES :

normal 72dpi :

"181-01.ps"
"222-05.ps"
"222-09.ps"
"289-01.ps"
"307-07.ps"
"86554321.pdf"
"bulletin.pdf"
"KozukaB-ILEmbed.pdf"
"S2_Digitalproof-Forum_x3k.pdf"
"waterfal.ps"

normal 300dpi :

"012-05.ps"
"012-09.ps"
"013-05.ps"
"013-09.ps"
"123-05.ps"
"123-09.ps"
"222-09.ps"
"289-01.ps"
"307-07.ps"
"86554321.pdf"
"Altona.Page_3.2002-09-27.pdf"
"Altona_Technical_1v1_x3.pdf"

pdfwrite 72dpi :

"181-01.ps"
"222-05.ps"
"222-09.ps"
"307-07.ps"
"86554321.pdf"
"Bug687603.ps"
"bulletin.pdf"
"KozukaB-ILEmbed.pdf"
"S2_Digitalproof-Forum_x3k.pdf"

pdfwrite 300dpi :

"012-05.ps"
"012-09.ps"
"013-05.ps"
"013-09.ps"
"123-05.ps"
"123-09.ps"
"222-09.ps"
"307-07.ps"
"86554321.pdf"
"Altona.Page_3.2002-09-27.pdf"
"Altona_Technical_1v1_x3.pdf"</pre>
<p>[src/gxfilltr.h 1.7]</p>
</blockquote>

<p><strong><a name="2004-09-29_1910"></a>
2004-09-29 19:10 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix (pdfwrite) : Handle more than 32 TrueType subglyphs.

DETAILS :

Bug 687698  "Cannot extract the embedded font" error message

1. The old code run out an implementation limit MAX_GLYPH_PIECES.
2. Error code was not propagated.

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gxfcopy.c 1.48]</p>
</blockquote>

<p><strong><a name="2004-09-29_1134"></a>
2004-09-29 11:34 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix : Don't apply fill adjustment when stroking a character.

DETAILS :

Bug 687667 "Line width in a Type 1 stroked font".

EXPECTED DIFFERENCES :

-r300 CAT_LOGO.ps</pre>
<p>[src/zchar1.c 1.39]</p>
</blockquote>

<p><strong><a name="2004-09-28_2145"></a>
2004-09-28 21:45 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix : Pattern metrics was imprecize.

DETAILS :

Bug 687581 "A pattern truncated".
This bug is a regression since the December 09 2003 revision.

We still think that we insufficiently understand the Adobe's method,
but now we've got one closer to CPSI than it was before the December 09 2003 revision.
Particularly the pattern step now appears better than on December 09 2003.

This patch includes a change, which is well defined by the math :
the usage of float2fixed_rounded instead float2fixed.
It is a part of the PRECISE_CURRENTPOINT stuff.

The rest of the patch is a kind of hewristic.
We guessed that a pattern size should always round up to allow
a similar logics as for a clipping - "any part of pixel inside".

As before December 09 2003, we improved the case with neither skewing nor rotation.
A further work on the general case may be useful.

At last, some old problems, which existed on December 09 2003,
are still unfixed. An example is -r300 298-09.ps :
a line appears outside the pattern box.
For now living them as they are, because
the primary purpose of this patch is to fix regressions.

EXPECTED DIFFERENCES :

normal 72 dpi :

"176-01.ps"
"255-01.ps"
257-01.ps"  (A dashed line became wider due to a CTM
             coefficient slightly increased,
             and therefore it now looks contiguous.
             It's not a regression.)
"269-01.ps"
"289-01.ps"
"296-01.ps"
"303-01.ps"
"Bug687396.ps"

normal 300 dpi :

"012-09.ps"
"013-09.ps"
"014-09.ps"
"015-09.ps"
"027-13.ps"
"034-10.ps"
"035-07.ps"
"045-01.ps"
"083-09.ps"
"103-01.ps"
"118-01.ps"
"123-09.ps"
"169-09.ps"
"176-01.ps"
"192-01.ps"
"205-09.ps"
"212-01.ps"
"213-01.ps"
"214-01.ps"
"222-09.ps"
"231-01.ps"
"250-01.ps"
"257-01.ps"
"264-01.ps"
"269-01.ps"
"289-01.ps"
"297-01.ps"
"298-09.ps"
"307-07.ps"
"310-04.ps"
"311-03.ps"
"468-01.ps"
"Bug687396.ps"
"mspro.pdf"

pdfwrite 72 dpi :

"176-01.ps"
"212-01.ps"
"214-01.ps"
"257-01.ps" (same as above)
"269-01.ps"
"303-01.ps"
"Bug687396.ps"

pdfwrite 300 dpi :

"012-09.ps"
"013-09.ps"
"014-09.ps"
"015-09.ps"
"017-01.ps"
"027-13.ps"
"034-10.ps"
"035-07.ps"
"045-01.ps"
"083-09.ps"
"103-01.ps"
"118-01.ps"
"123-09.ps"
"169-09.ps"
"176-01.ps"
"192-01.ps"
"205-09.ps"
"212-01.ps"
"213-01.ps"
"214-01.ps"
"222-09.ps"
"231-01.ps"
"244-01.ps"
"245-01.ps"
"245-07.ps"
"245-13.ps"
"245-17.ps"
"250-01.ps"
"255-01.ps"
"257-01.ps"
"258-01.ps"
"264-01.ps"
"269-01.ps"
"270-01.ps"
"297-01.ps"
"298-09.ps"
"307-07.ps"
"310-04.ps"
"311-03.ps"
"321-09.ps"
"327-01.ps"
"468-01.ps"
"Bug687396.ps"
"mspro.pdf"</pre>
<p>[src/gsptype1.c 1.20]</p>
</blockquote>

<p><strong><a name="2004-09-28_0534"></a>
2004-09-28 05:34 Ralph Giles</strong></p>
<blockquote>
<pre>
Export the prototype for gcst_get_memory_ptr() which is now used by
ilocate.c as well as igc.c to igc.h so it is available in both files.
Remove the cast that was papering over the warning this causes.
Completes the fix for bug 687617.</pre>
<p>[src/igc.c 1.14, src/igc.h 1.9, src/ilocate.c 1.12]</p>
</blockquote>

<p><strong><a name="2004-09-28_0226"></a>
2004-09-28 02:26 Alex Cherepanov</strong></p>
<blockquote>
<pre>
Remove a comment about LZW-compatible code that is no longer apply.
Bug 687554.</pre>
<p>[src/Makefile.in 1.39, src/openvms.mmk 1.29]</p>
</blockquote>

<p><strong><a name="2004-09-28_0045"></a>
2004-09-28 00:45 Ralph Giles</strong></p>
<blockquote>
<pre>
Cast the read standard illuminant to icIlluminant instead of
icStandardFlare inside icmMeasurement_read() inside the icc
library. Not really our code, but resolves an enum mis-match
warning. Bug 687694.</pre>
<p>[icclib/icc.c 1.10]</p>
</blockquote>

<p><strong><a name="2004-09-28_0035"></a>
2004-09-28 00:35 Ralph Giles</strong></p>
<blockquote>
<pre>
Add string_.h to some files missing prototypes. Bug 687694.</pre>
<p>[src/devs.mak 1.118, src/gdevps.c 1.39, src/gxpflat.c 1.42, src/lib.mak 1.200]</p>
</blockquote>

<p><strong><a name="2004-09-28_0025"></a>
2004-09-28 00:25 Ralph Giles</strong></p>
<blockquote>
<pre>
Add stdio_.h to the makefile dependencies for gslibctx.c.</pre>
<p>[src/lib.mak 1.199]</p>
</blockquote>

<p><strong><a name="2004-09-28_0008"></a>
2004-09-28 00:08 Ralph Giles</strong></p>
<blockquote>
<pre>
Properly include the portability version of the stdio error. Corrects
type confict problems on HP-UX. Closes bug 687689.</pre>
<p>[src/gslibctx.c 1.5]</p>
</blockquote>

<p><strong><a name="2004-09-27_2114"></a>
2004-09-27 21:14 Russell Lang</strong></p>
<blockquote>
<pre>
Fix bug #687705 Compile of 8.31 fails on OS/2.</pre>
<p>[src/gdevos2p.c 1.9, src/gp_os2.c 1.32, src/os2.mak 1.40]</p>
</blockquote>

<p><strong><a name="2004-09-27_1313"></a>
2004-09-27 13:13 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix (Type 1 hinter) : A further improvement of the glyph rendering quality, step 3.

DETAILS :

Don't reset zone alignment.
Bug 687578 "T1 hinter disturbs stem width", Comment #8.

EXPECTED DIFFERENCES :

normal 72 dpi :

"045-01.ps"     ("s" now aligns with the upper zone).
"Bug687603.ps"

normal 300 dpi :

"CIDembedded.pdf"  ("b", "d" now aligns with the bottom zone).

pdfwrite 72 dpi :

"045-01.ps"

pdfwrite 300 dpi :

"chess.ps" (a sloped line hints better).
"CIDembedded.pdf"</pre>
<p>[src/gxhintn.c 1.52]</p>
</blockquote>

<p><strong><a name="2004-09-27_0455"></a>
2004-09-27 04:55 Ray Johnston</strong></p>
<blockquote>
<pre>
Fix SEGV caused by premature free of the bbox device with high level
devices that use the bbox_device of the vector high level device.
Bug 687631.

DETAILS:

The vector device allocated a bbox device, but never incremented the
reference count past zero, so any use of the device that added a forwarding
device with that bbox_device as the target would free the bbox device
when that forwarding device closed. This happens with clipped images
or images that use ROP's since a clipping ROP forwarding could be used.</pre>
<p>[src/gdevvec.c 1.25]</p>
</blockquote>

<p><strong><a name="2004-09-26_2117"></a>
2004-09-26 21:17 Ray Johnston</strong></p>
<blockquote>
<pre>
Add missing source file (it hadn't been 'added', so it did not get included
on the previous LZWEncode commit.</pre>
<p>[src/slzwe.c 1.1]</p>
</blockquote>

<p><strong><a name="2004-09-26_1619"></a>
2004-09-26 16:19 Ray Johnston</strong></p>
<blockquote>
<pre>
Add the LZWEncode filter that actually compresses using the LZW method,
rather than the dummy encoder in slzwce.c that expanded the input, but
that avoided the patent issues. Bug 687554.

Also fix a long standing issue in filter closing that failed to flush the
target stream after the final s_process_write_buf with 'last' == true.
Bug 224134.

DETAILS:

The LZWEncode filter was moved over from an older version of Ghostscript
that actually had a working LZWEncode.

The s_filter_close logic (discussed at length in bug 224134) was fixed
to be consistent with the specification and with Adobe. While the
target stream is not closed (per the specification unless CloseTarget is
true), the specification *DOES* call for an automatic 'flushfile' which
is supposed to be propagated down the filter chain.</pre>
<p>[doc/Develop.htm 1.140, doc/Issues.htm 1.42, doc/Projects.htm 1.59, doc/Ps2pdf.htm 1.71, src/bcwin32.mak 1.33, src/dvx-gcc.mak 1.27, src/lib.mak 1.198, src/macos-mcp.mak 1.26, src/macosx.mak 1.23, src/msvc32.mak 1.63, src/msvclib.mak 1.26, src/openvms.mak 1.37, src/os2.mak 1.39, src/slzwce.c 1.5, src/stream.c 1.25, src/unix-gcc.mak 1.46, src/unixansi.mak 1.37, src/watcw32.mak 1.30, src/zfilter2.c 1.6]</p>
</blockquote>

<p><strong><a name="2004-09-25_2148"></a>
2004-09-25 21:48 Jack Moffitt</strong></p>
<blockquote>
<pre>
Fix error with automatic baseline creation for files which contain spaces
in their names.</pre>
<p>[toolbin/tests/gscheck_pdfwrite.py 1.24, toolbin/tests/gscheck_raster.py 1.14]</p>
</blockquote>

<p><strong><a name="2004-09-25_2027"></a>
2004-09-25 20:27 Ralph Giles</strong></p>
<blockquote>
<pre>
Remove the 'makegnu' utility. It is out of date, and recent changes to
the documentation structure have rendered its automation more-or-less
unnecessary. The appropriate steps to convert releases are now
documented in doc/Release.htm.</pre>
<p>[toolbin/makegnu.tcl 1.6]</p>
</blockquote>

<p><strong><a name="2004-09-25_2024"></a>
2004-09-25 20:24 Ralph Giles</strong></p>
<blockquote>
<pre>
Toolbin cleanup. Remove the extensionless shell wrappers for convenience
utilities, except for gsmake where is aesthetically reasonable. Typing
the script extensions for these little-used commands isn't a hardship.</pre>
<p>[toolbin/cvs2hist 1.4, toolbin/makefonts 1.4, toolbin/makegnu 1.4, toolbin/makehist 1.4, toolbin/makemaster 1.4, toolbin/makeset 1.4, toolbin/maketars 1.4, toolbin/makewin 1.4, toolbin/tmake 1.4]</p>
</blockquote>

<p><strong><a name="2004-09-25_2019"></a>
2004-09-25 20:19 Ralph Giles</strong></p>
<blockquote>
<pre>
Update some remaining occurances of 'GNU Ghostscript' to 'GPL
Ghostscript'.</pre>
<p>[doc/Commprod.htm 1.33, doc/Make.htm 1.80, doc/New-user.htm 1.52, doc/Public.htm 1.7, doc/Readme.htm 1.57]</p>
</blockquote>

<p><strong><a name="2004-09-22_1535"></a>
2004-09-22 15:35 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix : Cygwin/gcc warnings.

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/zchar1.c 1.38]</p>
</blockquote>

<p><strong><a name="2004-09-22_1532"></a>
2004-09-22 15:32 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix (pdfwrite) : Alwasys write the file ID in hexadecimal encoding.

DETAILS :

Bug 687688  "PDF file identifier uses non-alphanumeric characters".
The previous patch was committed by error.
This one fixes that, unwinding the last patch.

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gdevpdf.c 1.100, src/gdevpdfu.c 1.60]</p>
</blockquote>

<p><strong><a name="2004-09-22_1523"></a>
2004-09-22 15:23 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix (pdfwrite) : Alwasys write the file ID in hexadecimal encoding.

DETAILS :

Bug 687688  "PDF file identifier uses non-alphanumeric characters".

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gdevpdfu.c 1.59]</p>
</blockquote>

<p><strong><a name="2004-09-22_1415"></a>
2004-09-22 14:15 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix : Cygwin/gcc warnings.

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/ichar1.h 1.12]</p>
</blockquote>

<p><strong><a name="2004-09-22_1352"></a>
2004-09-22 13:52 Igor Melichev</strong></p>
<blockquote>
<pre>
CDevProc|Metrics|Metrics2 did not work with CIDFontType 0.

DETAILS :

Bug 687681 "Character spacing incorrect".
The old implementation, which comes from the gs-cjk team,
has a bug accessing the replaced metrics of a CIDFontType 0 font,
which effectively caused the replaced metric to be ignored with CIDFontType 0 fonts.

1. Bug : With CIDFontType 0, CDevProc|Metrics|Metrics2 was searched
   in the descendent type 1 or 2 font rather than in the parent type 9 font.

   1.1. A Type 9 font needs to be accessed via a descendent Type 1|2 font
        in pfont->procs.glyph_info. Added a new field gs_type1_data_s::parent,
        and provided an access through it with a new function gs_font_parent.

   1.2. Metrics|Metrics2 is now accessed through gs_font_parent.

   1.3. To access CDevProc implemented a new function zchar_get_CDevProc,
        which also works through gs_font_parent.

   1.4. gs_type1_data_s::parent needs to reset while a type 9 font finalization,
        due to a reason, which we could not understand for sure.
        Likely descendent fonts appear to have a bigger lifetime than
        their parent type 9 font. Probably the descendents are pointed from
        somewhere besides FDArray (maybe the font registry ?
        or maybe after scaling the type 9 font from a type 9 copy ?),
        and we think it's not good.
        We believe that they should be released together with the type 9 font.
        For now leaving it as it is, working around with a hack notify_remove_font_type9.

   1.5. In stable font copies gs_type1_data_s::parent is set to NULL
        to simplify the finalization. They are not used now.

2. Bug : In some cases the glyph bytecode was used instead the CID
   as a key for searching a Metrics|Metrics2 element (zchar1.c).

3. Bug : The PDF interpreter wrongly scaled W,W2,DW,DW2 for CIDFontTYpe0 (pdf_font.ps).

4. pdfwrite : Improved the generation of W, W2 for CID fonts,
   because after implementing (1) re-distilled 401-01.ps rendered incorrectly.

   4.1. Prefer a non-zero width when computing DW, DW2 (gdevpdtw.c)
        (debugged with 401-01.ps).

   4.2. Don't skip zero W, W2 elements. The old code recognized zeros as
        unused glyphs, but must do with the real glyph set in the font copy
        (debugged with the test file of the bug 687681).

5. zcharstring_outline still ignores CDevProc. We believe that it is correct,
   because it is used to compute font features with no dependence on
   the relaced metrics.

6. pdfwrite : Allowed a CDevProc callout for CIDFontType 0, because
   pdfwrite needs to know replaced widths, as well as it was done a half year ago
   for CIDFontType2. Actually after implementing (1) pdfwrite stopped
   to work correctly when re-distilling a PDF file with CIDFontType0,
   due to now it uses W,W2,DW,DW2.

   6.1. A new function z1_set_cache is defined for this purpose
        similarly to zchar42_set_cache.

   6.2. gs_font_procs::glyph_outline now retrieves the side bearing and width.
        Added a new argument 'sbw' to all implementations.

      6.2.1. Currently this function extension is implemented for charstring fonts only,
          which need to interpret a charstring to retrieve the info :
          type 1,2,9, because we don't want to run the type 1 interpreter 2 times
          for getting sbw and bbox. Other font types retrieve zeros,
          which currently are not used.

      6.2.2. type1_cis_get_metrics has been made public.

7. We believe that the implementation of W,W2,DW,DW2 in the PDF interpreter,
   which was contributed by the gs-cjk team, is unreasonably overcomplicated,
   because it is based on CDevProc, which needs an interpreter callout,
   which appears extremily hard from pdfwrite.
   For now leaving it as it is (except a small improvement in (3)).
   We would like to generate Metrics, Metrics2 instead that.
   Note that a small part of this patch (the part (1)) is necessary
   for generating Metrics, Metrics2 for CIDFontTYpe 0.

EXPECTED DIFFERENCES :

Almost all differences are a single pixel glyph shift.

normal 72dpi :

"Altona.Page_3.2002-09-27.pdf"
"HeiseiMinStd.pdf"
"KozukaB-ILEmbed.pdf"
"Openhuis_pdf_zw.pdf"
"RodinCIDEmbed.pdf"

normal 300dpi :

"289-01.ps"
"Altona.Page_3.2002-09-27.pdf"
"Altona_Technical_1v1_x3.pdf"
"CIDembedded.pdf"
"HeiseiMinStd.pdf"
"KozukaB-ILEmbed.pdf"
"Openhuis_pdf_zw.pdf"
"RodinCIDEmbed.pdf"

pdfwrite 72dpi :

"Altona.Page_3.2002-09-27.pdf"
"HeiseiMinStd.pdf"
"KozukaB-ILEmbed.pdf"
"Openhuis_pdf_zw.pdf"
"RodinCIDEmbed.pdf"

pdfwrite 300dpi :

"CIDembedded.pdf"
"HeiseiMinStd.pdf"
"KozukaB-ILEmbed.pdf"
"Openhuis_pdf_zw.pdf"
"RodinCIDEmbed.pdf"</pre>
<p>[src/gdevpdtt.c 1.88, src/gdevpdtw.c 1.30, src/gsfont.c 1.34, src/gstype42.c 1.45, src/gxfcopy.c 1.47, src/gxfont.h 1.22, src/gxfont1.h 1.13, src/gxtype1.c 1.37, src/gxtype1.h 1.19, src/ichar1.h 1.11, src/icharout.h 1.10, src/zchar.c 1.15, src/zchar1.c 1.37, src/zcharout.c 1.13, src/zfcid0.c 1.23, src/zfcid1.c 1.20, src/zfont1.c 1.13, src/zfont42.c 1.21, lib/pdf_font.ps 1.68]</p>
</blockquote>

<p><strong><a name="2004-09-22_0037"></a>
2004-09-22 00:37 Dan Coby</strong></p>
<blockquote>
<pre>
Move the definition of gs_overprint_t from gsovrc.c to gsovrc.h.  This
makes this structure definition available to future devices which may
want to define their own overprint compositor.</pre>
<p>[src/gsovrc.c 1.8, src/gsovrc.h 1.4, src/lib.mak 1.197]</p>
</blockquote>

<p><strong><a name="2004-09-21_2230"></a>
2004-09-21 22:30 Dan Coby</strong></p>
<blockquote>
<pre>
Correct some gcc warnings.</pre>
<p>[src/gdevdevn.c 1.23, src/zcolor.c 1.20]</p>
</blockquote>

<p><strong><a name="2004-09-21_1000"></a>
2004-09-21 10:00 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix (pdfwrite) : Generate an error message when pdfmark points beyond the last page.

DETAILS :

Fixes the bug 687693 "A dangling reference from DOCVIEW pdfmark".
We want to return error code, but currently we don't due to
bug 687686 "Ghostscript creates bad xref from ADOBE1-4.pdf".

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gdevpdf.c 1.99, src/gdevpdfm.c 1.46, src/gdevpdfx.h 1.101]</p>
</blockquote>

<p><strong><a name="2004-09-20_2328"></a>
2004-09-20 23:28 Dan Coby</strong></p>
<blockquote>
<pre>
Partial fix for 687657 Text in transparency mask yields rangecheck in
discardtransparencymask.

DETAILS:

Three problems have been found with this file.

The rangecheck is actually a secondary effect.  The actual problem
was a typecheck in setrgbcolor.  However that error occurred inside
a stopped context.

1) The file has a mask group.  This group specifies a color space (CS).
The previous code set the current color space to the given value.
However the FillColorSpace and StrokeColorSpace were not set.  As a
result, a DeviceRGB color space was being used instead of the specified
DeviceGray color space.  This resulted in a mismatch in the number
of operands when the color as set (1 versus 3).  The fix consists of
setting both StrokeColorSpace and FillColorSpace when a mask group
contains a CS value.

2) The file uses scn for setting color values for a DeviceGray color
space.  FillColor and StrokeColor can contain wither a single numeric
value (which is common but not required for DeviceGray) or an array
of values for all other color spaces.  The scn and SCN operators were
always assuming that these values always contained arrays.  The fix
consists of checking for the non array cases in the operators.

3) The appearance produced by Ghostscript with the test file does not
match Adobe.  A solid magenta rectangle is produced by Ghostscript.
Adobe shows magenta text.  This problem is NOT fixed by this patch.
Note:  If the test file is opened with Illustrator CS and then saved,
Ghostscript does produced the same appearance as Adobe for the saved
file.  The reason for the differences are not currently known.  However
there are some more details in the bug report on this issue.</pre>
<p>[lib/pdf_draw.ps 1.86, lib/pdf_ops.ps 1.36]</p>
</blockquote>

<p><strong><a name="2004-09-20_2214"></a>
2004-09-20 22:14 Dan Coby</strong></p>
<blockquote>
<pre>
Fix for 687403 Poor halftoning for 16 color (4 bit) devices.

DETAILS:

This bug is a brother to bug 687390.  That bug was for 256
color (8 bit) devices.  Russell Lang suggested testing the 4 bit
devices and they were found to have problems caused by the same
logical error.  The halftoning logic assumes that all components
for a device have the same number of shades.  This was not true
for the implementations of the 4 and 8 bit color devices.
This fix converts the 16 color devices to using a 2x2x2 cube.

Note:  A possible future enhancement would be to convert these
devices to using a 4 level gray for shades of pure gray (R = G
= B).</pre>
<p>[src/gdevbmp.c 1.10, src/gdevdsp.c 1.29, src/gdevmgr.c 1.7, src/gdevmswn.c 1.12, src/gdevpccm.c 1.7, src/gdevpccm.h 1.8, src/gdevpcfb.c 1.6, src/gdevpcx.c 1.8, src/gdevpm.c 1.10, src/gdevpng.c 1.11]</p>
</blockquote>

<p><strong><a name="2004-09-20_2142"></a>
2004-09-20 21:42 Dan Coby</strong></p>
<blockquote>
<pre>
Fix for 687664 tiffsep sometimes producing apparently corrupt files
sometimes.

DETAILS:

The tiffsep device did not properly handle multiple page input files.
This change adds multiple page handling to the tiffsep device.  Most
of the various tiff related routines already properly handled multiple
pages so changes were only required inside the tiffsep device.

The changes consists of:

1.  Moving several variables which were local to tiffsep_print_page
into the tiffsep device structure and adding initialization.  These
variables provide state information to the general tiff handling
routines and the file pointers for the separation files.

2.  Add logic for determining if the output file name includes a
numeric format specification.  If so then we create individual separation
files for each page.  If not then we create a single file for each
separation.

3.  A device close procedure was added to ensure that the separation
files were closed.</pre>
<p>[src/gdevtsep.c 1.4]</p>
</blockquote>

<p><strong><a name="2004-09-20_1621"></a>
2004-09-20 16:21 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix (pdfwrite) : Could merge fonts with insufficient subrs.

DETAILS :

Bug 687675 "ps2pdf13 gives ERROR -15 closing the device"
happened due to an inaccurate computation of Subrs array inclusion.

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gxfcopy.c 1.46]</p>
</blockquote>

<p><strong><a name="2004-09-20_1306"></a>
2004-09-20 13:06 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix : Degenerate curves could cause a too big number of flattened curve segnments.

DETAILS :

Bug 687653 "-dNOTRANSPARENCY still allocates large buffers".
Actually the problem happens due to the bbox device
sets a high resolution, and degenerate curves with zero X or Y variation
use "the conservative method" in gx_curve_log2_samples.
With this change degenerate curves will render as line segments.

EXPECTED DIFFERENCES :

golfer.eps At 72dpi (a 2 pixels difference).</pre>
<p>[src/gxpcopy.c 1.23]</p>
</blockquote>

<p><strong><a name="2004-09-20_1050"></a>
2004-09-20 10:50 Russell Lang</strong></p>
<blockquote>
<pre>
Fixes bug #687690 MSVC6 warning in dwimg.c.</pre>
<p>[src/dwimg.c 1.16]</p>
</blockquote>

<p><strong><a name="2004-09-20_0959"></a>
2004-09-20 09:59 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix : vd_save caused a yntax error in a release build.

DETAILS :

See the comment added to vdtrace.h :
   /* NOTE :
  	    Use vd_save at end of the definition group of a  block,
  	    because in release build it compiles to the empty operator. */

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gxshade6.c 1.83, src/vdtrace.h 1.14]</p>
</blockquote>

<p><strong><a name="2004-09-20_0648"></a>
2004-09-20 06:48 Raph Levien</strong></p>
<blockquote>
<pre>
Changes bbox device forwarding logic so that get_page_device requests
are always forwarded to the target. Fixes bug #687421. Note: this change
backs out a change made to gdevnfwd.c between GS 4.70 and 4.80, with a
confusing explanation in the change notes. Changes to the page device
behavior in forwarding devices would not be surprising. See the code
review notes linked from the bug for more details.</pre>
<p>[src/gdevbbox.c 1.22, src/gdevnfwd.c 1.26, src/gsovrc.c 1.7]</p>
</blockquote>

<p><strong><a name="2004-09-20_0613"></a>
2004-09-20 06:13 Ray Johnston</strong></p>
<blockquote>
<pre>
Fix handling of CMaps to be able to handle large number of CMap entries
seen with some (Adobe) CMap files. Also fix name of a CMap file and
remove garbage at the end of one of our CMap files. Bug 687555.
Thanks to Alex Cherepanov for the changes to allow large CMaps.</pre>
<p>[Resource/CMap/Adobe-CNS1-ETen-B5 1.2, Resource/CMap/Adobe-CNS1-ETenms-B5 1.1, Resource/CMap/Adobe-Korea1-H-Mac 1.2, lib/gs_cmap.ps 1.18, src/zfcmap.c 1.16]</p>
</blockquote>

<p><strong><a name="2004-09-20_0019"></a>
2004-09-20 00:19 Jack Moffitt</strong></p>
<blockquote>
<pre>
Sets explicit umask for nightly regression run.  Fixes Bug #687648.</pre>
<p>[toolbin/tests/run_nightly 1.28]</p>
</blockquote>

<p><strong><a name="2004-09-19_2356"></a>
2004-09-19 23:56 Jack Moffitt</strong></p>
<blockquote>
<pre>
Fix support for filenames that include spaces.  Also add '.ai' as a PDF
type extension.</pre>
<p>[toolbin/tests/gstestgs.py 1.24]</p>
</blockquote>

<p><strong><a name="2004-09-19_2355"></a>
2004-09-19 23:55 Jack Moffitt</strong></p>
<blockquote>
<pre>
Fix a typo made by someone's previous commit.</pre>
<p>[toolbin/tests/gscheck_pdfwrite.py 1.23]</p>
</blockquote>

<p><strong><a name="2004-09-19_1705"></a>
2004-09-19 17:05 Jack Moffitt</strong></p>
<blockquote>
<pre>
Added new gsutil module for utility functions.  Changed all file extension
checks to use new gsutil.check_extension().  Added support for '.ai' as
a file extension.  This should fix the problem of several files in
comparefiles not making it into the nightly runs.</pre>
<p>[toolbin/tests/gscheck_pdfwrite.py 1.22, toolbin/tests/gscheck_raster.py 1.13, toolbin/tests/gsutil.py 1.1, toolbin/tests/make_testdb 1.13, toolbin/tests/revert_baseline 1.13, toolbin/tests/revert_pdfbaseline 1.11, toolbin/tests/update_baseline 1.14, toolbin/tests/update_pdfbaseline 1.10]</p>
</blockquote>

<p><strong><a name="2004-09-19_1632"></a>
2004-09-19 16:32 Jack Moffitt</strong></p>
<blockquote>
<pre>
Add log rotation for the Ghostscript stdout and stderr logs.  Fixes
Bug #687574.</pre>
<p>[toolbin/tests/run_nightly 1.27, toolbin/tests/testing.cfg.example 1.6]</p>
</blockquote>

<p><strong><a name="2004-09-18_2200"></a>
2004-09-18 22:00 Russell Lang</strong></p>
<blockquote>
<pre>
Fixes bug #687683 "gswin32c : Ctrl+C doesn't stop the application".
Make Ctrl+C in the image window act the same as Ctrl+C in the
console window, which generates a signal to exit the process.</pre>
<p>[src/dwimg.c 1.15]</p>
</blockquote>

<p><strong><a name="2004-09-17_0614"></a>
2004-09-17 06:14 Dan Coby</strong></p>
<blockquote>
<pre>
Fix for 687625 Incorrect spot color behavior in tiffsep.  Garbage
text was being printed for the spot color names.

DETAILS:

The problem was with the allocation and GC enumeration logic for the
storage for the storage for the spot color names.  Thus the problem
was only apparent after the GC relocation logic had executed.

The fix involves adding enumeration logic for the gs_param_string
structure and correcting the allocation of storage for the data.

Note:  The file src/gdevdevn.c was missed in the previous commit on
this topic.</pre>
<p>[src/gdevdevn.c 1.22]</p>
</blockquote>

<p><strong><a name="2004-09-17_0555"></a>
2004-09-17 05:55 Dan Coby</strong></p>
<blockquote>
<pre>
Fix for 687625 Incorrect spot color behavior in tiffsep.  Garbage
text was being printed for the spot color names.

DETAILS:

The problem was with the allocation and GC enumeration logic for the
storage for the storage for the spot color names.  Thus the problem
was only apparent after the GC relocation logic had executed.

The fix involves adding enumeration logic for the gs_param_string
structure and correcting the allocation of storage for the data.</pre>
<p>[src/gsparam.h 1.12]</p>
</blockquote>

<p><strong><a name="2004-09-17_0542"></a>
2004-09-17 05:42 Ralph Giles</strong></p>
<blockquote>
<pre>
Use PSOBJDIR as a staging area for the name-rewritten scripts at unix
install time. We previously used 'sed -i' to modify the installed file
in place, but this option is a recent extension and insufficiently
portable. The install script also isn't capable enough to accept files
through pipes, so we much have an intermediate staging area. PSOBJDIR
should be a safe place to write to for this purpose. Fix for 686863.</pre>
<p>[src/unixinst.mak 1.37]</p>
</blockquote>

<p><strong><a name="2004-09-16_1514"></a>
2004-09-16 15:14 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix (PDF interpreter) : Correctly handle different widths for same glyph.

DETAILS :

Bug 687672  "incorrect font rendering".

An Encoding may specify various character codes for same glyph, and
Widths may specify different widths for those codes.
Thus same glyph may be used with different widths.

This patch continues a long story about the handling of different widths for same glyph,
which includes my old hacks (pdf_font.ps Revision 1.22 and 1.26)
and Alex's change pdf_font.ps Revision 1.57 .
Alex defines new glyph names for same glyph to resolve the widths conflict.
After the Alex's change my old hacks appear low useful, and can be removed.

This patch
1. Removes the hacks;
2. Improves the Alex's change with the case when CharStrings has no referred glyph
   (debugged with 1_2001.pdf)
3. Improves the Alex's change with minimizing a number of newly generated names,
   because the test file of the bug 687672 maps many charcodes to .notdef with various widths.

Here is a list of bugs related to this change :

687672
623292
467492
517474
444366

EXPECTED DIFFERENCES :

None.</pre>
<p>[lib/pdf_font.ps 1.67, lib/pdf_ops.ps 1.35]</p>
</blockquote>

<p><strong><a name="2004-09-16_0803"></a>
2004-09-16 08:03 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix : A library context was not provided for bbox device.

DETAILS :

BBox device needs a library context for gs_next_id called from gx_image_enum_common_init.
It was not provided when the bbox device has no target.

We assume that the bbox device behavior doesn't depend on availability of a memory pointer -
likely it is so from reading the code.

Bug 687671 "epswriter it's not working at all."

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gdevbbox.c 1.21, src/gdevbbox.h 1.6, src/gdevvec.c 1.24, src/gslib.c 1.15, src/gximag3x.c 1.20]</p>
</blockquote>

<p><strong><a name="2004-09-16_0746"></a>
2004-09-16 07:46 Ralph Giles</strong></p>
<blockquote>
<pre>
Fix a typo in and earlier commit.</pre>
<p>[src/unixinst.mak 1.36]</p>
</blockquote>

<p><strong><a name="2004-09-16_0657"></a>
2004-09-16 06:57 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix : A syntax error in a recent patch.

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gdevbbox.c 1.20]</p>
</blockquote>

<p><strong><a name="2004-09-15_1941"></a>
2004-09-15 19:41 Ray Johnston</strong></p>
<blockquote>
<pre>
Remove trailing ^M on lines in several commits by alexcher.</pre>
<p>[src/dwimg.h 1.11, src/dwmain.c 1.21, src/dwmainc.c 1.24, src/dwtrace.h 1.7, src/gdevbbox.c 1.19, src/gdevwdib.c 1.9, src/gs.c 1.14, src/iscannum.c 1.10, src/stream.c 1.24, src/unistd_.h 1.12, src/zdevice.c 1.10]</p>
</blockquote>

<p><strong><a name="2004-09-15_1146"></a>
2004-09-15 11:46 Alex Cherepanov</strong></p>
<blockquote>
<pre>
Fix the problems reported by HP aC++/C compiler but unrelated to the crash.
Partial fix for 687643

[DETAILS]
gs.c, int.mak - include the prototype of gs_malloc_init()
ttfmain.c - fix partly initialized FixMatrix m;
gdevpsd.c - allocate 4 elements for CMYK, not 3</pre>
<p>[src/gdevpsd.c 1.17, src/gs.c 1.13, src/int.mak 1.130, src/ttfmain.c 1.28]</p>
</blockquote>

<p><strong><a name="2004-09-15_0759"></a>
2004-09-15 07:59 Igor Melichev</strong></p>
<blockquote>
<pre>
A new implementation of shadings, step 87.

DETAILS :

Contrary to PLRM3 page 689, Background was not ignored with shfill.
Adding gs_pattern2_instance_s::shfill for that.
Bug 687673 "Axial shadings differ from Adobe".

EXPECTED DIFFERENCES :

Background isn't painted with 'shfill' (a progression) :
"464-01.ps"
"483-01.ps"
"483-05-fixed.ps"</pre>
<p>[src/gscolor3.c 1.9, src/gsptype2.c 1.15, src/gsptype2.h 1.10, src/lib.mak 1.196]</p>
</blockquote>

<p><strong><a name="2004-09-15_0721"></a>
2004-09-15 07:21 Igor Melichev</strong></p>
<blockquote>
<pre>
A new implementation of shadings, step 86.

DETAILS :

1. Implemented gx_shade_background with a compatible INTERPATCH_PADDING logic
   for filling a background.
2. The clipping logic in gdevdsha.c must be "any ppart of pixel inside",
   as it is in other places.
3. Dont need adjust_swapped_boundary for clipping rectangles (gxshade6.c).
4. INTERPATCH_PADDING is enlarged to half pixel. See comment in code.
5. Optimized with a better clipping in gx_shade_trapezoid.

Completes the fix for 687585 "A shading renders narrower than its background".

EXPECTED DIFFERENCES :

Shadings render slightly different :

"442-01.ps"
"446-01-fixed.ps"
"464-01.ps"
"478-01.ps"
"483-01.ps"
"483-05-fixed.ps"
"Altona-Testsuite_p2_S_x3.pdf"
"BEST8-99-Path.fh7.pdf"
"chilis_black.pdf"
"chilis_red.pdf"
"Clarke Tate Manns Chinese.ai"
"gradmesh.ai"
"Openhuis_pdf_zw.pdf"
"S2_Digitalproof-Forum_x3k.pdf"
"self-intersect2.ps"
"shading_prob_800.ps"
"SmoothShading.pdf"
"STEUER-RollingMesh 1(linear).ai"
"STEUER-RollingMesh 2(radial).ai"
"STEUER-RollingMesh 3(Final).ai"
"Testform.v1.0.2.pdf"</pre>
<p>[src/gdevdsha.c 1.11, src/gsshade.c 1.12, src/gxshade4.h 1.37, src/gxshade6.c 1.82]</p>
</blockquote>

<p><strong><a name="2004-09-14_2138"></a>
2004-09-14 21:38 Russell Lang</strong></p>
<blockquote>
<pre>
Add custom page size to PostScript Printer Description file.</pre>
<p>[lib/ghostpdf.ppd 1.2]</p>
</blockquote>

<p><strong><a name="2004-09-14_0645"></a>
2004-09-14 06:45 Russell Lang</strong></p>
<blockquote>
<pre>
Fixes bug 687542 Print with pswrite gives 'Could not open the
file \\spool\yourprinter'. Add a %printer% IODevice for OS/2,
which opens to a temporary file then later copies it to the
print spooler.  This will need "%printer%yourprinter",
not "\\spool\yourprinter".
This is needed to make pswrite write to a printer queue.</pre>
<p>[doc/Develop.htm 1.139, src/gp_os2.c 1.31, src/gp_os2.h 1.1, src/gp_os2pr.c 1.1, src/os2.mak 1.38]</p>
</blockquote>

<p><strong><a name="2004-09-14_0642"></a>
2004-09-14 06:42 Russell Lang</strong></p>
<blockquote>
<pre>
Add support for 4-bit/pixel CMYK to the display device clients for
Windows and gtk+.</pre>
<p>[src/dwimg.c 1.14, src/dxmain.c 1.15, src/gdevdsp.c 1.28]</p>
</blockquote>

<p><strong><a name="2004-09-13_2232"></a>
2004-09-13 22:32 Ray Johnston</strong></p>
<blockquote>
<pre>
Ignore MediaPosition when selecting a media type. Adobe CPSI does it this
way, and the PLRM suggests that this is advisory only. Bug 687547 for
customer 780.

DETAILS:

Adobe CPSI also ignores this parameter without generating any error or
warning. The PLRM says:

  This parameter does not override the normal media selection process
  described in the text, but if specified it will be honored--provided it can
  satisfy the input media request in a manner consistent with normal media
  selection--even if the media source it specifies is not the best available
  match for the requested attributes.

Since an input PS file is unlikely to have a PPD that accurately reflects
the 'slot' numbers of our InputAttributes dictionary, we also ignore this
option and instead give the 'best fit' based on size and orientation (and
other parameters that may exist).</pre>
<p>[lib/gs_setpd.ps 1.25]</p>
</blockquote>

<p><strong><a name="2004-09-13_2208"></a>
2004-09-13 22:08 Ray Johnston</strong></p>
<blockquote>
<pre>
Handle CS/cs PDF operators that have a colorspace array as an operand
instead of a name as the specification requires (yet another broken PDF
that Acrobat Reader handles without complaint). Issue pdfformaterror when
bad CS operands are seen. Bug 687610 for customer 770.</pre>
<p>[lib/pdf_draw.ps 1.85]</p>
</blockquote>

<p><strong><a name="2004-09-13_1832"></a>
2004-09-13 18:32 Igor Melichev</strong></p>
<blockquote>
<pre>
A new implementation of shadings, step 85.

DETAILS :

Propagate error codes from shade_bbox_transform2fixed.

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gxshade1.c 1.33, src/gxshade4.c 1.27, src/gxshade4.h 1.36, src/gxshade6.c 1.81]</p>
</blockquote>

<p><strong><a name="2004-09-13_1601"></a>
2004-09-13 16:01 Igor Melichev</strong></p>
<blockquote>
<pre>
A new implementation of shadings, step 84.

DETAILS :

Fixed a Cygwin/gcc warning.

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gsshade.c 1.11]</p>
</blockquote>

<p><strong><a name="2004-09-13_1552"></a>
2004-09-13 15:52 Igor Melichev</strong></p>
<blockquote>
<pre>
A new implementation of shadings, step 83.

DETAILS :

This is a partial fix for the bug
687585 "A shading renders narrower than its background".
It fixes various secondary problems :

1. gx_default_fill_linear_color_scanline could miss pixels at the end of the scanline
   (bug 687585 "A shading renders narrower than its background", the right boundary).

2. decompose_linear_color could miss pixels when swapping axes of the clip rectangle.
   (bug 687585 "A shading renders narrower than its background", the top boundary).
   Defined adjust_swapped_boundary and applied for this purpose.

3. mesh_padding cauld miss pixels  when swapping axes of the padding.
   Defined adjust_swapped_boundary and applied for this purpose.

4. Moved the fill adjustment from gx_dc_pattern2_fill_path to gsshade.c
   and disabled it in the NEW_SHADINGS build, because NEW_SHADINGS build never
   needs it. Instead that it applies mesh_padding.
   The new function gx_dc_pattern2_fill_path_adjusted access the new functionality
   from outside gsshade6.c .
   Also renamed gx_dc_pattern2_fill_path_adjusted with gx_dc_pattern2_fill_path
   for a better reflection of its new purpose.

5. Implemented VD_TRACE_DOWN in try_device_linear_color.
   The old code did a misleading drawing.

6. Fixed a conflict of the 's' flag in the -T argument.
   Changed the documentation to reflect that.

EXPECTED DIFFERENCES :

Shading render slightly different :

72 dpi :
"446-01-fixed.ps"
"483-01.ps"
"483-05-fixed.ps"
"chilis_black.pdf"
"Clarke Tate Manns Chinese.ai"
"gradmesh.ai"
"Openhuis_pdf_zw.pdf"  (a strong progression)
"SmoothShading.pdf"
"STEUER-RollingMesh 3(Final).ai"

300dpi :

"442-01.ps"
"446-01-fixed.ps"
"464-01.ps"
"483-01.ps"
"483-05-fixed.ps"
"BEST8-99-Path.fh7.pdf"  (a strong progression)
"chilis_black.pdf"
"Clarke Tate Manns Chinese.ai"
"gradmesh.ai"
"Openhuis_pdf_zw.pdf"
"S2_Digitalproof-Forum_x3k.pdf"
"SmoothShading.pdf"
"STEUER-RollingMesh 1(linear).ai"
"STEUER-RollingMesh 2(radial).ai"
"STEUER-RollingMesh 3(Final).ai" (a strong progression)</pre>
<p>[src/gdevdsha.c 1.10, doc/Use.htm 1.114, src/gsptype2.c 1.14, src/gsptype2.h 1.9, src/gsshade.c 1.10, src/gsshade.h 1.8, src/gxfill.c 1.119, src/gxshade6.c 1.80, src/gxstroke.c 1.12, src/lib.mak 1.195]</p>
</blockquote>

<p><strong><a name="2004-09-13_0713"></a>
2004-09-13 07:13 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix : Improve the error reporting about a dangling resource map record.

DETAILS :

When a resource map record pointed to an undefined resource,
it printed "undefinedresource in GetSize". With this inprovement
it prints the substituted resource name instead GetSize.

EXPECTED DIFFERENCES :

None.</pre>
<p>[lib/gs_cidfm.ps 1.6]</p>
</blockquote>

<p><strong><a name="2004-09-12_1912"></a>
2004-09-12 19:12 Igor Melichev</strong></p>
<blockquote>
<pre>
A new implementation of shadings, step 82.

DETAILS :

The preceeding patch was incorrect in the point (1)
"constant_color_quadrangle painted a triangle when the quadrangle is degenerate.".
There exist cases when quadrangle degenerates to a triangle, and
the patched code skipped it. This putch fixes that.

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gxshade6.c 1.79]</p>
</blockquote>

<p><strong><a name="2004-09-09_2101"></a>
2004-09-09 21:01 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix : Type 3 charproc must inherit flattnes from the text context.

DETAILS :

Bug 687582 "Flatness in a Type 3 font".
The feature has been tested with Adobe CPSI.

EXPECTED DIFFERENCES :

"012-09.ps"
"013-09.ps"
"014-09.ps"
"015-09.ps"
"020-01.ps"
"027-05.ps"
"032-07.ps"
"045-01.ps"
"083-09.ps"
"093-01.ps"
"103-01.ps"
"118-01.ps"
"136-01.ps"
"165-01.ps"
"192-01.ps"
"205-09.ps"
"231-01.ps"
"233-01.ps"
"238-01.ps"
"251-01.ps"
"281-01.ps"
"289-01.ps"
"298-09.ps"
"308-04.ps"
"311-03.ps"
"321-09.ps"
"409-01.ps"
"a.pdf"
"Altona.Page_3.2002-09-27.pdf"
"Altona_Technical_1v1_x3.pdf"
"Bug687207.ps"
"Type3stringwidth.ps"</pre>
<p>[src/gxpaint.c 1.5, src/lib.mak 1.194]</p>
</blockquote>

<p><strong><a name="2004-09-09_2052"></a>
2004-09-09 20:52 Ray Johnston</strong></p>
<blockquote>
<pre>
Fixes for security problems not fixed in previous commit and fixes for
other problems identified by SaGS in bug report -- detecting recursion,
allowing r/w strings in procedures (but not in PermitFile arrays).
Bug 687559.</pre>
<p>[lib/gs_lev2.ps 1.35]</p>
</blockquote>

<p><strong><a name="2004-09-09_1747"></a>
2004-09-09 17:47 Igor Melichev</strong></p>
<blockquote>
<pre>
A new implementation of shadings, step 81.

DETAILS :

1. constant_color_quadrangle painted a triangle when the quadrangle is degenerate.
2. rangecheck happened if the path lies entirely within an Extend area of an axial shading.
3. Due to a poor precision of t0, t1, Extend areas were painted when they have a zero width.
Bug 687646  <pdfwrite : A strange shading in "Clarke Tate Manns Chinese.ai" >.

EXPECTED DIFFERENCES :

"442-01.ps"
"chilis_black.pdf"
"chilis_red.pdf"
"Clarke Tate Manns Chinese.ai"</pre>
<p>[src/gxshade1.c 1.32, src/gxshade6.c 1.78]</p>
</blockquote>

<p><strong><a name="2004-09-09_1244"></a>
2004-09-09 12:44 Igor Melichev</strong></p>
<blockquote>
<pre>
fuzzy.c : Improving the return codes.

DETAILS:

Return 2 on "out of window",
return 1 with a difference within the window,
return 0 otherwize (files equal).</pre>
<p>[toolbin/tests/fuzzy.c 1.16]</p>
</blockquote>

<p><strong><a name="2004-09-09_1133"></a>
2004-09-09 11:33 Igor Melichev</strong></p>
<blockquote>
<pre>
(pdfwrite) : Implementing a dynamic recongnition for Type 3 charproc variations (continued 7).

DETAILS :

A flag to be reset when going to the next character.
Bug 687660 "incorrect font rendering/missing glyphs from ps2pdf"

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gdevpdte.c 1.61]</p>
</blockquote>

<p><strong><a name="2004-09-09_1124"></a>
2004-09-09 11:24 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix (Type 1 hinter) : A further improvement of the glyph rendering quality, step 2.

DETAILS :

Switch on the new code in gxhintn.h, gxhintn.c .
See the preceeding log message about the configuration flags :
http://www.ghostscript.com/pipermail/gs-cvs/2004-September/004792.html .
Fixes bugs
687578 "T1 hinter disturbs stem width"
687579 "Type 1 hinter disturbs glyph height"
687588  "A CJK TT rendering worse"

EXPECTED DIFFERENCES :

A massive glyph rendering difference :
about 50% of files at 72dpi, and about 95% of files at 300dpi.</pre>
<p>[src/gxhintn.h 1.22]</p>
</blockquote>

<p><strong><a name="2004-09-08_1013"></a>
2004-09-08 10:13 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix (Type 1 hinter) : A further improvement of the glyph rendering quality, step 1.

DETAILS :

This change is algorithmically equivalent,
because new code is disabled wirth configuration switches
listed below.

1. FINE_STEM_COMPLEXES
   1.1. Stem complex could miss a common boundary.
   1.2. Stem width could be distorsed due to a common boundary missing
        (Bug 687578 "T1 hinter disturbs stem width".).
   1.3. Overall hint (if presents) should have a bigger priority.
2. ALIGN_BY_STEM_MIDDLE
   2.1. A stem middle could be shifted too much due to
        independent grid-fitting of boundaries and the change 1.2 -
        see 'i' in ccc-.pdf attached to Bug 687578.
        Fixed with an improved alignment with t1_hinter__align_stem_to_grid.
   2.2. This isn't applicable for top|bottom zones from the TT stem recognizer,
        because we want to force outer boundaries to keep the glyph height.
   2.3. 033-52-5873.pdf defines "pseodo-stem" hints,
        which have only one boundary corresponding to real poles.
        recognize them with t1_hinter__mark_existing_stems,
        and don't apply the improved alignment,
        because those stems designate outer glyph boundaries,
        which we want to force the uniform glyph height.
        Apparently fixes Bug 687579 "Type 1 hinter disturbs glyph height".
3. OPPOSITE_STEM_COORD_BUG_FIX
   Aligning a stem width, the resolutions by X and Y were exchenged.
4. TT_AUTOHINT_TOPZONE_BUG_FIX
   topzone and botzone were mixed when come from the TT stem recognizer.

Also improved general comments in gxhintn.c .

EXPECTED DIFFERENCES :

None (the new code disabled).</pre>
<p>[src/gxhintn.c 1.51, src/gxhintn.h 1.21]</p>
</blockquote>

<p><strong><a name="2004-09-08_0936"></a>
2004-09-08 09:36 Igor Melichev</strong></p>
<blockquote>
<pre>
fuzzy.c : Improving the report message.

DETAILS:

Print report message if any difference found.
Before now it was printed only if out of window.
Return error code only if out of window,
as it was before.</pre>
<p>[toolbin/tests/fuzzy.c 1.15]</p>
</blockquote>

<p><strong><a name="2004-09-08_0700"></a>
2004-09-08 07:00 Ralph Giles</strong></p>
<blockquote>
<pre>
Translate the name of the gs executable stored in the utility scripts at
install-time on unix. Closes bug 686863.

DETAILS:

The autoconf build supports a --with-gs=<name> option for setting the
name of the Ghostscript executable, which is stored in the makefiles as
'$(GS)', but scripts such at ps2pdf that expect to make invoke
Ghostscript made no use of this variable, causing version skew at best,
complete failure of that popular utility at worst. We therefore now
rewrite the hard-coded name each time we install the utility scripts.</pre>
<p>[src/unixinst.mak 1.35]</p>
</blockquote>

<p><strong><a name="2004-09-08_0628"></a>
2004-09-08 06:28 Ralph Giles</strong></p>
<blockquote>
<pre>
Propagate autotools build system changes from the GS_8_1X branch. Use
the proper macro for the 'rm' function, and a more specific test for
locating the local libpng library source.</pre>
<p>[src/Makefile.in 1.38, src/configure.ac 1.48]</p>
</blockquote>

<p><strong><a name="2004-09-06_2123"></a>
2004-09-06 21:23 Ray Johnston</strong></p>
<blockquote>
<pre>
Change regression test flags to use new JOBSERVER flag. Older flags are
retained to allow older regression testing to still use this module.</pre>
<p>[toolbin/tests/gstestgs.py 1.23]</p>
</blockquote>

<p><strong><a name="2004-09-06_0726"></a>
2004-09-06 07:26 Ray Johnston</strong></p>
<blockquote>
<pre>
Add some job server related support. The -dJOBSERVER option defines the
^D to start a new encapsulated job, and the ^D is changed to be a self-
delimitting token in the scanner. Fixes 687079.

DETAILS:

For backward compatibility, -dNOOUTERSAVE is retained, but this does
*NOT* define the ^D to start a new encapsulated job. As specified in the
updates to doc/Use.htm, in order to avoid an /invalidrestore error,
the input should be from stdin otherwise the restore done as part of the
new job encapsulation (restore returns to the server state) will encounter
a file object that was created after the encapsulation save.

This allows 289-01.ps to complete IFF the -dJOBSERVER option is used
during regression testing. Thus the only (eventual) regression change
will be:

289-01.ps</pre>
<p>[doc/Use.htm 1.113, lib/gs_init.ps 1.111, lib/gs_lev2.ps 1.34, src/scantab.c 1.5]</p>
</blockquote>

<p><strong><a name="2004-09-03_2023"></a>
2004-09-03 20:23 Ray Johnston</strong></p>
<blockquote>
<pre>
Add missing memory argument in 'I' interp debug printing. Also remove
local prototype for debug_print_ref in favor of using idebug.h. Fixes
SEGV when using -ZI or (I) true .setdebug.</pre>
<p>[src/int.mak 1.129, src/interp.c 1.20]</p>
</blockquote>

<p><strong><a name="2004-09-02_2149"></a>
2004-09-02 21:49 Ralph Giles</strong></p>
<blockquote>
<pre>
Use the MTIME define from the stat module rather than a numerical index
to specify the modification time in python. Propagates a similar change
from gscheck_raster.py.</pre>
<p>[toolbin/tests/gscheck_pdfwrite.py 1.21]</p>
</blockquote>

<p><strong><a name="2004-09-02_2130"></a>
2004-09-02 21:30 Ralph Giles</strong></p>
<blockquote>
<pre>
Propagate memory pointer gs_malloc() changes to the optional lj3100sw
device. Patch from Harald Koenig. Closes bug 687636.</pre>
<p>[src/gdevl31s.c 1.5]</p>
</blockquote>

<p><strong><a name="2004-09-02_0826"></a>
2004-09-02 08:26 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix : Unwind an unintentional change to setup_image_compression.

DETAILS :

I guess that gdevpsdi.c revision 1.30 was unintentionally modified with the patch
http://www.ghostscript.com/pipermail/gs-cvs/2004-August/004681.html

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gdevpsdi.c 1.31]</p>
</blockquote>

<p><strong><a name="2004-08-31_2207"></a>
2004-08-31 22:07 Dan Coby</strong></p>
<blockquote>
<pre>
Fix for 687640 Unable to set default halftones for PDF.

DETAILS:

To support both PS level 1 and PS level 2 interpreting modes,
Ghostscript defines two routines for setting a default halftone.
PS level 1 does not support resources.  Thus for PS 1 we have
.setdefaultscreen which sets a default halftone which is defined
inside of gs_init.ps.  For PS 2, we have .setdefaulthalftone
which is similar to .setdefaultscreen except that it also checks
for a default halftone resource.

The PDF interpreter's handler for the /HT gstate parameter
called .setdefaultscreen if the parameter value was /Default.
This fix changes the handler to use .setdefaulthalftone instead.
This results in the PDF interpreter using the default halftone
resource if it is present.</pre>
<p>[lib/pdf_draw.ps 1.84]</p>
</blockquote>

<p><strong><a name="2004-08-31_2036"></a>
2004-08-31 20:36 Ray Johnston</strong></p>
<blockquote>
<pre>
Fix ResourceForAll Category procedure to make sure that the path given
by GenericResourceDir systemparam is included in the enumeration.
Bug 687641.</pre>
<p>[lib/gs_res.ps 1.37]</p>
</blockquote>

<p><strong><a name="2004-08-31_2005"></a>
2004-08-31 20:05 Ralph Giles</strong></p>
<blockquote>
<pre>
Bump version after the 8.31 beta release.</pre>
<p>[doc/News.htm 1.151, lib/gs_init.ps 1.110, src/gscdef.c 1.46, src/version.mak 1.73]</p>
</blockquote>

<p><strong><a name="2004-08-31_1923"></a>
2004-08-31 19:23 Alex Cherepanov</strong></p>
<blockquote>
<pre>
Trap C stack overflow exception on Borland C and MSVC. Without the
trap the application silently terminates when C stack overflows.
Fix bug 687461

[DETAILS]
Watcom C 1.2 doesn't need the trap. It is also the only compiler tested
that converts trailing recursion to iteration. GCC 3.2 on Windows still
generates programs that fail silently but I don't know how to fix this.
GCC 2.95 on Linux reports the stack overflow.</pre>
<p>[src/dwmain.c 1.20, src/dwmainc.c 1.23, src/windows_.h 1.7, src/winint.mak 1.22]</p>
</blockquote>

<p><strong><a name="2004-08-31_1349"></a>
2004-08-31 13:49 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix : Arcs were imprecise (continued).

DETAILS :

A previous patch had a minor portability defect :
PRECISE_CURRENTPOINT was used before defined.

EXPECTED DIFFERENCES :

None.</pre>
<p>[src/gxmatrix.h 1.10]</p>
</blockquote>

<p><strong><a name="2004-08-31_1323"></a>
2004-08-31 13:23 Igor Melichev</strong></p>
<blockquote>
<pre>
Fix : Arcs were imprecise.

DETAILS :

Bug 687584 "An extra element painting a circle.".

The problem happened due to the PRECISE_CURRENTPOINT patch
http://www.ghostscript.com/pipermail/gs-cvs/2004-March/004333.html
appears incomplete : arcs were not improved.
This patch fixes that.

1. Applied gs_point_transform2fixed_rounding in arc_add
to be consistent with the precise current point.

2. Renamed float2fixed_rounding with float2fixed_rounded
and made it global.

3. Moved the definition of PRECISE_CURRENTPOINT
to the appropriate scope.

We leave many places in code, in which
the unrounded transform is still applied,
but those places do not deal with the current point.

EXPECTED DIFFERENCES :

Massive difference with acrs :

normal, 72 dpi :
"012-01.ps"
"012-05.ps"
"012-09.ps"
"012-13.ps"
"013-01.ps"
"013-05.ps"
"013-09.ps"
"013-13.ps"
"014-01.ps"
"014-05.ps"
"014-09.ps"
"014-13.ps"
"015-01.ps"
"015-05.ps"
"015-09.ps"
"027-05.ps"
"031-01.ps"
"032-01.ps"
"032-07.ps"
"034-01.ps"
"034-10.ps"
"035-07.ps"
"103-01.ps"
"123-01.ps"
"123-05.ps"
"123-09.ps"
"148-16.ps"
"149-05.ps"
"150-01.ps"
"154-01.ps"
"158-01.ps"
"192-01.ps"
"237-01.ps"
"244-01.ps"
"289-01.ps"
"298-09.ps"
"308-04.ps"
"311-03.ps"
"321-09.ps"
"Bug687207.ps"
"vasarely.ps"

normal 300 dpi :

"213-01.ps"
"214-01.ps"
"244-01.ps"
"245-07.ps"
"245-13.ps"
"245-17.ps"
"258-01.ps"
"270-01.ps"
"289-01.ps"
"014-01.ps"
"014-01.ps"
"014-13.ps"
"012-01.ps"
"012-05.ps"
"012-09.ps"
"012-13.ps"
"013-01.ps"
"013-05.ps"
"013-09.ps"
"013-13.ps"
"014-01.ps"
"014-05.ps"
"014-09.ps"
"014-13.ps"
"015-01.ps"
"015-05.ps"
"015-09.ps"
"027-05.ps"
"031-01.ps"
"032-01.ps"
"034-01.ps"
"034-10.ps"
"035-07.ps"
"103-01.ps"
"123-01.ps"
"123-05.ps"
"123-09.ps"
"148-16.ps"
"149-05.ps"
"150-01.ps"
"154-01.ps"
"158-01.ps"
"192-01.ps"
"237-01.ps"
"244-01.ps"
"298-09.ps"
"308-04.ps"
"311-03.ps"
"321-09.ps"
"Bug687207.ps"
"vasarely.ps"

pdfwrite, 72 dpi :

"012-01.ps"
"012-13.ps"
"013-01.ps"
"013-05.ps"
"013-09.ps"
"013-13.ps"
"014-01.ps"
"014-05.ps"
"014-13.ps"
"015-01.ps"
"015-05.ps"
"032-01.ps"
"034-10.ps"
"123-01.ps"
"123-05.ps"
"192-01.ps"
"298-09.ps"
"321-09.ps"
"vasarely.ps"

pdfwrite 300 dpi :

"012-01.ps"
"012-05.ps"
"012-09.ps"
"012-13.ps"
"013-01.ps"
"013-05.ps"
"013-09.ps"
"013-13.ps"
"014-01.ps"
"014-05.ps"
"014-09.ps"
"014-13.ps"
"015-01.ps"
"015-05.ps"
"015-09.ps"
"027-05.ps"
"032-01.ps"
"032-07.ps"
"034-01.ps"
"034-10.ps"
"109-01.ps"
"123-01.ps"
"123-05.ps"
"123-09.ps"
"192-01.ps"
"220-01.ps"
"237-01.ps"
"245-17.ps"
"251-01.ps"
"255-01.ps"
"258-01.ps"
"269-01.ps"
"270-01.ps"
"298-09.ps"
"308-04.ps"
"321-09.ps"
"442-01.ps"
"446-01.ps"
"Bug687207.ps"
"vasarely.ps"</pre>
<p>[src/gsmatrix.c 1.8, src/gspath.c 1.10, src/gspath1.c 1.10, src/gxfixed.h 1.9, src/gxmatrix.h 1.9, src/gxstate.h 1.11]</p>
</blockquote>

<p><strong><a name="2004-08-31_0907"></a>
2004-08-31 09:07 Igor Melichev</strong></p>
<blockquote>
<pre>
Implementing Visual Trace for 'stroke'.

DETAILS :

It is necessary for analyzing the Bug 687584,
and it is useful in general.

EXPECTED DIFFERENCES :

None.</pre>
<p>[doc/Use.htm 1.112, src/gxfill.c 1.118, src/gxstroke.c 1.11, src/lib.mak 1.193, src/vdtrace.h 1.13]</p>
</blockquote>

<p><strong><a name="2004-08-30_2145"></a>
2004-08-30 21:45 Dan Coby</strong></p>
<blockquote>
<pre>
Fix for 687607   Text missing with TextALphaBits=2 and tiffsep device.

DETAILS:

The TextAlphaBits and GraphicsAlphaBits device parameters were not working
for devices with a depth of more than 32 bits.  The fix involves replacing
the copy_alpha device procs in the 40, 48, 56, and 64 bit memory devices
with the gx_default_copy_alpha routine.  These devices previously had a
copy_alpha routine which did nothing.  This was a mistake from when these
devices were created as part of the DeviceN work.</pre>
<p>[src/gdevm40.c 1.2, src/gdevm48.c 1.2, src/gdevm56.c 1.3, src/gdevm64.c 1.3]</p>
</blockquote>

<p><strong><a name="2004-08-30_1645"></a>
2004-08-30 16:45 Ray Johnston</strong></p>
<blockquote>
<pre>
Fix for security problems with user parameters, in particular the
/PermitFileReading array. Also corrects handling of parameter arrays
that contain a 'mark'. Fixes bug 687559. Thanks to mat. Gh. Savulescu
(SaGS) for the bug report and for a suggested patch.</pre>
<p>[lib/gs_lev2.ps 1.33]</p>
</blockquote>
</body>
</html>
