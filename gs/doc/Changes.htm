<html><head>
<title>Ghostscript 6.20 change history as of 2000-03-19 09:36:09</title>
</head><body>

<blockquote><ul>
<li><a href="#6.20 Documentation">Documentation</a>,
    <a href="#6.20 Procedures">Procedures</a>,
    <a href="#6.20 Utilities">Utilities</a>,
    <a href="#6.20 Interpreter (PDF)">Interpreter (PDF)</a>,
    <a href="#6.20 Interpreter">Interpreter</a>,
    <a href="#6.20 Streams">Streams</a>,
    <a href="#6.20 Library">Library</a>,
    <a href="#6.20 ???Other???">???Other???</a>
</ul>
</ul></blockquote>

<h2><a name="6.20 Documentation"></a>Documentation</h2><pre>

Fixes problems:
	- If log2_transfer_map_size > 8, identity transfer functions
returned garbage. The fix requires that if a client wants to set a transfer
function to the identity mapping, it must call gx_set_identity_transfer
rather than simply setting the procedure to gs_identity_transfer.
(doc/News.htm [1.13]: 2000/03/19 17:14:47 lpd)

Undoes an accidental RCS ID substitution in what was supposed to be literal
text. (doc/Htmstyle.htm [1.2]: 2000/03/18 22:29:03 lpd)

Increments the version number to 6.20, in anticipation of the next release.
(We do this at the beginning of the development for a release, not the end.)
(doc/History6.htm [1.4], doc/News.htm [1.6]: 2000/03/19 00:27:22 lpd)

Splits out the [T]BCP filter interface into a separate file.
(doc/News.htm [1.7]: 2000/03/19 02:40:18 lpd)

Documents the fact that ImageType 4 images now cause an error for
out-of-range MaskColor values. (doc/News.htm [1.8]: 2000/03/19 04:32:09 lpd)

Updates the change log with recent changes. (doc/Changes.htm [1.4]:
2000/03/19 05:39:58 lpd)

Adds a new document listing projects with which we are seeking help. Also
makes the description of Changes.htm and News.htm more accurate.
(doc/New-user.htm [1.2], doc/Projects.htm [1.1], doc/Readme.htm [1.3]:
2000/03/19 06:07:15 lpd)

Changes the default value of BufferSpace to 4 Mb. In desktop applications,
this is a reasonable value that can substantially improve performance
(especially for color printers); embedded applications will want to set
BufferSpace themselves in any case. (doc/News.htm [1.9]: 2000/03/19 06:51:13
lpd)

Changes the key type returned by parameter list enumeration to include a
persistence flag, makes C parameter lists support non-persistent keys, and
upgrades GC descriptors so that parameter lists can be used non-transiently;
updates implementors of parameter lists to call gs_param_list_init to
initialize the common members, which is now required. (doc/News.htm [1.10]:
2000/03/19 15:16:11 lpd)

Documents the fact that drivers that device halftone order implementations
must now provide the new bit_index procedure. (This should have been
documented when bit_index was introduced!) (doc/News.htm [1.11]: 2000/03/19
15:47:47 lpd)

Makes st_indexed_map private. Clients must now use the constructor procedure
alloc_indexed_map rather than allocating instances directly.
(doc/News.htm [1.12]: 2000/03/19 16:37:28 lpd)

</pre><h2><a name="6.20 Procedures"></a>Procedures</h2><pre>

Fixes problems:
	- pdfread.dev incorrectly depended on dpsnext_. (int.mak [1.4]:
2000/03/19 02:00:09 lpd)

Increments the version number to 6.20, in anticipation of the next release.
(We do this at the beginning of the development for a release, not the end.)
(version.mak [1.6]: 2000/03/19 00:27:22 lpd)

Adds a pseudo-encoding for the CFF StandardStrings that represent
characters. (devs.mak [1.3], int.mak [1.3], unixinst.mak [1.5]: 2000/03/19
00:38:50 lpd)

Updates makefiles with dependencies for recent changes. (int.mak [1.5],
lib.mak [1.3]: 2000/03/19 05:37:38 lpd)

Adds dependencies for the new implementation of FunctionType 4 functions.
(int.mak [1.6]: 2000/03/19 07:03:53 lpd)

Splits off "vanilla" Functions into separate files, in anticipation of
removing them (they were only used to implement PostScript Calculator
Functions). (lib.mak [1.4]: 2000/03/19 07:33:08 lpd)

</pre><h2><a name="6.20 Utilities"></a>Utilities</h2><pre>

Makes geninit remove whitespace adjacent to hex and base-85 string literals.
(geninit.c [1.2]: 2000/03/18 22:51:24 lpd)

</pre><h2><a name="6.20 Interpreter (PDF)"></a>Interpreter (PDF)</h2><pre>

Fixes problems:
	- Reading embedded compressed CIDFonts wasn't implemented.
(lib/pdf_font.ps [1.3]: 2000/03/19 01:28:59 lpd)
	- PDF images with DeviceN color spaces caused an error.
(lib/pdf_draw.ps [1.2]: 2000/03/19 01:44:53 lpd)
	- PDF images with a Mask ignored the mask. (lib/pdf_draw.ps [1.3]:
2000/03/19 01:46:27 lpd)
	- the PDF interpreter hadn't been updated for the move to
library-based FunctionType 4 Functions, and still tried to bind the names
true and false to the no longer existing operators .true and .false.
(lib/pdf_draw.ps [1.5]: 2000/03/19 07:37:03 lpd)
	- FunctionType 2 and 3 functions didn't work.
(lib/pdf_draw.ps [1.6]: 2000/03/19 15:23:10 lpd)

Adds a lforall procedure for the PDF linearizer. (lib/pdf_base.ps [1.3]:
2000/03/19 01:50:05 lpd)

Changes the PDF interpreter so that following an object reference doesn't
store the result back into the referring slot, and so that # # R always
creates an indirect object. This is necessary for the PDF linearizer. It
shouldn't have any visible effect (other than a possible small performance
cost). (lib/pdf_base.ps [1.4], lib/pdf_draw.ps [1.4]: 2000/03/19 01:53:58
lpd)

Refactors some code to make it usable by the PDF linearizer.
(lib/pdf_main.ps [1.3]: 2000/03/19 17:26:42 lpd)

</pre><h2><a name="6.20 Interpreter"></a>Interpreter</h2><pre>

Fixes problems:
	- Font substitution was broken. (lib/gs_fonts.ps [1.3]: 2000/03/19
00:22:05 lpd)
	- The CFF reader gave an error if a font included any Subrs (it's
very surprising that this hasn't surfaced before, but apparently Acrobat
Distiller always produces CFF fonts with no Subrs); the CFF reader didn't
default lenIV to -1 for Type 1 CharStrings; the CFF reader wasn't able to
read CIDFonts. (lib/gs_cff.ps [1.3], lib/gs_cidfn.ps [1.4]: 2000/03/19
00:45:40 lpd)
	- EXTEND_NAMES had stopped working, because not all places that
needed the index of a name ref used name_index rather than r_size
(ilocate.c), and because the high_index value in the name sub-table was set
incorrectly (iname.c). (ilocate.c [1.2], iname.c [1.2]: 2000/03/19 01:33:23
lpd)
	- The attribute check for Functions being executed was incorrect
(always succeeded). (zfunc.c [1.2]: 2000/03/19 02:12:37 lpd)
	- s_add_filter didn't ensure enough buffering. This entailed moving
the NullEncode/Decode filters to stream.[hc]. (sfilter1.c [1.2]: 2000/03/19
03:15:02 lpd)
	- The parameters of SubFileDecode filters weren't initialized fully
(required by a change in this version). (zfilter.c [1.3]: 2000/03/19
04:03:45 lpd)
	- The AutoPositionEPSFiles Distiller parameter was misspelled
AutoPositionEPSFile. (lib/gs_pdfwr.ps [1.2]: 2000/03/19 05:03:31 lpd)
	- Enumerating the elements of a dictionary-based parameter list
returned garbage for the keys. (iparam.c [1.2]: 2000/03/19 15:13:13 lpd)
	- .buildfont0 should not check CIDSystemInfo compatibility. The
PLRM3 says PostScript interpreters do not make this check, even though the
PLRM2 says compatibility is required (!). (zfcmap.c [1.2]: 2000/03/19
16:53:50 lpd)
	- If log2_transfer_map_size > 8, identity transfer functions
returned garbage. The fix requires that if a client wants to set a transfer
function to the identity mapping, it must call gx_set_identity_transfer
rather than simply setting the procedure to gs_identity_transfer.
(zcolor.c [1.2]: 2000/03/19 17:14:47 lpd)
	- Separation color spaces didn't store the separation name.
(zcssepr.c [1.2]: 2000/03/19 17:21:36 lpd)

Provides a gs_atan2_degrees procedure to parallel sin and cos.
(zmath.c [1.2]: 2000/03/18 23:10:39 lpd)

Speeds up string garbage collection by scanning unmodified string regions
faster. (igcstr.c [1.2]: 2000/03/18 23:29:32 lpd)

Adds the ImagemaskTrapping parameter to the trapping state.
(lib/gs_trap.ps [1.2]: 2000/03/18 23:35:53 lpd)

Increments the version number to 6.20, in anticipation of the next release.
(We do this at the beginning of the development for a release, not the end.)
(lib/gs_init.ps [1.4]: 2000/03/19 00:27:22 lpd)

Adds a pseudo-encoding for the CFF StandardStrings that represent
characters. (lib/gs_cff.ps [1.2], lib/gs_css_e.ps [1.1]: 2000/03/19 00:38:50
lpd)

Refactors the code for getting Type 1/2/4 font parameters so it can be used
for FDArray entries of CIDFontType 0 fonts. (ifont1.h [1.2], zfont1.c [1.2]:
2000/03/19 02:07:45 lpd)

Speeds up Function evaluation slightly, by preallocating space for a
reasonable number of operands and results on the C stack rather than always
allocating it on the heap. (zfunc.c [1.3]: 2000/03/19 02:16:58 lpd)

Adds a public procedure for determining whether a PostScript object is a
Function, and if so, returning the pointer to the gs_function_t structure.
(ifunc.h [1.2], zfunc.c [1.4]: 2000/03/19 02:22:01 lpd)

Splits out the [T]BCP filter interface into a separate file. (zfbcp.c [1.2]:
2000/03/19 02:40:18 lpd)

Adds a skip_count parameter to the SubFileDecode filter, giving the number
of initial bytes or records to skip over. (Needed for printing FunctionType
4 functions, possibly useful for other things.) (sfilter1.c [1.3]:
2000/03/19 03:20:18 lpd)

Replaces the implementation of FunctionType 4 functions at the PostScript
language level with one that uses the new library-based facilities.
(zdevice2.c [1.2], zfunc4.c [1.2]: 2000/03/19 06:56:23 lpd)

Changes the key type returned by parameter list enumeration to include a
persistence flag, makes C parameter lists support non-persistent keys, and
upgrades GC descriptors so that parameter lists can be used non-transiently;
updates implementors of parameter lists to call gs_param_list_init to
initialize the common members, which is now required. (iparam.c [1.3]:
2000/03/19 15:16:11 lpd)

Makes Separation and DeviceN color spaces convert their tint transform
function to a FunctionType 4 Function if possible, for better accuracy and
to allow writing in PDF files. (lib/gs_lev2.ps [1.2], lib/gs_ll3.ps [1.2]:
2000/03/19 15:28:34 lpd)

Makes st_indexed_map private. Clients must now use the constructor procedure
alloc_indexed_map rather than allocating instances directly.
(zcsindex.c [1.2]: 2000/03/19 16:37:28 lpd)

Refactors the code for building fonts so it can be used for FDArray entries
of CIDFontType 0 fonts. (bfont.h [1.2], zbfont.c [1.2]: 2000/03/19 16:45:47
lpd)

</pre><h2><a name="6.20 Streams"></a>Streams</h2><pre>

Fixes problems:
	- s_add_filter didn't ensure enough buffering. This entailed moving
the NullEncode/Decode filters to stream.[hc]. (sfilter.h [1.3],
stream.c [1.3], stream.h [1.3]: 2000/03/19 03:15:02 lpd)

Splits out the [T]BCP filter interface into a separate file. (sbcp.c [1.2],
sbcp.h [1.1], sfilter.h [1.2]: 2000/03/19 02:40:18 lpd)

Adds a skip_count parameter to the SubFileDecode filter, giving the number
of initial bytes or records to skip over. (Needed for printing FunctionType
4 functions, possibly useful for other things.) (sfilter.h [1.4]: 2000/03/19
03:20:18 lpd)

Changes the key type returned by parameter list enumeration to include a
persistence flag, makes C parameter lists support non-persistent keys, and
upgrades GC descriptors so that parameter lists can be used non-transiently;
updates implementors of parameter lists to call gs_param_list_init to
initialize the common members, which is now required. (spsdf.c [1.2]:
2000/03/19 15:16:11 lpd)

</pre><h2><a name="6.20 Library"></a>Library</h2><pre>

Fixes problems:
	- Two comments in the file were incorrect. (gsiparm3.h [1.2]:
2000/03/19 02:46:11 lpd)
	- param_coerce_typed, which works with any parameter list
implementation, was incorrectly described as associated with the default
implementation. (gsparam.h [1.2]: 2000/03/19 03:37:08 lpd)
	- TrueType fonts didn't use vhea/vmtx if WMode = 1. Also makes
gs_font_type42 subclassable, for implementing CIDFontType 2 fonts, and makes
its procedure for getting a glyph's side bearing and width virtual, required
to support MetricsCount in CIDFontType 2 fonts. (gstype42.c [1.3],
gxfont42.h [1.2]: 2000/03/19 03:58:51 lpd)
	- ImageType 4 images didn't give an error for out-of-range MaskColor
values. The file also had an unnecessary #include. (gximage4.c [1.2]:
2000/03/19 04:10:09 lpd)
	- If log2_transfer_map_size > 8, identity transfer functions
returned garbage. The fix requires that if a client wants to set a transfer
function to the identity mapping, it must call gx_set_identity_transfer
rather than simply setting the procedure to gs_identity_transfer.
(gxclrast.c [1.3], gxcmap.c [1.2], gxfmap.h [1.2]: 2000/03/19 17:14:47 lpd)

Provides a gs_atan2_degrees procedure to parallel sin and cos.
(gsmisc.c [1.2], gxfarith.h [1.2]: 2000/03/18 23:10:39 lpd)

Improves the 8x8 bitmap "flipping" procedure to take advantage of 32-bit
ints. (gsutil.c [1.2]: 2000/03/18 23:16:16 lpd)

Adds a public procedure for restricting a color to its legal range.
(gscspace.c [1.2], gscspace.h [1.2], gxcspace.h [1.2]: 2000/03/18 23:19:17
lpd)

Adds the new ImagemaskTrapping parameter to the trapping state.
(gstrap.c [1.2], gstrap.h [1.2]: 2000/03/18 23:26:17 lpd)

Increments the version number to 6.20, in anticipation of the next release.
(We do this at the beginning of the development for a release, not the end.)
(gscdef.c [1.2]: 2000/03/19 00:27:22 lpd)

Adds a pseudo-encoding for the CFF StandardStrings that represent
characters. (gsccode.h [1.2]: 2000/03/19 00:38:50 lpd)

Adds a bit_index procedure to the implementation of device halftones,
required for writing halftones in PDF files. (The only implementors are
internal ones.) (gxdht.h [1.2], gxhtbit.c [1.2]: 2000/03/19 05:10:55 lpd)

Adds a public procedure for getting a palette entry of an Indexed color
space, used when writing Indexed color spaces in PDF files.
(gscindex.h [1.1], gscolor2.c [1.2], gscolor2.h [1.2]: 2000/03/19 05:20:28
lpd)

Reimplements "PostScript calculator" (FunctionType 4) functions entirely in
C, to allow them to be written out in PDF files. (gsfunc4.c [1.1],
gsfunc4.h [1.1], gsstruct.h [1.2]: 2000/03/19 05:25:53 lpd)

Moves gx_device_color_equal to the public API, for detecting redundant color
setting when writing PDF files. (gsdcolor.h [1.2], gxdcolor.c [1.2],
gxdcolor.h [1.2]: 2000/03/19 06:46:08 lpd)

Changes the default value of BufferSpace to 4 Mb. In desktop applications,
this is a reasonable value that can substantially improve performance
(especially for color printers); embedded applications will want to set
BufferSpace themselves in any case. (gdevprn.h [1.2]: 2000/03/19 06:51:13
lpd)

Adds virtual procedures for Functions to write their parameters to a
parameter list, and to access their data source and subfunctions. This is
needed for writing Functions in PDF files. This change is also a
prerequisite for the C implemention of FunctionType 4 functions, even though
it appears later in the change log. (gsdsrc.h [1.2], gsfunc.c [1.2],
gsfunc.h [1.2], gsfunc0.c [1.2], gsfunc3.c [1.2], gsparam.c [1.2],
gsparam.h [1.3], gxfunc.h [1.2]: 2000/03/19 07:24:53 lpd)

Splits off "vanilla" Functions into separate files, in anticipation of
removing them (they were only used to implement PostScript Calculator
Functions). (gsfunc.c [1.3], gsfunc.h [1.3], gsfuncv.c [1.1],
gsfuncv.h [1.1]: 2000/03/19 07:33:08 lpd)

Adds a procedure for allocating a C parameter list. (gscparam.c [1.2],
gsparam.h [1.4]: 2000/03/19 15:00:05 lpd)

Undoes a premature change that depends on an update not yet checked in.
(gscparam.c [1.3]: 2000/03/19 15:07:59 lpd)

Changes the key type returned by parameter list enumeration to include a
persistence flag, makes C parameter lists support non-persistent keys, and
upgrades GC descriptors so that parameter lists can be used non-transiently;
updates implementors of parameter lists to call gs_param_list_init to
initialize the common members, which is now required. (gscparam.c [1.4],
gsparam.c [1.3], gsparam.h [1.5]: 2000/03/19 15:16:11 lpd)

Adds a procedure for copying one parameter list to another.
(gsparamx.c [1.2], gsparamx.h [1.2]: 2000/03/19 15:35:31 lpd)

Records the CTM used for sampling HalftoneType 1 spot functions. This is
needed for recognizing the standard spot functions when producing PDF
output. Also factors the code for initializing spot functions for the
benefit of the PDF writer. (gshtscr.c [1.2], gxdht.h [1.3], gzht.h [1.2]:
2000/03/19 15:43:36 lpd)

Adds a proc_data member to the map for Separation and Indexed color spaces.
(gscolor2.c [1.3], gxcolor2.h [1.2]: 2000/03/19 16:23:46 lpd)

Makes st_indexed_map private. Clients must now use the constructor procedure
alloc_indexed_map rather than allocating instances directly.
(gscolor2.c [1.4], gscsepr.c [1.2], gxclrast.c [1.2], gxcolor2.h [1.3]:
2000/03/19 16:37:28 lpd)

Adds procedures for building and accessing DeviceN color spaces.
(gscdevn.c [1.2]: 2000/03/19 17:02:37 lpd)

</pre><h2><a name="6.20 ???Other???"></a>???Other???</h2><pre>

Adds procedures for building and accessing DeviceN color spaces.
(gscdevn.h [1.1]: 2000/03/19 17:02:37 lpd)

</pre></body></html>
