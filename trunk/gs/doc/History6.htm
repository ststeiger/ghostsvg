<html>
<head>
<title>History of Ghostscript versions 6.n</title>
<!-- $Id$ -->
<!--
	WARNING: do not use Pete Kaiser's emacs function "gs-toc" alone to
	re-create the table of contents here, because it will replace the
	hand-edited TOC subheads with a separate subhead for each H2 in
	the body of the file.  Or if you do, first look at the original
	TOC to see how to edit it for visual conciseness.
-->
</head>

<body>
<!-- [1.0 begin visible header] ============================================ -->

<!-- [1.1 begin headline] ================================================== -->

<table width="100%" border="0">
<tr><th align="center" bgcolor="#CCCC00"><font size=6>History of Ghostscript versions 6.n</font>
</table>

<!-- [1.1 end headline] ==================================================== -->

<!-- [1.2 begin table of contents] ========================================= -->

<h2>Table of contents</h2>

<blockquote><ul>
<li><a href="#Version6.23">Version 6.23 (2000-08-07)</a>
<ul>
<li><a href="#6.23_Incompatible_changes">Incompatible changes</a>,
    <a href="#6.23 Documentation">Documentation</a>,
    <a href="#6.23 Procedures">Procedures</a>,
    <a href="#6.23 Utilities">Utilities</a>,
    <a href="#6.23 Drivers">Drivers</a>,
    <a href="#6.23 PDF writer">PDF writer</a>,
    <a href="#6.23 Interpreter (PDF)">Interpreter (PDF)</a>,
    <a href="#6.23 Interpreter">Interpreter</a>,
    <a href="#6.23 Library">Library</a>
</ul>
<li><a href="#Version6.22">Version 6.22 (2000-07-05)</a>
<ul>
<li><a href="#6.22_Incompatible_changes">Incompatible changes</a>,
    <a href="#6.22 Documentation">Documentation</a>,
    <a href="#6.22 Procedures">Procedures</a>,
    <a href="#6.22 Utilities">Utilities</a>,
    <a href="#6.22 Drivers">Drivers</a>,
    <a href="#6.22 PDF writer">PDF writer</a>,
    <a href="#6.22 Interpreter (PDF)">Interpreter (PDF)</a>,
    <a href="#6.22 Interpreter">Interpreter</a>,
    <a href="#6.22 Streams">Streams</a>,
    <a href="#6.22 Library">Library</a>
</ul>
<li><a href="#Version6.21">Version 6.21 (2000-04-28)</a>
<ul>
<li><a href="#6.21_Incompatible_changes">Incompatible changes</a>,
    <a href="#6.21 Documentation">Documentation</a>,
    <a href="#6.21 Procedures">Procedures</a>,
    <a href="#6.21 Utilities">Utilities</a>,
    <a href="#6.21 Drivers">Drivers</a>,
    <a href="#6.21 PDF writer">PDF writer</a>,
    <a href="#6.21 Interpreter (PDF)">Interpreter (PDF)</a>,
    <a href="#6.21 Interpreter">Interpreter</a>,
    <a href="#6.21 Streams">Streams</a>,
    <a href="#6.21 Library">Library</a>
</ul>
<li><a href="#Version6.20">Version 6.20 (2000-04-06)</a>
<ul>
<li><a href="#6.20_Incompatible_changes">Incompatible changes</a>,
    <a href="#6.20 Documentation">Documentation</a>,
    <a href="#6.20 Procedures">Procedures</a>,
    <a href="#6.20 Utilities">Utilities</a>,
    <a href="#6.20 Drivers">Drivers</a>,
    <a href="#6.20 PDF writer">PDF writer</a>,
    <a href="#6.20 Interpreter (PDF)">Interpreter (PDF)</a>,
    <a href="#6.20 Interpreter">Interpreter</a>,
    <a href="#6.20 Streams">Streams</a>,
    <a href="#6.20 Library">Library</a>
</ul>
<li>(Versions 6.02 - 6.19 deliberately omitted.)
<li><a href="#Version6.01">Version 6.01 (2000-03-17)</a>
<ul>
<li><a href="#6.01_Incompatible_changes">Incompatible changes</a>,
    <a href="#6.01 Documentation">Documentation</a>,
    <a href="#6.01 Procedures">Procedures</a>,
    <a href="#6.01 Utilities">Utilities</a>,
    <a href="#6.01 Drivers">Drivers</a>,
    <a href="#6.01 PDF writer">PDF writer</a>,
    <a href="#6.01 Interpreter (PDF)">Interpreter (PDF)</a>,
    <a href="#6.01 Interpreter">Interpreter</a>,
    <a href="#6.01 Streams">Streams</a>,
    <a href="#6.01 Library">Library</a>
</ul>
<li><a href="#Version6.0">Version 6.0 (2000-02-03)</a>
<ul>
<li><a href="#6.0_Documentation">Documentation</a>,
    <a href="#6.0_Procedures">Procedures</a>,
    <a href="#6.0_Utilities">Utilities</a>,
    <a href="#6.0_Drivers">Drivers</a>,
    <a href="#6.0_Platforms">Platforms</a>,
    <a href="#6.0_Fonts">Fonts</a>,
    <a href="#6.0_PDF_writer">PDF writer</a>,
    <a href="#6.0_Interpreter_PDF">Interpreter (PDF)</a>,
    <a href="#6.0_Interpreter">Interpreter</a>,
    <a href="#6.0_Streams">Streams</a>,
    <a href="#6.0_Library">Library</a>
</ul>
</ul></blockquote>

<!-- [1.2 end table of contents] =========================================== -->

<!-- [1.3 begin hint] ====================================================== -->

<p>
This document is a record of changes in Ghostscript releases numbered 6.n.
For earlier versions, see the the history documents:

<blockquote>
<a href="History5.htm">History of Ghostscript versions 5.n</a><br>
<a href="History4.htm">History of Ghostscript versions 4.n</a><br>
<a href="History3.htm">History of Ghostscript versions 3.n</a><br>
<a href="History2.htm">History of Ghostscript versions 2.n</a><br>
<a href="History1.htm">History of Ghostscript versions 1.n</a>
</blockquote>

<p>For other information, see the <a href="Readme.htm">Ghostscript
overview</a>.

<!-- [1.3 end hint] ======================================================== -->

<hr>

<!-- [1.0 end visible header] ============================================== -->

<!-- [2.0 begin contents] ================================================== -->

<p>
Within each release, news appears in the following order: Incompatible
changes, Documentation, Procedures, Utilities, Drivers, Platforms, Fonts,
PDF writer (included under Drivers through fileset 5.88), Interpreter,
Streams (included under Interpreter through release 2.9.9), Library.
Changes marked with a * were made available as patches to a previous
release.

<hr>

<h1><a name="Version6.23"></a>Version 6.23 (2000-08-07)</h1>

<p>
This fileset consists mostly of bug fixes.

<p>
All problems registered on SourceForge numbered 110922 or lower are closed,
except for the following: 101549, 101814, 101905, 101955, 102146, 102735,
104118, 105289, 105558, 106340, 106652, 109350, 110445, 110898, 110922.

<p>
The following projects are in a partially completed state in the PDF writer:

<ul>

<li>CID-keyed fonts (gdevpdf[eftw].c) -- barely started.

</ul>

<pre>

<h2><a name="6.23_Incompatible_changes"></a>Incompatible changes</h2>

(Drivers)
	- With high-level drivers ([e]pswrite, pdfwrite, pxl*, cgm*),
changing the OutputFile after writing one or more pages now causes an error.
(Interpreter)
	- By default, copydevice will only copy a device prototype.
	- Some internal references to contexts in zcontext.c are changed
from direct pointers to context indices.
	- Renames internal types to add a _t: ctx_list, ctx_status,
gs_context, gs_condition, gs_lock.
(Library)
	- By default, gs_copydevice[2] will only copy a device prototype.


<h2><a name="6.23 Documentation"></a>Documentation</h2><pre>

Fixes problems:
	- Local GC in a multi-context system caused a crash. Also updates
all the internal type names in zcontext.c by adding a _t suffix if
necessary. (doc/News.htm [1.54]: 2000/07/10 23:56:55 lpd)
	- With some high-level drivers, changing the OutputFile after
opening the device could cause a crash. After the fix, doing this works
properly if no pages have actually been written out, but causes a rangecheck
error if any pages have been written. (This is required to maintain internal
consistency.) (doc/News.htm [1.55]: 2000/07/12 14:02:03 lpd)
	- The documented limit on the length of a file name was incorrect.
(doc/Language.htm [1.9]: 2000/08/03 06:45:25 lpd)

Increments the version number, in preparation for the next fileset.
(doc/News.htm [1.52]: 2000/07/06 02:45:06 lpd)

Adds a finish_copydevice device procedure, for cleaning up after copying the
bits of a device prototype or instance. For safety, the default
implementation only allows copying the prototype, not instances. This is a
NON-BACKWARD-COMPATIBLE change; however, using copydevice on a device
instance never worked reliably, so it should not have been used this way
before. (doc/Drivers.htm [1.4], doc/News.htm [1.53]: 2000/07/06 04:13:24
lpd)

Updates the references to the Computer Modern Fontmap on CTAN.
(doc/Fonts.htm [1.5], doc/New-user.htm [1.8]: 2000/07/09 23:29:25 lpd)

Updates a couple of release procedures. (doc/Release.htm [1.15]: 2000/07/10
19:32:59 lpd)

Adds documentation and a script for preparing GNU releases from Aladdin
releases. (doc/Release.htm [1.16]: 2000/07/17 17:10:57 lpd)

Clarifies that device parameters set with -d or -s can be changed
subsequently. (doc/Use.htm [1.8]: 2000/07/17 20:13:03 lpd)

Adds a project for making Ghostscript work as a Netscape browser plug-in.
(doc/Projects.htm [1.13]: 2000/07/19 22:50:18 lpd)

Removes the SVG driver from the list of projects, since there is a group
close to completing one (referenced from the Ghostscript home page on the
Web). (doc/Projects.htm [1.14]: 2000/07/20 14:49:52 lpd)

Directs users to the Ghostscript home page on the Web for information about
third-party drivers. (doc/New-user.htm [1.9]: 2000/07/20 14:50:34 lpd)

Adds a partially implemented driver that just produces a trace of its
drawing calls. This driver also serves as a minimal example of how to
implement the high-level driver operations. (doc/Drivers.htm [1.5]:
2000/07/29 04:00:00 lpd)

Updates dates and version #s for the 6.23 fileset. (doc/Bug-info.htm [1.4],
doc/Changes.htm [1.15], doc/Drivers.htm [1.6], doc/Fonts.htm [1.6],
doc/History5.htm [1.3], doc/Htmstyle.htm [1.4], doc/Install.htm [1.5],
doc/Language.htm [1.10], doc/New-user.htm [1.10], doc/News.htm [1.56],
doc/Projects.htm [1.15], doc/Ps2pdf.htm [1.15], doc/Release.htm [1.17],
doc/Use.htm [1.9], man/ps2ps.1 [1.6]: 2000/08/07 17:48:09 lpd)

</pre><h2><a name="6.23 Procedures"></a>Procedures</h2><pre>

Fixes problems:
	- $(GLGEN)/md5.h wasn't deleted after compilation. (lib.mak [1.26]:
2000/07/09 23:19:59 lpd)
	- TrueType font loading now requires the Adobe glyph list, but this
dependency was missing from the makefile. (int.mak [1.26]: 2000/07/19
08:11:15 lpd)
	- During compilation, GLSRCDIR was searched before GLGENDIR. (We're
very surprised that this didn't cause detectable trouble before.)
(lib.mak [1.27]: 2000/07/19 14:32:00 lpd)
	- The dependency on gsparamx.$(OBJ) was incorrectly attached to
pdfwrite.dev rather than psdf.dev. (devs.mak [1.30]: 2000/08/03 17:42:52
lpd)
	- 'pre' didn't work with dates in August or September (Tcl doesn't
accept 08 and 09 as valid numbers). (toolbin/pre [1.5]: 2000/08/07 17:35:27
lpd)

Increments the version number, in preparation for the next fileset.
(version.mak [1.17]: 2000/07/06 02:45:06 lpd)

Adds some user-contributed comments about using the Canon BJ200 driver with
the BJ300. (contrib.mak [1.18]: 2000/07/11 15:33:19 lpd)

Updates the (user-contributed) all-architecture build script to work around
a detail in the SGI IRIX C library header files. (all-arch.mak [1.4]:
2000/07/15 19:23:45 lpd)

Adds documentation and a script for preparing GNU releases from Aladdin
releases. (toolbin/makegnu.tcl [1.1]: 2000/07/17 17:10:57 lpd)

Adds a partially implemented driver that just produces a trace of its
drawing calls. This driver also serves as a minimal example of how to
implement the high-level driver operations. (lib.mak [1.28]: 2000/07/29
04:00:00 lpd)

Changes 'gsmake' to report line number rather than character position for
errors and warnings. (toolbin/gsmake.tcl [1.3]: 2000/08/07 17:22:27 lpd)

Updates dates and version #s for the 6.23 fileset. (version.mak [1.18]:
2000/08/07 17:48:10 lpd)

Adds some missing dependencies. (int.mak [1.27], lib.mak [1.29]: 2000/08/07
17:52:22 lpd)

</pre><h2><a name="6.23 Utilities"></a>Utilities</h2><pre>

Fixes problems:
	- An invalid file name or pattern passed to filenameforall would
(incorrectly) return an empty string rather than not returning any file
names at all. (gp_vms.c [1.3]: 2000/07/09 21:09:51 lpd)
	- Some DOS/Windows script files didn't use 'call', so they would
terminate execution prematurely if called from another script file.
(lib/ps2pdf.bat [1.5], lib/ps2pdf12.bat [1.4], lib/ps2pdf13.bat [1.4],
lib/ps2pdfxx.bat [1.8]: 2000/07/24 15:12:21 lpd)

</pre><h2><a name="6.23 Drivers"></a>Drivers</h2><pre>

Implements finish_copydevice for X windows, to allow copying instances as
well as the prototype. (gdevx.c [1.4], gdevx.h [1.3], gdevxini.c [1.7]:
2000/07/06 05:29:46 lpd)

Adds some user-contributed comments about using the Canon BJ200 driver with
the BJ300. (gdevbj10.c [1.2]: 2000/07/11 15:33:19 lpd)

</pre><h2><a name="6.23 PDF writer"></a>PDF writer</h2><pre>

Fixes problems:
	- M_2PI was predefined on some systems. (gdevpdfg.c [1.6]:
2000/07/09 23:11:31 lpd)
	- The word and character spacing values were not tracked correctly
when mixing text and graphics, sometimes producing horizontally misplaced
text. (gdevpdf.c [1.18], gdevpdfg.c [1.7], gdevpdfu.c [1.10],
gdevpdfx.h [1.19]: 2000/07/11 14:33:54 lpd)
	- 'show'ing an empty string could cause the next string to be
positioned incorrectly. (gdevpdft.c [1.14]: 2000/07/27 14:18:11 lpd)

Updates font embedding code to handle CIDFontType 2 fonts. NOT TESTED.
(gdevpdfe.c [1.3]: 2000/07/27 04:18:13 lpd)

Adds glyphs_used to FontDescriptors and pfd to std_fonts in the device
structure. WORK IN PROGRESS. (gdevpdf.c [1.19], gdevpdff.c [1.7],
gdevpdff.h [1.3], gdevpdfx.h [1.20]: 2000/07/27 04:19:24 lpd)

</pre><h2><a name="6.23 Interpreter (PDF)"></a>Interpreter (PDF)</h2><pre>

Fixes problems:
	- If a badly-constructed PDF file referenced one of the 12 base
alphabetic fonts explicitly as a TrueType font (e.g., /BaseFont
/TimesNewRoman /Subtype /TrueType) without embedding it, the substituted
Type 1 font had the wrong Encoding. (lib/pdf_font.ps [1.10]: 2000/07/10
13:18:28 lpd)
	- Piped input beginning with a % caused an ioerror. (bug introduced
in 6.22) (lib/pdf_main.ps [1.10]: 2000/07/14 05:30:19 lpd)
	- As a result of some recent changes to fix other problems, setting
certain text state parameters (Tf, Ts, Tz) outside of text mode (BT/ET)
caused an error. (lib/pdf_ops.ps [1.6]: 2000/07/19 15:57:54 lpd)
	- Setting a singular text matrix (e.g., 0 0 0 0 <x> <y> Tm) caused
an error. (lib/pdf_ops.ps [1.7]: 2000/08/04 16:08:05 lpd)

</pre><h2><a name="6.23 Interpreter"></a>Interpreter</h2><pre>

Fixes problems:
	- Removes the '?' procedure, which was defined solely for the
convenience of users who don't read the documentation and which interfered
with the operation of some code produced by the Adobe PS5 Windows driver.
(lib/gs_init.ps [1.18]: 2000/07/09 22:34:30 lpd)
	- A constant 1 should have been 1L, causing a warning on systems
where sizeof(long) > sizeof(int). (zarith.c [1.3]: 2000/07/09 23:10:58 lpd)
	- The workaround for attempting to set a 4-element PageSize value in
a page device sometimes caused an error. (bug introduced in 6.21)
(lib/gs_setpd.ps [1.4]: 2000/07/10 12:48:54 lpd)
	- Redefining setcolorspace could cause an infinite recursion.
(lib/gs_lev2.ps [1.5]: 2000/07/10 13:35:24 lpd)
	- Local GC in a multi-context system caused a crash. Also updates
all the internal type names in zcontext.c by adding a _t suffix if
necessary. (zcontext.c [1.4]: 2000/07/10 23:56:55 lpd)
	- A garbage collection occurring within a save could cause a memory
access error. (bug introduced in 6.22) (zcontext.c [1.5]: 2000/07/14
05:28:56 lpd)
	- Piped input beginning with a % caused an ioerror. (bug introduced
in 6.22) (zfileio.c [1.8]: 2000/07/14 05:30:19 lpd)
	- A garbage collection occurring while scanning a binary token
sequence could cause a syntaxerror or corrupted data. (iscan.c [1.3]:
2000/07/18 15:39:02 lpd)
	- (correction) An interruption (including a callout for a
procedure-based stream), not a garbage collection, while scanning a binary
token sequence could cause a syntaxerror or corrupted data. (iscan.c [1.4]:
2000/07/18 15:41:55 lpd)
	- When loading a TrueType font, invalid glyph numbers in the 'post'
table (which appear in some Adobe-created PDF files) caused an error instead
of being ignored; a test was backwards, causing some embedded TrueType fonts
in PDF files to produce a rangecheck error. (lib/gs_ttf.ps [1.6]: 2000/07/19
08:12:41 lpd)
	- When NOPROMPT was set, no flush or flushpage occurred at the end
of a page. (fix from an anonymous user on SourceForge)
(lib/gs_init.ps [1.19]: 2000/07/20 01:40:50 lpd)
	- Type 1 or Type 2 fonts with invalid LanguageGroup values < 0
caused an error. (Such fonts are invalid, but some real fonts have garbage
LanguageGroup values, and Adobe software doesn't give an error.)
(zfont1.c [1.6]: 2000/07/24 18:08:38 lpd)
	- Errors while executing gs_init.ps and other PostScript
initialization files were sometimes ignored, leading to mysterious error
messages later. (imainarg.c [1.3]: 2000/08/03 06:43:17 lpd)
	- Showing text with a singular matrix (scaling matrix x CTM) could
leave extraneous values on the operand stack. (zchar1.c [1.4]: 2000/08/04
16:09:30 lpd)

Increments the version number, in preparation for the next fileset.
(lib/gs_init.ps [1.15]: 2000/07/06 02:45:06 lpd)

Redefines [gs_]copydevice in terms of a new gs_copydevice2/.copydevice2,
which adds a Boolean keep_open argument that requests (but does not
guarantee) that a copy of an open device remain open.
(lib/gs_init.ps [1.16], zdevice.c [1.2]: 2000/07/06 03:26:13 lpd)

Adds a finish_copydevice device procedure, for cleaning up after copying the
bits of a device prototype or instance. For safety, the default
implementation only allows copying the prototype, not instances. This is a
NON-BACKWARD-COMPATIBLE change; however, using copydevice on a device
instance never worked reliably, so it should not have been used this way
before. (lib/gs_init.ps [1.17]: 2000/07/06 04:13:24 lpd)

Adds the ability to load CIDFont resources from CFF OpenType font files.
(lib/gs_cff.ps [1.6], lib/gs_cidfn.ps [1.16]: 2000/07/29 05:58:28 lpd)

Ensures that errordict has at least one empty entry, for the sake of some
astonishingly bad PostScript code that tests for this and has a bug in the
case where it isn't true. (lib/gs_init.ps [1.20]: 2000/08/04 04:29:45 lpd)

</pre><h2><a name="6.23 Library"></a>Library</h2><pre>

Fixes problems:
	- Some coordinate computations for Type 1 fonts could lose far too
much precision if _fixed_shift was reduced. (gscoord.c [1.2],
gxmatrix.h [1.2]: 2000/07/11 09:25:46 lpd)
	- If the current color space was DeviceRGB, gs_currentgray returned
the wrong value. (bug introduced in 6.22) (gscolor.c [1.3]: 2000/07/11
14:00:09 lpd)
	- With some high-level drivers, changing the OutputFile after
opening the device could cause a crash. After the fix, doing this works
properly if no pages have actually been written out, but causes a rangecheck
error if any pages have been written. (This is required to maintain internal
consistency.) (gdevvec.c [1.4]: 2000/07/12 14:02:04 lpd)
	- A file had accidentally acquired an incorrect license notice.
(gscoord.c [1.4]: 2000/07/13 02:02:09 lpd)
	- Type 2 fonts that used the 'hflex' operator could produce
distorted characters (e.g., slanted bottoms). (gstype2.c [1.4]: 2000/07/13
02:09:21 lpd)
	- The use of macros within procedure argument lists confused
ansi2knr. (gximage3.c [1.5], gximage3.h [1.3]: 2000/07/19 14:30:45 lpd)
	- Freeing a locking allocator could cause infinite recursion.
(gsmemlok.c [1.2]: 2000/07/19 21:32:12 lpd)
	- "Accurate curves" was a no-op for certain cases of horizontal or
vertical tangents. (gxpcopy.c [1.2]: 2000/08/05 01:04:28 lpd)

Increments the version number, in preparation for the next fileset.
(gscdef.c [1.5]: 2000/07/06 02:45:06 lpd)

Redefines [gs_]copydevice in terms of a new gs_copydevice2/.copydevice2,
which adds a Boolean keep_open argument that requests (but does not
guarantee) that a copy of an open device remain open. (gsdevice.c [1.5],
gsdevice.h [1.2]: 2000/07/06 03:26:13 lpd)

Adds a finish_copydevice device procedure, for cleaning up after copying the
bits of a device prototype or instance. For safety, the default
implementation only allows copying the prototype, not instances. This is a
NON-BACKWARD-COMPATIBLE change; however, using copydevice on a device
instance never worked reliably, so it should not have been used this way
before. (gdevbbox.c [1.2], gdevdflt.c [1.2], gdevht.c [1.2],
gdevmem.h [1.2], gdevnfwd.c [1.2], gdevprn.h [1.5], gdevrops.c [1.2],
gsdevice.c [1.6], gxacpath.c [1.2], gxclip.c [1.2], gxclip2.c [1.2],
gxclipm.c [1.2], gxclist.c [1.2], gxdevcli.h [1.2], gxdevice.h [1.3],
gxpcmap.c [1.2]: 2000/07/06 04:13:24 lpd)

Adds a little more tracing output for images. (gxidata.c [1.3]: 2000/07/09
21:04:25 lpd)

Adds _simple_final structure type definition macros. (gsstruct.h [1.3]:
2000/07/10 15:43:30 lpd)

Removes a structure member no longer needed after a recent fix.
(gscoord.c [1.3], gxmatrix.h [1.3]: 2000/07/12 04:49:43 lpd)

Adds the ability to write subsetted CIDFontType 2 (TrueType-based) fonts.
(gdevpsf.h [1.6], gdevpsft.c [1.2], gdevpsfu.c [1.3], gxfcid.h [1.5]:
2000/07/21 01:09:16 lpd)

Adds a partially implemented driver that just produces a trace of its
drawing calls. This driver also serves as a minimal example of how to
implement the high-level driver operations. (gdevtrac.c [1.1]: 2000/07/29
04:00:00 lpd)

Improves the smoothness of ShadingType 4 - 7 gradient fills.
(gxshade4.c [1.2], gxshade6.c [1.2]: 2000/08/03 20:47:48 lpd)

Updates dates and version #s for the 6.23 fileset. (gscdef.c [1.6]:
2000/08/07 17:48:10 lpd)

<hr>

<h1><a name="Version6.22"></a>Version 6.22 (2000-07-05)</h1>

<p>
This fileset consists mostly of bug fixes.  It also further improves the PDF
writer, which now handles ImageType 3 images and PatternType 2 (shading)
patterns.

<p>
All problems registered on SourceForge numbered 108819 or lower are closed,
except for the following: 101549, 101814, 101905, 101955, 102146, 102735,
104118, 105289, 105558, 106340, 106652, 108639.

<p>
The following projects are in a partially completed state in the PDF writer:

<ul>

<li>CID-keyed fonts (gdevpdf[eftw].c) -- barely started.

</ul>

<pre>

<h2><a name="6.22_Incompatible_changes"></a>Incompatible changes</h2>

(Procedures)
	- Versions now have odd numbers during development, even numbers
when released.
	- The TMPDIR environment variable, if set, now takes precedence
over TEMP.
	- On MS-DOS, MS Windows, and OS/2 platforms, the batch files that
invoke Ghostscript now use a default name of gswin32 or gswin32c rather than
simply gs.
(Drivers)
	- The PCL drivers now select a given paper size if the requested
height is at least 0.1" greater than the height of the next smaller paper
size, rather than if the requested height is at least as large as that of
the given paper size.
(Interpreter)
	- user_names_p and system_names_p may now be NULL: clients must
check this.
	- scan_comment_proc and scan_dsc_proc are now deprecated, and will
disappear in the near future.
	- The values in psuserparams are now checking procedures rather
than parameter values.
	- Comments beginning with %! are treated as "DSC comments", like
comments beginning with %%.
(Library)
	- The macro for declaring the fill_rectangle procedure of a shading
is now upper-case.  The fill_rectangle procedure is now a member of a procs
structure; there is a new macro for calling it.
	- The parameter list and return value for gs_currentgray have
changed.  This is very unfortunate, but it was unavoidable.


<h2><a name="6.22 Documentation"></a>Documentation</h2><pre>

Fixes problems:
	- The batch files for MS-DOS, MS Windows, and OS/2 referred to the
executable by the name 'gs'. They now use environment variables GS
(graphical) and GSC (console) for the executable names, defaulting to
gswin32 and gswin32c respectively. (doc/News.htm [1.45], doc/Use.htm [1.6]:
2000/05/20 20:53:04 lpd)
	- The -dCompatibilityLevel= switch was incorrectly identified in one
place as -dCompatibility=. (doc/Ps2pdf.htm [1.11]: 2000/05/22 21:29:45 lpd)
	- [gs_]currentgray didn't return the correct value if the current
color space was a DeviceN space using the alternate space.
(doc/News.htm [1.49]: 2000/07/03 15:28:26 lpd)
	- Fixes a couple of typos. (doc/Release.htm [1.12]: 2000/07/04
19:19:38 lpd)
	- The "smoke test" procedure for fileset releases didn't stress the
banding code nearly as hard as intended. (doc/Release.htm [1.13]: 2000/07/05
04:50:13 lpd)

Adds predefined pdfwrite settings similar to the three standard settings in
Adobe Acrobat Distiller 4, plus a "default" setting, with
-dPDFSETTINGS=/settingname. (doc/Ps2pdf.htm [1.10]: 2000/04/29 02:29:20 lpd)

Increments the version number to 6.23. From now on, we use odd numbers
during development, even numbers for released filesets.
(doc/Changes.htm [1.12], doc/History6.htm [1.7], doc/News.htm [1.40],
doc/Release.htm [1.11]: 2000/04/29 16:49:43 lpd)

Implements ImageType 3 images in the PDF writer. (doc/News.htm [1.41]:
2000/04/30 06:21:58 lpd)

Creates a procs structure for shadings, moving the fill_rectangle procedure
into it, in anticipation of adding a get_params procedure.
(doc/News.htm [1.42]: 2000/04/30 19:37:37 lpd)

Implements PatternType 2 patterns and shfill in the PDF writer.
(doc/News.htm [1.43]: 2000/05/02 07:14:58 lpd)

Adds a reference to Karel Kulhavy's pdf2html program.
(doc/New-user.htm [1.6]: 2000/05/04 21:16:44 lpd)

Adds a small project to remove the limit on the length of the OutputFile
parameter for printer drivers. (doc/Projects.htm [1.9]: 2000/05/06 00:32:08
lpd)

Documents the addition of TMPDIR for specifying the directory for temporary
files. (doc/News.htm [1.44], doc/Use.htm [1.5]: 2000/05/19 17:59:28 lpd)

Adds (more) user-contributed uniprint parameter files for the Epson Stylus
Color 640. (doc/Devices.htm [1.8]: 2000/05/23 18:58:56 lpd)

Adds implementation of the %font% IODevice to the list of projects.
(doc/Projects.htm [1.10]: 2000/05/24 23:30:15 lpd)

Documents the change in the paper size selection for PCL drivers.
(doc/News.htm [1.46]: 2000/05/30 03:26:15 lpd)

Adds glyph decaching notification to the list of projects.
(doc/Projects.htm [1.11]: 2000/05/30 05:54:23 lpd)

Documents that user_names_p and system_names_p may now be NULL.
(doc/News.htm [1.47]: 2000/06/05 01:26:05 lpd)

Adds the ability to write multi-strip monochrome TIFF files, controlled by a
new MaxStripSize parameter for the monochrome TIFF drivers.
(doc/Devices.htm [1.9]: 2000/06/05 05:41:55 lpd)

Updates the open ICC color support project to reference Graeme Gill's icclib
package. (doc/Projects.htm [1.12]: 2000/06/08 02:55:37 lpd)

Adds an umbrella document for maintenance procedures, initially describing
the procedure for uploading bug report test data to SourceForge.
(doc/Maintain.htm [1.1], doc/Readme.htm [1.8]: 2000/06/13 20:27:26 lpd)

Updates documentation to reflect the use of the GSC environment variable to
set the name of the executable for ps2pdf. (doc/Ps2pdf.htm [1.12]:
2000/06/21 17:10:41 lpd)

Updates documentation on the ProcessColorModel and ColorConversionStrategy
parameters. (doc/Ps2pdf.htm [1.13]: 2000/06/21 18:06:07 lpd)

Adds user parameters ProcessComment and ProcessDSCComment. If not null,
these procedures are called with the file and the comment line whenever the
scanner detects a comment (or non-DSC comment) or DSC comment. NOTE: the
interpreter is currently patched so that ProcessComment is never called.
(doc/Language.htm [1.4], doc/News.htm [1.48]: 2000/06/27 00:53:38 lpd)

Adds a reference to a user-maintained Czech translation of the Ghostscript
'man' pages. (doc/Readme.htm [1.9]: 2000/06/27 14:03:29 lpd)

Brings the language documentation (more) up to date.
(doc/Language.htm [1.5]: 2000/06/29 16:00:48 lpd)

Improves the documentation of copydevice regarding where it allocates the
copy, and documents finddevice. (doc/Drivers.htm [1.2],
doc/Language.htm [1.6]: 2000/06/30 00:09:15 lpd)

Adds a findprotodevice "operator", to find a device prototype by name.
(doc/Language.htm [1.7]: 2000/07/05 04:49:11 lpd)

Changes the version numbering system back to sequential (not odd/even).
Between numbered filesets, GS_PRODUCT will say "CVS PRE-RELEASE".
(doc/History6.htm [1.8], doc/News.htm [1.50]: 2000/07/05 17:23:54 lpd)

Updates documentation related to version numbering, reflecting the move back
to sequential numbering. (doc/Maintain.htm [1.2], doc/Release.htm [1.14]:
2000/07/05 18:27:50 lpd)

Updates documentation dates for making a fileset. (doc/Changes.htm [1.13],
doc/Devices.htm [1.10], doc/Drivers.htm [1.3], doc/History6.htm [1.9],
doc/Language.htm [1.8], doc/New-user.htm [1.7], doc/News.htm [1.51],
doc/Ps2pdf.htm [1.14], doc/Readme.htm [1.10], doc/Use.htm [1.7]: 2000/07/06
00:01:39 lpd)

</pre><h2><a name="6.22 Procedures"></a>Procedures</h2><pre>

Fixes problems:
	- The rule for the recently-added gdevhl12 driver omitted the space
before the colon. (contrib.mak [1.12]: 2000/05/02 01:42:12 lpd)
	- Once again, corrects an incorrect dependency list.
(lib.mak [1.19]: 2000/05/02 07:14:11 lpd)
	- smd5.c didn't compile properly with "traditional C" compilers.
(lib.mak [1.20]: 2000/05/19 06:08:01 lpd)
	- Temporary files weren't created as private or exclusive.
(lib.mak [1.21], os2.mak [1.6], watc.mak [1.4], watclib.mak [1.4],
winlib.mak [1.3]: 2000/05/19 17:52:51 lpd)
	- The definitions of user names weren't properly associated with
local VM (they were stored in a static variable). (int.mak [1.22]:
2000/05/26 02:27:58 lpd)
	- 'make install' on Unix systems didn't install pdfopt.ps and
pdfwrite.ps. (unixinst.mak [1.11]: 2000/05/30 23:07:34 lpd)
	- The dependency list for the new Epson Stylus Photo driver was
wrong, causing build problems if this driver was included.
(contrib.mak [1.13]: 2000/06/01 20:25:39 lpd)
	- The change to implement stripped TIFF files broke non-TIFF fax
output formats (faxg* drivers). Also factors plain-fax writing from TIFF
writing. (devs.mak [1.26]: 2000/06/06 06:37:37 lpd)
	- Corrects a typo introduced by recent changes. (msvctail.mak [1.3]:
2000/06/07 06:36:54 lpd)
	- Rendering TrueType fonts didn't adjust the flatness to ensure
accurate results. (lib.mak [1.23]: 2000/06/20 15:46:53 lpd)
	- The makefile missed a dependency (CIDFontType 0 fonts require
FontType 2 fonts). (int.mak [1.23]: 2000/06/27 17:23:13 lpd)
	- The makefiles didn't include the requirement that gs_mro_e.ps be
loaded before gs_mgl_e.ps. (devs.mak [1.28], int.mak [1.24]: 2000/06/27
17:36:42 lpd)
	- A dependency was missing. (lib.mak [1.24]: 2000/07/04 19:05:12
lpd)
	- Fixes a typo; reduces the number of false warnings for
documentation date mismatches. (toolbin/pre [1.4]: 2000/07/04 19:19:17 lpd)
	- Fixes a typo. (contrib.mak [1.16]: 2000/07/04 22:30:10 lpd)
	- Adds a missing dependency. (devs.mak [1.29]: 2000/07/04 22:30:33
lpd)
	- Adds a missing dependency. (contrib.mak [1.17]: 2000/07/06
00:00:13 lpd)

Increments the version number to 6.23. From now on, we use odd numbers
during development, even numbers for released filesets. (version.mak [1.15]:
2000/04/29 16:49:43 lpd)

Restructures the code for handling ImageType 3 images, for the benefit of
the PDF writer. (lib.mak [1.18]: 2000/04/30 03:08:15 lpd)

Implements ImageType 3 images in the PDF writer. (devs.mak [1.23]:
2000/04/30 06:21:58 lpd)

Implements PatternType 2 patterns and shfill in the PDF writer.
(devs.mak [1.24]: 2000/05/02 07:14:58 lpd)

Adds the first draft of a driver for the Practical Automation ATX-23, -24,
and -38 label/ticket printers, developed under contract. This has a dual
GPL/AFPL license. (devs.mak [1.25]: 2000/05/03 20:30:06 lpd)

Works around the fact that Microsoft Visual C++ (only) doesn't define the O_
flags for the `open' library call. (lib.mak [1.22]: 2000/05/31 20:34:43 lpd)

Makes it possible to build on MSVC++ systems without specifying the paths
for the tools, headers, or libraries. See msvc{32,lib}.mak for details.
(msvc32.mak [1.4], msvccmd.mak [1.4], msvclib.mak [1.4], msvctail.mak [1.2],
winint.mak [1.4]: 2000/06/05 02:46:07 lpd)

Adds a user-contributed driver for SFF (the file format for CAPI fax
devices). (contrib.mak [1.14]: 2000/06/06 06:38:31 lpd)

Notes that the vgalib driver only suppotrs 16-color modes. (devs.mak [1.27]:
2000/06/06 15:28:01 lpd)

Removes an obsolete file. (toolbin/package.tcl [1.2]: 2000/06/06 18:05:32
lpd)

Documents the fact that the IJG JPEG library header files must be available
when compiling, even if SHARE_JPEG=1. (dvx-gcc.mak [1.3], jpeg.mak [1.2],
unix-gcc.mak [1.6], unixansi.mak [1.4], unixtrad.mak [1.4]: 2000/06/07
13:32:44 lpd)

Finishes implementing the Process[DSC]Comment callout. (int.mak [1.25]:
2000/06/28 20:17:00 lpd)

Removes some third-party drivers with incompatible licenses.
(contrib.mak [1.15]: 2000/07/02 22:11:31 lpd)

Finishes working around the fact that Microsoft C, in defiance of multiple
standards, by default doesn't define the O_ flags for 'open' in fcntl.h (or
anywhere else). (lib.mak [1.25]: 2000/07/05 00:48:21 lpd)

Changes the version numbering system back to sequential (not odd/even).
Between numbered filesets, GS_PRODUCT will say "CVS PRE-RELEASE".
(version.mak [1.16]: 2000/07/05 17:23:54 lpd)

</pre><h2><a name="6.22 Utilities"></a>Utilities</h2><pre>

Fixes problems:
	- Fixes a couple of minor Windows NT compatibility problems in
script files. (lib/ps2pdf.bat [1.3], lib/ps2pdfxx.bat [1.5]: 2000/05/05
03:21:03 lpd)
	- Temporary files weren't created as private or exclusive.
(gp_iwatc.c [1.3], gp_mswin.c [1.2], gp_os2.c [1.3]: 2000/05/19 17:52:51
lpd)
	- gsdll_init didn't propagate an error return from
gs_main_init_with_args, causing clients to think Ghostscript was initialized
properly when it wasn't. (gsdll.c [1.2]: 2000/05/20 14:39:42 lpd)
	- The batch files for MS-DOS, MS Windows, and OS/2 referred to the
executable by the name 'gs'. They now use environment variables GS
(graphical) and GSC (console) for the executable names, defaulting to
gswin32 and gswin32c respectively. (lib/bdftops.bat [1.2],
lib/eps2eps.bat [1.3], lib/font2c.bat [1.2], lib/gsbj.bat [1.2],
lib/gsdj.bat [1.2], lib/gsdj500.bat [1.2], lib/gslj.bat [1.2],
lib/gslp.bat [1.2], lib/gsnd.bat [1.2], lib/gsndt.bat [1.2],
lib/gssetgs.bat [1.1], lib/gst.bat [1.2], lib/gstt.bat [1.2],
lib/lpgs.bat [1.2], lib/lpr2.bat [1.2], lib/pdf2ps.bat [1.3],
lib/pdfopt.bat [1.2], lib/pftogsf.bat [1.2], lib/ps2ascii.bat [1.3],
lib/ps2epsi.bat [1.3], lib/ps2pdfxx.bat [1.7], lib/ps2ps.bat [1.3]:
2000/05/20 20:53:05 lpd)
	- The ps2pdf.bat script didn't set the default PDF level, so it
normally produced PDF 1.3 rather than 1.2, which was contrary to the
documentation and different from the Unix ps2pdf script.
(lib/ps2pdf.bat [1.4]: 2000/06/08 02:33:09 lpd)

Adds a user-contributed program for displaying the differences between two
AFM (font metric) files. This has a dual AFPL/GPL copyright.
(lib/afmdiff.awk [1.1]: 2000/04/29 20:51:41 lpd)

Removes an out-of-date e-mail address. (lib/ps2pdfxx.bat [1.4]: 2000/05/04
16:40:08 lpd)

Adds -dSAFER to all the format conversion scripts in which the input is
executed as PostScript or PDF code. (lib/eps2eps [1.2],
lib/eps2eps.bat [1.2], lib/pdf2dsc [1.2], lib/pdf2ps [1.3],
lib/pdf2ps.bat [1.2], lib/ps2ascii [1.2], lib/ps2ascii.bat [1.2],
lib/ps2epsi [1.3], lib/ps2epsi.bat [1.2], lib/ps2pdfwr [1.5],
lib/ps2pdfxx.bat [1.6], lib/ps2ps [1.2], lib/ps2ps.bat [1.2]: 2000/05/19
06:38:25 lpd)

Adds -dSAFER to one more script. (lib/pdfopt [1.2]: 2000/05/30 05:28:22 lpd)

Refactors some PDF-writing code for use in a PDF decompressor.
(lib/pdfwrite.ps [1.2]: 2000/06/27 17:06:32 lpd)

Adds a number of (user-maintained) command files for OS/2.
(lib/bdftops.cmd [1.1], lib/eps2eps.cmd [1.1], lib/font2c.cmd [1.1],
lib/pdf2ps.cmd [1.1], lib/pf2afm.cmd [1.1], lib/ps2ascii.cmd [1.1],
lib/ps2epsi.cmd [1.1], lib/ps2pdf.cmd [1.1], lib/ps2pdf12.cmd [1.1],
lib/ps2pdf13.cmd [1.1], lib/ps2ps.cmd [1.1]: 2000/07/05 16:21:13 lpd)

</pre><h2><a name="6.22 Drivers"></a>Drivers</h2><pre>

Fixes problems:
	- The "compressed data" command encoding was wrong in one place in
the documentation, and the code used the incorrect encoding.
(gdevatx.c [1.2]: 2000/05/06 00:31:25 lpd)
	- If a file made no marks at all, ps2[e]ps produced bad output.
(gdevps.c [1.8]: 2000/05/07 15:38:27 lpd)
	- Returning an image compression parameter dictionary didn't close
an enumeration, failing to free a bookkeeping structure. (gdevpsdp.c [1.5]:
2000/05/11 16:13:16 lpd)
	- The epswrite driver could produce output that used initclip, which
is not allowed in EPS files. (gdevps.c [1.9]: 2000/05/20 06:36:30 lpd)
	- The change to implement stripped TIFF files broke non-TIFF fax
output formats (faxg* drivers). Also factors plain-fax writing from TIFF
writing. (gdevfax.c [1.1], gdevfax.h [1.1], gdevtfax.c [1.3],
gdevtfax.h [1.3]: 2000/06/06 06:37:37 lpd)
	- In the X driver, resetting MaxBitmap didn't have the proper
effect, and could cause a crash. (This is probably only a partial fix.)
(gdevxini.c [1.4]: 2000/06/12 01:52:16 lpd)
	- Finishes fixing the handling of MaxBitmap in the X driver.
(gdevxini.c [1.5]: 2000/06/12 02:45:25 lpd)
	- In the ATX drivers, the word count for compressed scan lines was
written as 2 bytes rather than 1; the drivers wouldn't accept a page width
greater than 2400 pixels. (gdevatx.c [1.4]: 2000/06/12 04:39:48 lpd)
	- Works around a bug in the MSVC++ 5.0 compiler that treats (int <<
unsigned) as unsigned rather than int. (gdevcd8.c [1.2], gdevcdj.c [1.2],
gdevdj9.c [1.3]: 2000/06/20 14:21:34 lpd)
	- Uncolored Patterns used with a gray color produced incorrect PDF
output. (Bug introduced in 6.2x.) (gdevpsdu.c [1.5]: 2000/06/28 05:13:19
lpd)
	- Moves an assignment to eliminate a bogus warning from some picky
compilers about a variable supposedly clobbered by longjmp.
(gdevpng.c [1.2]: 2000/07/03 21:10:33 lpd)
	- Two values were computed and not used. (gdevpx.c [1.3]: 2000/07/03
21:30:41 lpd)
	- [e]pswrite didn't guarantee a maximum line length of 255
characters, and didn't mark binary data with %%BeginData:/%%EndData.
(gdevps.c [1.10]: 2000/07/04 18:34:38 lpd)
	- Fixes references to undeclared functions. (gdevdfax.c [1.2],
gdevl256.c [1.2]: 2000/07/04 22:25:08 lpd)
	- X Windows platform fonts were broken when using multiple device
instances (windows). (gdevxxf.c [1.4]: 2000/07/05 18:20:41 lpd)

Improves the test for whether compressing an image is worthwhile.
(gdevpsdi.c [1.11]: 2000/04/30 01:26:41 lpd)

When printing color values derived from 8-bit fields, rounds the output to 3
decimal places for compactness with no loss of precision. (gdevpsdu.c [1.4]:
2000/04/30 19:24:28 lpd)

Adds the first draft of a driver for the Practical Automation ATX-23, -24,
and -38 label/ticket printers, developed under contract. This has a dual
GPL/AFPL license. (gdevatx.c [1.1]: 2000/05/03 20:30:06 lpd)

Updates the ATX printer drivers to handle the unprintable margins.
(gdevatx.c [1.3]: 2000/05/19 05:48:30 lpd)

Adds (more) user-contributed uniprint parameter files for the Epson Stylus
Color 640. (lib/st640ih.upp [1.1], lib/st640ihg.upp [1.1],
lib/st640p.upp [1.1], lib/st640pg.upp [1.1], lib/st640pl.upp [1.1],
lib/st640plg.upp [1.1]: 2000/05/23 18:58:56 lpd)

Adds support for 11x17 paper in PCL printers; changes the paper size tests
so that paper size N+1 is selected if the requested height is at least 0.1"
greater than the height of paper size N. (gdevpcl.c [1.2], gdevpcl.h [1.2]:
2000/05/30 03:24:17 lpd)

Adds comments about H-P's inconsistent use of different names and size codes
for the 11x17 paper size. (gdevpcl.c [1.3], gdevpcl.h [1.3]: 2000/05/30
20:45:45 lpd)

Adds the ability to write multi-strip monochrome TIFF files, controlled by a
new MaxStripSize parameter for the monochrome TIFF drivers.
(gdevtfax.c [1.2], gdevtfax.h [1.2], gdevtfnx.c [1.2], gdevtifs.c [1.2],
gdevtifs.h [1.2]: 2000/06/05 05:41:55 lpd)

Adds a user-contributed driver for SFF (the file format for CAPI fax
devices). (gdevcfax.c [1.1]: 2000/06/06 06:38:31 lpd)

Notes that the vgalib driver only suppotrs 16-color modes.
(gdevvglb.c [1.2]: 2000/06/06 15:28:01 lpd)

Adds some code contributed by Leon Bottou <leonb@research.att.com> that
makes the X driver prefer TrueColor visuals. We aren't sure of the
ramifications of this.... (gdevxini.c [1.6]: 2000/06/12 04:41:15 lpd)

Updates the ATX driver(s) to enforce maximum page width and minimum page
length. (gdevatx.c [1.5]: 2000/06/22 14:55:53 lpd)

Removes some third-party drivers with incompatible licenses.
(gdevcd8.c [1.3], gdevdj9.c [1.4], gdevhl12.c [1.2]: 2000/07/02 22:11:31
lpd)

Per user request, changes the license on the basic monochrome
DeskJet/LaserJet drivers from AFPL to dual AFPL/GPL. (gdevdjet.c [1.5],
gdevdljm.c [1.3], gdevdljm.h [1.3]: 2000/07/05 17:36:14 lpd)

</pre><h2><a name="6.22 PDF writer"></a>PDF writer</h2><pre>

Fixes problems:
	- A "0 ||" was omitted, potentially causing some kinds of errors
that never happen in practice to be overlooked. (gdevpdfi.c [1.17]:
2000/05/02 01:55:10 lpd)
	- Fixes minor syntactic incompatibilities with "traditional C"
compilers. (gdevpdfg.c [1.5]: 2000/05/11 16:14:51 lpd)
	- The PDF writer could still produce coordinates for paths that
exceeded Acrobat Reader's user-coordinate limit of +/- 32K.
(gdevpdfd.c [1.9]: 2000/05/23 21:05:00 lpd)
	- In PDF 1.2 output, several synthesized Type 3 fonts could have the
same name, producing errors and/or incorrect output. (bug introduced since
6.01) (gdevpdf.c [1.17], gdevpdft.c [1.11], gdevpdfx.h [1.18]: 2000/05/24
20:39:30 lpd)
	- The FontDescriptor flags for non-embedded alphabetic fonts with
non-Standard encodings incorrectly identified the font as a small-caps font.
(gdevpdff.c [1.6]: 2000/05/30 23:04:23 lpd)
	- Works around the fact that Acrobat Reader won't accept /MMType1
fonts, but will accept MM Type 1 instances if they're tagged as /Type1
rather than /MMType1. (gdevpdft.c [1.12], gdevpdfw.c [1.4]: 2000/06/12
18:13:51 lpd)
	- Embedded Type 1 (but not Type 2 / 1C) fonts were written without
eexec encryption. We can't figure out how this happened, because the PDF
spec requires eexec encryption and the correct code was commented out; we
suppose this was a debugging or testing modification that got left in. (bug
introduced since 6.01) (gdevpdfe.c [1.2]: 2000/06/12 18:15:20 lpd)
	- Text in Type 3 synthesized fonts was often positioned incorrectly,
usually too far to the left. (bug introduced since 6.01) (gdevpdft.c [1.13]:
2000/06/13 16:34:42 lpd)
	- Images that ended prematurely still (again?) weren't written
correctly. (gdevpdfj.c [1.4]: 2000/06/27 06:32:03 lpd)

Implements ImageType 3 images in the PDF writer. (gdevpdfb.c [1.1],
gdevpdfg.h [1.6], gdevpdfi.c [1.16], gdevpdfj.c [1.3], gdevpdfx.h [1.16]:
2000/04/30 06:21:58 lpd)

Implements PatternType 2 patterns and shfill in the PDF writer.
(gdevpdfc.c [1.11], gdevpdfg.h [1.7], gdevpdfo.c [1.3], gdevpdfo.h [1.3],
gdevpdfv.c [1.1], gdevpdfx.h [1.17]: 2000/05/02 07:14:58 lpd)

</pre><h2><a name="6.22 Interpreter (PDF)"></a>Interpreter (PDF)</h2><pre>

Fixes problems:
	- PatternType 2 (shaded) Patterns caused errors.
(lib/pdf_draw.ps [1.14]: 2000/05/02 07:03:09 lpd)
	- -q (-dQUIET) didn't suppress all warnings from the PDF
interpreter. (lib/pdf_base.ps [1.8]: 2000/05/07 15:51:18 lpd)
	- FunctionType 3 functions with indirect /Bounds or /Encode entries
caused a typecheck error. (lib/pdf_draw.ps [1.15]: 2000/06/07 19:08:00 lpd)
	- If the TR element of an ExtGState was an array of Functions (for
setcolortransfer) rather a single Function (for settransfer), an error
occurred. (fix from Artifex) (lib/pdf_draw.ps [1.16]: 2000/06/12 00:40:45
lpd)
	- The code for keeping the Install procedure from getting more and
more deeply nested didn't actually work, and also caused pages with a
non-zero MediaBox offset to be translated incorrectly.
(lib/pdf_main.ps [1.8]: 2000/06/12 19:17:03 lpd)
	- PDF files with embedded TrueType fonts didn't map characters to
glyph indices correctly (i.e., using the same algorithm as Acrobat Reader).
(lib/pdf_font.ps [1.8]: 2000/06/21 02:15:01 lpd)
	- The built-in Identity CMaps had an incorrect entry count for
begincodespacerange and begincidrange; these CMaps, and all Type 0 fonts,
were constructed in a way that was incompatible with some old Adobe font
loading software. (lib/pdf_font.ps [1.9]: 2000/06/28 01:36:30 lpd)
	- If PDF interpretation was included in the build, the very first
line of a non-PDF file wouldn't be processed (if applicable) as a comment.
(lib/pdf_main.ps [1.9]: 2000/06/29 15:55:13 lpd)

</pre><h2><a name="6.22 Interpreter"></a>Interpreter</h2><pre>

Fixes problems:
	- localfork didn't properly initialize userdict in the new context.
(lib/gs_dps.ps [1.2]: 2000/05/01 07:20:37 lpd)
	- A null Pattern color caused an error. (zcolor2.c [1.2]: 2000/05/01
15:15:06 lpd)
	- Fixes minor syntactic incompatibilities with "traditional C"
compilers. (zbfont.c [1.5], zfcid0.c [1.3]: 2000/05/11 16:14:51 lpd)
	- The 'monitor' operator was broken (probably had never been
tried!). (zcontext.c [1.2]: 2000/05/15 19:14:25 lpd)
	- -dSTRICT caused an error, /undefined in SIZES.
(lib/gs_statd.ps [1.3]: 2000/05/17 19:17:40 lpd)
	- CFF CID fonts in which the FDSelect array occurred before the
CharStrings caused an error. (lib/gs_cff.ps [1.5]: 2000/05/17 20:39:20 lpd)
	- dict_matrix3_param didn't work correctly on platforms where the
compiler aligned structures to a boundary larger than sizeof(float), causing
incorrect output or arithmetic exceptions for CIE color spaces.
(zcie.c [1.2]: 2000/05/18 19:02:25 lpd)
	- Flushing or closing a procedure-based output stream still wasn't
implemented correctly (it could cause an endless loop). (zfproc.c [1.3]:
2000/05/19 19:35:01 lpd)
	- 'monitor' left its operand on the stack. (zcontext.c [1.3]:
2000/05/22 21:15:23 lpd)
	- The definitions of user names weren't properly associated with
local VM (they were stored in a static variable). (btoken.h [1.2],
iref.h [1.2], iscanbin.c [1.3], zbseq.c [1.2], zdps.c [1.2]: 2000/05/26
02:27:58 lpd)
	- Invoking an image operator with an empty string data source caused
an infinite loop. (zimage.c [1.4]: 2000/05/30 03:43:19 lpd)
	- The fix for associating the user name array with local VM didn't
create the user name table properly for new contexts with their own local
VM. The user name array is now created lazily. (btoken.h [1.3],
iscanbin.c [1.4], zbseq.c [1.3], zdps.c [1.3]: 2000/05/30 04:38:26 lpd)
	- As a result of the fix removing the incorrect same-local-VM check
in context_state_load, userparams wasn't updated properly when switching
contexts. (icontext.c [1.3]: 2000/05/30 20:40:17 lpd)
	- MAX_HALF_INTVAL was defined incorrectly, causing the mul operator
to run slower than necessary when multiplying two small integers.
(zarith.c [1.2]: 2000/06/04 17:00:29 lpd)
	- Shadings with an array of Functions caused a rangecheck or
typecheck error. (zshade.c [1.2]: 2000/06/04 18:26:17 lpd)
	- If the new value of a device parameter was an array with some
integers and some reals, and the first element was a real, a typecheck error
would occur. (iparam.c [1.4]: 2000/06/19 22:22:51 lpd)
	- PDF files with embedded TrueType fonts didn't map characters to
glyph indices correctly (i.e., using the same algorithm as Acrobat Reader).
(lib/gs_agl.ps [1.1], lib/gs_ttf.ps [1.5]: 2000/06/21 02:15:01 lpd)
	- The dictionary used to hold Encodings wasn't large enough.
(lib/gs_init.ps [1.10]: 2000/06/27 17:55:05 lpd)
	- The change in parameter type checking required for the new
Process[DSC]Comment user parameters broke type checking for system
parameters. (lib/gs_lev2.ps [1.4]: 2000/06/27 17:56:04 lpd)
	- Calling out to process a comment during scanning left an extra
element on the operand stack if the comment appeared within { }.
(ztoken.c [1.3]: 2000/06/28 00:47:05 lpd)
	- In some cases, two successive DSC comments produced a syntaxerror.
(ztoken.c [1.4]: 2000/06/28 05:14:17 lpd)
	- The code for registering compiled fonts was sensitive to its
position in the order of loading the initialization files (caused an error
if loaded too early). (lib/gs_ccfnt.ps [1.3]: 2000/06/29 23:31:14 lpd)
	- [gs_]currentgray didn't return the correct value if the current
color space was a DeviceN space using the alternate space. (zcolor.c [1.3],
zcolor1.c [1.2]: 2000/07/03 15:28:26 lpd)

Adds predefined pdfwrite settings similar to the three standard settings in
Adobe Acrobat Distiller 4, plus a "default" setting, with
-dPDFSETTINGS=/settingname. (lib/gs_pdfwr.ps [1.4]: 2000/04/29 02:29:21 lpd)

Increments the version number to 6.23. From now on, we use odd numbers
during development, even numbers for released filesets.
(lib/gs_init.ps [1.8]: 2000/04/29 16:49:43 lpd)

Changes .buildfont1 to accept Type 1 fonts with LanguageGroup other than 0
or 1. This is contrary to the spec, but we've seen a few fonts with other
values. (zfont1.c [1.5]: 2000/05/06 08:19:37 lpd)

Cleans up code and comments slightly. (lib/gs_dps.ps [1.3]: 2000/05/30
20:35:56 lpd)

Adds user parameters ProcessComment and ProcessDSCComment. If not null,
these procedures are called with the file and the comment line whenever the
scanner detects a comment (or non-DSC comment) or DSC comment. NOTE: the
interpreter is currently patched so that ProcessComment is never called.
(interp.c [1.4], iscan.c [1.2], iscan.h [1.2], lib/gs_init.ps [1.9],
lib/gs_lev2.ps [1.3], ztoken.c [1.2], ztype.c [1.2]: 2000/06/27 00:53:38
lpd)

Finishes implementing the Process[DSC]Comment callout. (icontext.c [1.4],
icstate.h [1.3], interp.c [1.5], iscan.h [1.3], itoken.h [1.1],
lib/gs_init.ps [1.11], ztoken.c [1.5], zusparam.c [1.2]: 2000/06/28 20:17:00
lpd)

Changes the name of the unread operator to .unread, retaining unread as a
synonym for backward compatibility. (lib/gs_init.ps [1.12], zfileio.c [1.7]:
2000/06/29 15:58:24 lpd)

Adds a findprotodevice "operator", to find a device prototype by name.
(lib/gs_init.ps [1.13]: 2000/07/05 04:49:11 lpd)

Changes the version numbering system back to sequential (not odd/even).
Between numbered filesets, GS_PRODUCT will say "CVS PRE-RELEASE".
(lib/gs_init.ps [1.14]: 2000/07/05 17:23:54 lpd)

</pre><h2><a name="6.22 Streams"></a>Streams</h2><pre>

Fixes problems:
	- file_limit wasn't initialized properly in some cases.
(sfxfd.c [1.4], sfxstdio.c [1.3]: 2000/05/02 02:06:41 lpd)
	- smd5.c didn't compile properly with "traditional C" compilers.
(smd5.c [1.2]: 2000/05/19 06:08:01 lpd)
	- The workaround for Microsoft C's omission of O_APPEND et al caused
warnings or errors with other compilers. (stat_.h [1.3]: 2000/07/03 21:07:05
lpd)

Works around the fact that Microsoft Visual C++ (only) doesn't define the O_
flags for the `open' library call. (stat_.h [1.2]: 2000/05/31 20:34:43 lpd)

Finishes working around the fact that Microsoft C, in defiance of multiple
standards, by default doesn't define the O_ flags for 'open' in fcntl.h (or
anywhere else). (stat_.h [1.4]: 2000/07/05 00:48:21 lpd)

</pre><h2><a name="6.22 Library"></a>Library</h2><pre>

Fixes problems:
	- A null Pattern color caused an error. (gspcolor.c [1.2]:
2000/05/01 15:15:07 lpd)
	- A procedure name exceeded VMS's 31-character limit.
(gsparam.h [1.6]: 2000/05/02 01:47:50 lpd)
	- If the DataSource of a shading was a reusable stream, the stream
wasn't reset before rendering the shading. (gxshade.c [1.2]: 2000/05/02
07:05:10 lpd)
	- shfill didn't go through the device fill_path procedure,
preventing it from being written out as a high-level PostScript or PDF
construct. (gscolor3.c [1.2]: 2000/05/02 07:06:23 lpd)
	- Once again, corrects an incorrect dependency list.
(gscolor3.c [1.3]: 2000/05/02 07:14:11 lpd)
	- The code for adding elements to small-string free lists was wrong,
possibly causing an endless loop. (gsnogc.c [1.3]: 2000/05/04 01:29:53 lpd)
	- Fixes minor syntactic incompatibilities with "traditional C"
compilers. (gsfunc4.c [1.2], gstype42.c [1.5]: 2000/05/11 16:14:51 lpd)
	- CIEBasedDEF[G] color spaces computed incorrect results or caused
invalid memory accesses, especially if DecodeDEF[G] is not the identity
function. (This bug had probably been there since these color spaces were
first implemented, unnoticed because DecodeDEF[G] is almost always the
identity.) (gscie.c [1.2], gsciemap.c [1.2], gxctable.c [1.2]: 2000/05/15
19:58:38 lpd)
	- Temporary files weren't created as private or exclusive.
(close_.h [1.1], gp_unifs.c [1.2], gpmisc.c [1.1], gpmisc.h [1.1]:
2000/05/19 17:52:51 lpd)
	- OutputFile values starting with a %d format string caused an
error. (bug introduced in 5.85) (gsdevice.c [1.4]: 2000/05/20 06:58:11 lpd)
	- In rare cases, an overflow could occur in the filling loop,
producing distorted output. (Fix from Artifex Software.) (gxfill.c [1.3]:
2000/05/23 05:46:52 lpd)
	- When writing PDF or PostScript, stroked rectangles could sometimes
be omitted from the output. (gdevvec.c [1.3]: 2000/05/24 18:48:14 lpd)
	- In PDF output, the conversion of Type 1 to Type 2 CharStrings
didn't adjust the X offset of the accent for 'seac', causing accents to be
displaced to the right. (gdevpsfx.c [1.3]: 2000/05/24 23:20:43 lpd)
	- The definitions of user names weren't properly associated with
local VM (they were stored in a static variable). (gsalloc.c [1.3],
gxalloc.h [1.2]: 2000/05/26 02:27:58 lpd)
	- The change for local user names didn't update the structure
descriptor for gs_ref_memory_t. (gsalloc.c [1.4], gxalloc.h [1.3]:
2000/05/26 02:33:38 lpd)
	- The fix for 'seac' when converting Type 1 to Type 2 CharStrings
wasn't quite complete. (gdevpsfx.c [1.4]: 2000/05/26 20:48:37 lpd)
	- If [eo]clip set a rectangular region, clippath would return the
rounded clipping box, not the correct clipping path. (gxcpath.c [1.2]:
2000/05/31 22:20:04 lpd)
	- ShadingType 2 shadings could cause an invalid memory access.
(gsfunc3.c [1.3]: 2000/06/04 18:25:33 lpd)
	- Printer drivers that didn't implement print_page_copies didn't
print multiple copies of the same page on separate files if the OutputFile
name included %d, and some drivers (such as the TIFF drivers) produced
invalid output. (gdevprn.c [1.4]: 2000/06/05 02:04:26 lpd)
	- 32-bit sample values in shading data didn't work, because some
CPUs execute (1 << 32) as (1 << 0). (gxshade.c [1.3]: 2000/06/07 19:07:17
lpd)
	- Type 1 fonts without eexec encryption still included the 4 eexec
padding bytes. (bug probably introduced since 6.0) (gdevpsf1.c [1.4]:
2000/06/12 17:38:48 lpd)
	- Axial shadings with a non-orthogonal CTM could fail to fill the
required region. (fix from Artifex) (gxshade1.c [1.4]: 2000/06/12 21:45:19
lpd)
	- When allocator debugging was enabled (-Z@), 'restore' didn't clear
vacated space in inner chunks. (gsalloc.c [1.5]: 2000/06/13 07:04:18 lpd)
	- the row buffers for images weren't allocated with a stable
allocator, possibly causing data corruption or invalid accesses if a
PostScript program invoked save/restore within the data-reading procedure
for an image. (gsimage.c [1.2]: 2000/06/13 07:05:21 lpd)
	- Rendering TrueType fonts didn't adjust the flatness to ensure
accurate results. (gstype42.c [1.6], gxchrout.c [1.1], gxchrout.h [1.1],
gxtype1.c [1.5]: 2000/06/20 15:46:53 lpd)
	- Calling get_params with a static (read-only) device prototype
could cause a memory access error. (gsdparam.c [1.3]: 2000/06/22 14:05:49
lpd)
	- [gs_]currentgray didn't return the correct value if the current
color space was a DeviceN space using the alternate space. (gscolor.c [1.2],
gscolor.h [1.2], gscolor1.c [1.2]: 2000/07/03 15:28:26 lpd)
	- Some picky compilers complained about "integer constant is
unsigned in ANSI C, signed with -traditional". (md5.c [1.2]: 2000/07/03
21:55:18 lpd)
	- If TMPDIR wasn't defined, TEMP would be ignored. (bug introduced
in 6.23) (gpmisc.c [1.4]: 2000/07/04 19:54:00 lpd)
	- Watcom C requires the non-standard O_BINARY mode flag when opening
(with open) a file that will later be opened in binary mode with fdopen.
(gpmisc.c [1.6]: 2000/07/05 17:08:27 lpd)

Restructures the code for handling ImageType 3 images, for the benefit of
the PDF writer. (gximage3.c [1.3], gximage3.h [1.1]: 2000/04/30 03:08:15
lpd)

Implements ImageType 3 images in the PDF writer. (gximage3.c [1.4],
gximage3.h [1.2]: 2000/04/30 06:21:58 lpd)

Creates a procs structure for shadings, moving the fill_rectangle procedure
into it, in anticipation of adding a get_params procedure. (gsshade.c [1.2],
gsshade.h [1.2], gxshade.h [1.2]: 2000/04/30 19:37:37 lpd)

Implements PatternType 2 patterns and shfill in the PDF writer.
(gsptype2.c [1.2]: 2000/05/02 07:14:58 lpd)

Changes gdev_prn_file_is_new from a macro to a procedure. (gdevprn.c [1.3],
gdevprn.h [1.4]: 2000/05/20 20:25:48 lpd)

Works around the fact that Microsoft Visual C++ defines S_IREAD and S_IWRITE
but not their newer equivalents S_IRUSR and S_IWUSR. (gpmisc.c [1.2]:
2000/05/24 18:49:54 lpd)

Changes some assignments to work around over-zealous compiler warnings.
(gxtype1.c [1.4]: 2000/05/24 23:52:58 lpd)

Works around the fact that Microsoft Visual C++ (only) doesn't define the O_
flags for the `open' library call. (gpmisc.c [1.3]: 2000/05/31 20:34:43 lpd)

Improves some comments in A_fill_stripe. (gxshade1.c [1.3]: 2000/06/04
20:58:23 lpd)

Finishes working around the fact that Microsoft C, in defiance of multiple
standards, by default doesn't define the O_ flags for 'open' in fcntl.h (or
anywhere else). (fcntl_.h [1.1], gpmisc.c [1.5]: 2000/07/05 00:48:21 lpd)

Adds O_BINARY to the Microsoft compatibility fcntl.h patch. (fcntl_.h [1.2]:
2000/07/05 17:21:43 lpd)

Changes the version numbering system back to sequential (not odd/even).
Between numbered filesets, GS_PRODUCT will say "CVS PRE-RELEASE".
(gscdef.c [1.3]: 2000/07/05 17:23:54 lpd)

Updates GS_PRODUCT for making a fileset. (gscdef.c [1.4]: 2000/07/06
00:01:03 lpd)

<hr>

<h1><a name="Version6.21"></a>Version 6.21 (2000-04-28)</h1>

<p>
This fileset includes more PDF writer enhancements: conversion of embedded
Type 1 fonts to Type 1C (smaller), handling of more color spaces for images,
ImageType 4 images, compression of mask images, support for (tiled) Pattern
colors, more graphics state distiller parameters, recording of graphics
state functions in the output.  It also greatly improves the space usage and
loading time for CMaps.

<p>
All problems registered on SourceForge numbered 104890 or lower are closed,
except for the following: 101549, 101814, 101905, 101955, 102146, 102735,
103528, 104118, 104375.

<p>
The following projects are in a partially completed state in the PDF writer:

<ul>

<li>CID-keyed fonts (gdevpdf[eftw].c) -- barely started.

<li>ImageType 3 images (gdevpdf[ij].c) -- started.

</ul>

<pre>

<h2><a name="6.21_Incompatible_changes"></a>Incompatible changes</h2>

(Drivers)
	- The downsampling filters now require WidthIn and HeightIn,
replacing Columns.
	- The gp_ procedures for managing screen swapping between console
and graphics are removed.
	- Any driver that processes the pdfmark pseudo-parameter must now
also return null for the "value" of the pdfmark parameter when (and only
when) specifically requested.
(PDF writer)
	- The last argument of pdf_alloc_font has changed.
	- pdf_set_color is renamed pdf_set_pure_color.
	- When producing PDF 1.3 output, the base 14 fonts are now
candidates for embedding just like any other fonts.
(Interpreter)
	- The .fontproperties procedure in gs_fonts.ps now takes an
additional argument.
	- The interpreter must no longer reference stdin/out/err directly.
(Library)
	- The internal representation of CMaps is changed completely, and
has several new required members.
	- gs_cmap is renamed gs_cmap_t; gx_code_map is renamed
gx_code_map_t.
	- Clients creating CMaps must call gs_cmap_init to initialize them.
	- The library must no longer reference stdin/out/err directly.


<h2><a name="6.21 Documentation"></a>Documentation</h2><pre>

Fixes problems:
	- The PDF writer could get an ioerror when downsampling images whose
size wasn't an exact multiple of the downsampling factor.
(doc/News.htm [1.31]: 2000/04/13 16:44:59 lpd)
	- When processing a PDF file, the font substitution heuristic based
on the FontName sometimes overrode the Flags information in the
FontDescriptor. (doc/News.htm [1.34]: 2000/04/20 06:36:02 lpd)
	- When pdfwrite was producing PDF 1.3 output, the base 14 fonts were
never embedded, rather than being handled like all other fonts.
(doc/News.htm [1.37]: 2000/04/20 23:49:40 lpd)
	- The URL for the Arphic free Chinese fonts had become incorrect.
(doc/Fonts.htm [1.3]: 2000/04/27 13:44:52 lpd)
	- Fixes a few typos, and adds GS_FONTPATH to the list of environment
variables to be unset for a pristine test run. (doc/Release.htm [1.10]:
2000/04/28 22:08:41 lpd)

Adds projects related to SVG and to pswrite image compression.
(doc/Projects.htm [1.4]: 2000/04/07 18:39:12 lpd)

Makes the ps2pdf scripts replace a .eps extension with .pdf, as they do with
.ps. (doc/Ps2pdf.htm [1.7], man/ps2pdf.1 [1.5], man/ps2pdfwr.1 [1.2]:
2000/04/07 19:28:14 lpd)

Completely redesigns the representation of CMaps, to reduce space
requirements and make comparing them more reasonable, changing gs_cmap to
gs_cmap_t and gx_code_map to gx_code_map_t. (****** NOTE ****** The
PostScript code currently only handles a few well-behaved CMap structures.)
(doc/News.htm [1.27]: 2000/04/08 03:54:38 lpd)

Documents the need to set SYNC=nosync on NextStep / OpenStep systems.
(doc/Make.htm [1.10]: 2000/04/10 04:45:37 lpd)

Overhauls font embedding in the PDF writer: splits off the code into a new
file (gdevpdfe.c), writes embedded Type 1 fonts as Type 1C (CFF Type 2), and
adds a little bit of code for future support of Type 0 and CID-keyed fonts.
(doc/News.htm [1.28]: 2000/04/10 07:48:37 lpd)

Documents the fact that building on NeXTSTEP 3.3 systems requires removing
-Wmissing-declarations from GCFLAGS. (doc/Make.htm [1.11]: 2000/04/11
14:06:54 lpd)

Enhances pdf2ps to allow defaulting the output file name.
(man/pdf2ps.1 [1.2]: 2000/04/11 14:23:24 lpd)

Factors out code for writing functions and for adding filter-related entries
to a stream dictionary; implements the DefaultRenderingIntent distiller
parameter. (doc/Ps2pdf.htm [1.8]: 2000/04/11 16:06:57 lpd)

Implements additional distiller parameters: PreserveHalftoneInfo,
PreserveOverprintSetting, TransferFunctionInfo (except for Apply vs.
Remove), UCRandBGInfo. Splits off graphics state management into separate
files. Implements the remaining graphics state parameters (halftone,
transfer function, black generation, undercolor removal, halftone phase,
smoothness, overprint, stroke adjustment) ****** EXCEPT FOR IMAGES ******.
In anticipation of handling more general colors, renames pdf_set_color as
pdf_set_pure_color, and adds pdf_set_drawing_color. (doc/News.htm [1.29]:
2000/04/11 18:31:32 lpd)

Updates documentation to match recent changes in the pdfwrite driver.
(doc/Ps2pdf.htm [1.9]: 2000/04/11 22:56:17 lpd)

Makes the second argument of the pfbtopfa script optional, so 'pfbtopfa
dir/x.pfb' is equivalent to 'pfbtopfa dir/x.pfb x.pfa'.
(man/pfbtopfa.1 [1.2]: 2000/04/12 17:41:41 lpd)

In pdfwrite, rewrites the image writing code to use Cos objects rather than
direct printing, and splits off the creation of image dictionaries into a
new file; adds support for tiling with uncolored Patterns; implements
converting ImageType 4 images to their PDF 1.3 counterpart; starts to do the
same for ImageType 3. This code is "in progress" and likely to have problems
for a while. (doc/News.htm [1.30]: 2000/04/12 18:44:35 lpd)

Implements pdfwrite compression for mask images, using the same parameters
as for monochrome images. (doc/News.htm [1.32]: 2000/04/13 18:40:23 lpd)

Adds user-contributed uniprint parameter files for the Canon BJC-8200,
including an addition for the Red Hat printer data base.
(doc/Devices.htm [1.4]: 2000/04/14 03:59:57 lpd)

Slightly updates the user-contributed documentation on the new BJC-8200
uniprint parameters. (doc/Devices.htm [1.5]: 2000/04/15 00:20:54 lpd)

Completes code for reading and writing CMaps. (doc/News.htm [1.33]:
2000/04/16 03:05:29 lpd)

Clarifies some details of posting releases on SourceForge.
(doc/Release.htm [1.9]: 2000/04/17 22:59:24 lpd)

Converts the ps2epsi documentation to HTML. (doc/Ps2epsi.htm [1.1],
doc/Readme.htm [1.6], doc/ps2epsi.txt [1.2]: 2000/04/18 17:59:13 lpd)

Adds a couple of graphics library optimization projects.
(doc/Projects.htm [1.5]: 2000/04/19 04:05:11 lpd)

Adds a project for creating an OutputDevice resource instance for each
device. (doc/Projects.htm [1.6]: 2000/04/19 21:37:47 lpd)

Checks in the accumulated change log. (doc/Changes.htm [1.10]: 2000/04/20
07:24:22 lpd)

Removes the gp_ procedures for managing screen swapping between console and
graphics, which haven't been used for a long time and are no longer useful.
(doc/News.htm [1.35]: 2000/04/20 22:47:35 lpd)

Removes all remaining direct references to stdin/out/err from the library,
interpreter, and non-contributed drivers; moves the ersatz definitions of
stdin/out/err to a new header file. (doc/News.htm [1.36]: 2000/04/20
23:30:22 lpd)

Reduces the startup time for displaying PDF files, by skipping the creation
of pdfmarks for annotations and outlines when the output device doesn't
process pdfmarks. (doc/News.htm [1.38]: 2000/04/21 16:58:28 lpd)

Notes that even if SHARE_JPEG=1, the IJG library sources are required.
(doc/Make.htm [1.12]: 2000/04/27 07:39:05 lpd)

Documents the new -dPrinted[=true/false] switch for PDF files.
(doc/Use.htm [1.3]: 2000/04/27 08:17:05 lpd)

Adds a MD5Encode filter, which computes the 16-byte MD5 digest of the input.
No output is produced until the filter is closed. (doc/Language.htm [1.2]:
2000/04/27 14:39:57 lpd)

Updates the description of the project to produce higher-level PCL output.
(doc/Projects.htm [1.7]: 2000/04/28 10:42:02 lpd)

Adds a sample file containing a wide variety of PDF annotations; updates
documentation for this and some other overlooked files.
(doc/Psfiles.htm [1.4]: 2000/04/28 10:51:02 lpd)

Notes that the uniprint dnj750c.upp parameters are also good for the 450C.
(doc/Devices.htm [1.6]: 2000/04/28 14:27:02 lpd)

Updates release dates. (man/pdf2ps.1 [1.3], man/ps2ps.1 [1.5]: 2000/04/28
18:29:32 lpd)

Updates version numbers and dates for the 6.21 fileset.
(doc/Bug-form.htm [1.6], doc/Devices.htm [1.7], doc/Fonts.htm [1.4],
doc/Language.htm [1.3], doc/Make.htm [1.13], doc/Projects.htm [1.8],
doc/Ps2epsi.htm [1.2], doc/Psfiles.htm [1.5], doc/Readme.htm [1.7],
doc/Use.htm [1.4]: 2000/04/28 22:06:25 lpd)

Updates the news for the 6.21 fileset. (doc/News.htm [1.39]: 2000/04/28
22:18:16 lpd)

</pre><h2><a name="6.21 Procedures"></a>Procedures</h2><pre>

Fixes problems:
	- Some makefile macros were used before being defined.
(devs.mak [1.9], lib.mak [1.9]: 2000/04/07 16:02:03 lpd)
	- `make install-data' didn't install lib/gs_frsd.ps or
lib/pdfopt.ps. (unixinst.mak [1.7]: 2000/04/07 19:17:48 lpd)
	- gsmake would get into a loop if the makefile was not a symbolic
link; `gsmake check' didn't accept a makefile name on the command line.
(toolbin/gsmake.tcl [1.2]: 2000/04/07 19:37:21 lpd)
	- `makemaster' referred to an undefined variable. (How could it ever
have worked?) (toolbin/makeset.tcl [1.3]: 2000/04/07 19:39:27 lpd)
	- A dependency wasn't updated when moving the gdevpsf* rules from
devs.mak to lib.mak. (lib.mak [1.10]: 2000/04/07 19:40:25 lpd)
	- The dependencies in the makefile weren't updated for the pdfwrite
font embedding overhaul. (devs.mak [1.11]: 2000/04/10 18:57:33 lpd)
	- Once again, the dependencies hadn't been updated. (int.mak [1.17]:
2000/04/11 15:59:42 lpd)
	- Setting pdfwrite parameters for a DCTEncode filter could cause a
crash (memory fault). (devs.mak [1.16]: 2000/04/13 01:53:07 lpd)
	- `make install' didn't install all the documentation files.
(unixinst.mak [1.9]: 2000/04/14 04:06:13 lpd)
	- The Color LaserJet 5 drivers were incorrectly identified as
"supported" rather than "contributed". (contrib.mak [1.7], devs.mak [1.17]:
2000/04/20 17:12:54 lpd)
	- PDF images with a bitmap Mask caused errors or produced incorrect
output. (int.mak [1.20]: 2000/04/24 00:59:04 lpd)

Completely redesigns the representation of CMaps, to reduce space
requirements and make comparing them more reasonable, changing gs_cmap to
gs_cmap_t and gx_code_map to gx_code_map_t. (****** NOTE ****** The
PostScript code currently only handles a few well-behaved CMap structures.)
(int.mak [1.16]: 2000/04/08 03:54:38 lpd)

Updates version #s to 6.21. (We should have done this earlier.)
(version.mak [1.12]: 2000/04/10 04:46:36 lpd)

Overhauls font embedding in the PDF writer: splits off the code into a new
file (gdevpdfe.c), writes embedded Type 1 fonts as Type 1C (CFF Type 2), and
adds a little bit of code for future support of Type 0 and CID-keyed fonts.
(devs.mak [1.10]: 2000/04/10 07:48:37 lpd)

Adds Function-based tint_transform procedures for Separation and DeviceN
color spaces. (lib.mak [1.11]: 2000/04/10 19:02:19 lpd)

Factors out code for writing functions and for adding filter-related entries
to a stream dictionary; implements the DefaultRenderingIntent distiller
parameter. (devs.mak [1.12]: 2000/04/11 16:06:57 lpd)

Implements additional distiller parameters: PreserveHalftoneInfo,
PreserveOverprintSetting, TransferFunctionInfo (except for Apply vs.
Remove), UCRandBGInfo. Splits off graphics state management into separate
files. Implements the remaining graphics state parameters (halftone,
transfer function, black generation, undercolor removal, halftone phase,
smoothness, overprint, stroke adjustment) ****** EXCEPT FOR IMAGES ******.
In anticipation of handling more general colors, renames pdf_set_color as
pdf_set_pure_color, and adds pdf_set_drawing_color. (devs.mak [1.13]:
2000/04/11 18:31:32 lpd)

Splits off creation and writing of color spaces, and writing color values,
into a separate file. Adds support for (Function-based) Separation and
DeviceN color spaces, general Pattern color spaces, and procedure-based
Indexed color spaces. Adds some code to support Pattern colors, but stubs it
out because it depends on changes in the image writing code that haven't
been integrated yet. In fact, most of the new code isn't called yet, either.
(devs.mak [1.14]: 2000/04/11 19:10:13 lpd)

In pdfwrite, rewrites the image writing code to use Cos objects rather than
direct printing, and splits off the creation of image dictionaries into a
new file; adds support for tiling with uncolored Patterns; implements
converting ImageType 4 images to their PDF 1.3 counterpart; starts to do the
same for ImageType 3. This code is "in progress" and likely to have problems
for a while. (devs.mak [1.15]: 2000/04/12 18:44:35 lpd)

Adds user-contributed uniprint parameter files for the Canon BJC-8200,
including an addition for the Red Hat printer data base.
(unixinst.mak [1.8]: 2000/04/14 03:59:57 lpd)

Adds code to write out CMaps, similar to the code for writing fonts, for
eventual embedding in PDF output. (int.mak [1.18], lib.mak [1.12]:
2000/04/14 07:17:24 lpd)

Completes code for reading and writing CMaps. (int.mak [1.19],
lib.mak [1.13]: 2000/04/16 03:05:29 lpd)

Adds a user-contributed driver for the Epson Stylus (Color) Photo printers.
(contrib.mak [1.6]: 2000/04/18 06:34:26 lpd)

Converts the ps2epsi documentation to HTML. (unixinst.mak [1.10]: 2000/04/18
17:59:13 lpd)

Checks in the accumulated change log. (version.mak [1.13]: 2000/04/20
07:24:22 lpd)

Converts the bmp* and bmpa* devices to -dev2, to make them const.
(devs.mak [1.18]: 2000/04/20 17:19:21 lpd)

Removes the gp_ procedures for managing screen swapping between console and
graphics, which haven't been used for a long time and are no longer useful.
(dvx-tail.mak [1.2], lib.mak [1.14], openvms.mak [1.3], openvms.mmk [1.4],
os2.mak [1.5], unix-aux.mak [1.2], watc.mak [1.3], watclib.mak [1.3],
winlib.mak [1.2]: 2000/04/20 22:47:35 lpd)

Removes all remaining direct references to stdin/out/err from the library,
interpreter, and non-contributed drivers; moves the ersatz definitions of
stdin/out/err to a new header file. (lib.mak [1.15], unix-gcc.mak [1.5]:
2000/04/20 23:30:22 lpd)

Adds compression for pdfwrite Patterns. (devs.mak [1.19]: 2000/04/24
06:13:02 lpd)

Adds a MD5Encode filter, which computes the 16-byte MD5 digest of the input.
No output is produced until the filter is closed. (devs.mak [1.20],
int.mak [1.21], lib.mak [1.16]: 2000/04/27 14:39:57 lpd)

Adds a user-contributed driver for the H-P 970Cxi inkjet printer.
(contrib.mak [1.8]: 2000/04/27 14:55:56 lpd)

Factors the H-P monochrome laser and inkjet drivers into a generic driver
and printer-specific clients. (devs.mak [1.21]: 2000/04/27 20:16:33 lpd)

Adds a user-contributed driver for the Brother HL-1250 laser printer. This
has a dual AFPL/GPL license, and a non-Aladdin copyright.
(contrib.mak [1.9]: 2000/04/27 20:18:39 lpd)

Once again, updates some dependency lists that had become inconsistent with
the code. (contrib.mak [1.10], devs.mak [1.22], lib.mak [1.17]: 2000/04/27
21:36:19 lpd)

Yet again, updates an out-of-date dependency list. (contrib.mak [1.11]:
2000/04/28 18:28:42 lpd)

Changes the check for documentation files having the correct embedded date.
(toolbin/pre [1.3]: 2000/04/28 18:29:14 lpd)

Updates version numbers and dates for the 6.21 fileset. (version.mak [1.14]:
2000/04/28 22:06:26 lpd)

</pre><h2><a name="6.21 Utilities"></a>Utilities</h2><pre>

Fixes problems:
	- The e-mail address for reporting problems was out of date.
(lib/ps2epsi.ps [1.2]: 2000/04/10 02:27:21 lpd)
	- If a font didn't have a FontName (which is the case for bitmap
fonts produced by recent versions of dvips), ps2epsi caused an error.
(lib/ps2epsi.ps [1.3]: 2000/04/11 16:32:51 lpd)
	- Backs out contributed changes of 2000-03-05 because of bugs.
(ansi2knr.c [1.3]: 2000/04/13 03:41:48 lpd)
	- ps2epsi removed all ^M characters in the input, possibly
corrupting binary data. (lib/ps2epsi [1.2]: 2000/04/27 01:44:04 lpd)

Makes the ps2pdf scripts replace a .eps extension with .pdf, as they do with
.ps. (lib/ps2pdfwr [1.2], lib/ps2pdfxx.bat [1.2]: 2000/04/07 19:28:14 lpd)

Enhances pdf2ps to allow defaulting the output file name. (lib/pdf2ps [1.2]:
2000/04/11 14:23:24 lpd)

Makes the second argument of the pfbtopfa script optional, so 'pfbtopfa
dir/x.pfb' is equivalent to 'pfbtopfa dir/x.pfb x.pfa'. (lib/pfbtopfa [1.2]:
2000/04/12 17:41:41 lpd)

Adds user-contributed uniprint parameter files for the Canon BJC-8200,
including an addition for the Red Hat printer data base. (lib/bj8.rpd [1.1]:
2000/04/14 03:59:57 lpd)

Increases the VMThreshold when converting PostScript to PDF, to reduce
garbage collection overhead. (lib/ps2pdfwr [1.3]: 2000/04/17 19:06:58 lpd)

Moves the optimization prologue for ps2pdf from the command line to a
procedure, to avoid shell length limits. (lib/ps2pdfwr [1.4],
lib/ps2pdfxx.bat [1.3]: 2000/04/18 16:40:14 lpd)

Removes the gp_ procedures for managing screen swapping between console and
graphics, which haven't been used for a long time and are no longer useful.
(bench.c [1.2], gp_dosfb.c [1.2], gp_iwatc.c [1.2], gp_nofb.c [1.2]:
2000/04/20 22:47:35 lpd)

Checks in a file overlooked in the elimination of the gp_ console
procedures. (gp_os2.c [1.2]: 2000/04/20 23:27:21 lpd)

</pre><h2><a name="6.21 Drivers"></a>Drivers</h2><pre>

Fixes problems:
	- The pdfwrite driver sometimes compressed images in an Indexed
color space with the DCTEncode filter, producing garbage. (gdevpsdi.c [1.4]:
2000/04/12 19:25:56 lpd)
	- Setting pdfwrite parameters for a DCTEncode filter could cause a
crash (memory fault). (gdevpsdf.h [1.7], gdevpsdi.c [1.5], gdevpsdp.c [1.4],
gdevpsdu.c [1.2]: 2000/04/13 01:53:07 lpd)
	- Compressing with DCTEncode tried to add the compression filter
twice. (gdevpsdi.c [1.6]: 2000/04/13 04:52:38 lpd)
	- The PDF writer could get an ioerror when downsampling images whose
size wasn't an exact multiple of the downsampling factor. (gdevpsdi.c [1.7],
gdevpsds.c [1.2], gdevpsds.h [1.2]: 2000/04/13 16:44:59 lpd)
	- Downsampled mask images could cause a memory access error.
(gdevpsdi.c [1.9]: 2000/04/18 16:37:04 lpd)
	- PDF Patterns weren't written correctly if the ProcessColorModel
wasn't Device RGB. (gdevpsdu.c [1.3]: 2000/04/24 05:40:30 lpd)
	- The [e]pswrite driver produced incorrect output for color images
with multiple data sources. (gdevps.c [1.5]: 2000/04/25 19:35:07 lpd)

Implements pdfwrite compression for mask images, using the same parameters
as for monochrome images. (gdevpsdi.c [1.8]: 2000/04/13 18:40:23 lpd)

Adds user-contributed uniprint parameter files for the Canon BJC-8200,
including an addition for the Red Hat printer data base.
(lib/bj8gc12f.upp [1.1], lib/bj8hg12f.upp [1.1], lib/bj8oh06n.upp [1.1],
lib/bj8pa06n.upp [1.1], lib/bj8pp12f.upp [1.1], lib/bj8ts06n.upp [1.1]:
2000/04/14 03:59:57 lpd)

Adds a user-contributed driver for the Epson Stylus (Color) Photo printers.
(gdevphex.c [1.1]: 2000/04/18 06:34:26 lpd)

Converts the bmp* and bmpa* devices to -dev2, to make them const.
(gdevbmp.c [1.2], gdevbmpa.c [1.2]: 2000/04/20 17:19:21 lpd)

Documents the astounding fact that the Xt implementation actually writes
into the XtResource tables. (gdevxres.c [1.2]: 2000/04/20 19:59:28 lpd)

Removes all remaining direct references to stdin/out/err from the library,
interpreter, and non-contributed drivers; moves the ersatz definitions of
stdin/out/err to a new header file. (gdevxxf.c [1.3]: 2000/04/20 23:30:22
lpd)

When writing PDF output, reduces the size of compressed images in Indexed
color spaces by not using a Predictor for them. (gdevpsdi.c [1.10]:
2000/04/21 06:46:08 lpd)

Adds an internal filter for converting images to Indexed form if possible.
(gdevpsds.c [1.3], gdevpsds.h [1.3]: 2000/04/21 19:26:37 lpd)

Cleans up code by replacing macros with procedures or variables.
(gdevps.c [1.6]: 2000/04/25 20:35:46 lpd)

Makes the [e]pswrite and pdfwrite drivers merge adjacent horizontal or
vertical line segments going in the same direction. This makes a big
difference for PostScript files produced by certain applications.
(gdevps.c [1.7]: 2000/04/25 22:39:54 lpd)

Adds a user-contributed driver for the H-P 970Cxi inkjet printer.
(gdevdj9.c [1.1]: 2000/04/27 14:55:56 lpd)

Factors the H-P monochrome laser and inkjet drivers into a generic driver
and printer-specific clients. (gdevdjet.c [1.3], gdevdljm.c [1.1],
gdevdljm.h [1.1]: 2000/04/27 20:16:33 lpd)

Adds a user-contributed driver for the Brother HL-1250 laser printer. This
has a dual AFPL/GPL license, and a non-Aladdin copyright. (gdevhl12.c [1.1]:
2000/04/27 20:18:39 lpd)

Once again, updates some dependency lists that had become inconsistent with
the code. (gdevdj9.c [1.2]: 2000/04/27 21:36:19 lpd)

Makes the printers in gdevdjet.c that support setting the number of copies
use this feature when multiple copies are requested. (gdevdjet.c [1.4],
gdevdljm.c [1.2], gdevdljm.h [1.2]: 2000/04/28 13:37:47 lpd)

</pre><h2><a name="6.21 PDF writer"></a>PDF writer</h2><pre>

Fixes problems:
	- The Cos objects of resources not shared between pages weren't
freed at the end of each page. (gdevpdf.c [1.9]: 2000/04/10 04:17:56 lpd)
	- gdevpdfe.c was omitted from the check-in for the overhaul of
pdfwrite font embedding. (gdevpdfe.c [1.1]: 2000/04/10 16:01:29 lpd)
	- pdfwrite output could contain commands to set the line width to a
negative value, which PostScript allows but PDF doesn't. (gdevpdfd.c [1.6]:
2000/04/12 19:51:14 lpd)
	- The changes for the new color handling code caused stroked
graphics not to output the line width. (new bug since 6.20)
(gdevpdfd.c [1.7]: 2000/04/13 03:47:21 lpd)
	- Pattern resources were written with incorrectly scaled XStep and
YStep, and without a Type entry. (gdevpdfc.c [1.3], gdevpdfi.c [1.10]:
2000/04/13 04:12:33 lpd)
	- The PDF writer could get an ioerror when downsampling images whose
size wasn't an exact multiple of the downsampling factor.
(gdevpdfi.c [1.11]: 2000/04/13 16:44:59 lpd)
	- Bitmapped characters weren't written properly on the output file
(new bug since 6.20). (gdevpdfg.h [1.4], gdevpdfi.c [1.12],
gdevpdfj.c [1.2]: 2000/04/13 17:24:54 lpd)
	- gxdcolor.h was required for gxpcolor.h, but wasn't included.
(gdevpdfc.c [1.4]: 2000/04/18 17:42:55 lpd)
	- A table of constant strings wasn't declared as const.
(gdevpdfp.c [1.7]: 2000/04/20 17:37:31 lpd)
	- When pdfwrite was producing PDF 1.3 output, the base 14 fonts were
never embedded, rather than being handled like all other fonts.
(gdevpdff.c [1.4]: 2000/04/20 23:49:40 lpd)
	- Indexed color spaces used in in-line images were being written
incorrectly. Also optimizes Indexed images by converting RGB palettes to
Gray if all the entries are actually gray. (gdevpdfc.c [1.5]: 2000/04/21
15:29:20 lpd)
	- The recent optimization for using the ' command in PDF output lost
track of the leading value between blocks of text, causing lines in later
blocks to overprint each other. (gdevpdfu.c [1.9]: 2000/04/21 22:29:05 lpd)
	- Backs out the change that allowed embedding of the base 14 fonts,
because it produces invalid output. (gdevpdff.c [1.5]: 2000/04/22 00:13:11
lpd)
	- Colored Patterns requiring masking weren't written properly.
(gdevpdfc.c [1.6]: 2000/04/24 00:09:37 lpd)
	- Patterns were written upside-down. (gdevpdfc.c [1.7]: 2000/04/24
01:11:36 lpd)
	- PDF Patterns weren't written correctly if the ProcessColorModel
wasn't Device RGB. (gdevpdf.c [1.15], gdevpdfc.c [1.8], gdevpdfg.h [1.5],
gdevpdfi.c [1.13], gdevpdfx.h [1.15]: 2000/04/24 05:40:30 lpd)
	- The color space for images wasn't always written in the correct
form (an object reference for image XObjects, a resource name for in-line
images). (gdevpdfi.c [1.14]: 2000/04/28 12:07:37 lpd)
	- Patterns were sometimes written with a duplicate Type element.
(gdevpdfc.c [1.10]: 2000/04/28 12:23:54 lpd)
	- Patterns were sometimes written twice, with an empty definition
the second time. (gdevpdfi.c [1.15]: 2000/04/28 12:24:42 lpd)

Overhauls font embedding in the PDF writer: splits off the code into a new
file (gdevpdfe.c), writes embedded Type 1 fonts as Type 1C (CFF Type 2), and
adds a little bit of code for future support of Type 0 and CID-keyed fonts.
(gdevpdff.c [1.3], gdevpdff.h [1.2], gdevpdft.c [1.6], gdevpdfw.c [1.3]:
2000/04/10 07:48:37 lpd)

Factors out code for writing functions and for adding filter-related entries
to a stream dictionary; implements the DefaultRenderingIntent distiller
parameter. (gdevpdf.c [1.10], gdevpdfu.c [1.6], gdevpdfx.h [1.8]: 2000/04/11
16:06:57 lpd)

Adds ExtGState resources. These should be written and freed at the end of
each page, but they aren't yet. (gdevpdfx.h [1.9]: 2000/04/11 16:38:14 lpd)

Implements additional distiller parameters: PreserveHalftoneInfo,
PreserveOverprintSetting, TransferFunctionInfo (except for Apply vs.
Remove), UCRandBGInfo. Splits off graphics state management into separate
files. Implements the remaining graphics state parameters (halftone,
transfer function, black generation, undercolor removal, halftone phase,
smoothness, overprint, stroke adjustment) ****** EXCEPT FOR IMAGES ******.
In anticipation of handling more general colors, renames pdf_set_color as
pdf_set_pure_color, and adds pdf_set_drawing_color. (gdevpdf.c [1.11],
gdevpdfd.c [1.4], gdevpdfg.c [1.1], gdevpdfg.h [1.1], gdevpdfi.c [1.8],
gdevpdft.c [1.7], gdevpdfu.c [1.7], gdevpdfx.h [1.10]: 2000/04/11 18:31:32
lpd)

Splits off creation and writing of color spaces, and writing color values,
into a separate file. Adds support for (Function-based) Separation and
DeviceN color spaces, general Pattern color spaces, and procedure-based
Indexed color spaces. Adds some code to support Pattern colors, but stubs it
out because it depends on changes in the image writing code that haven't
been integrated yet. In fact, most of the new code isn't called yet, either.
(gdevpdf.c [1.12], gdevpdfc.c [1.1], gdevpdfd.c [1.5], gdevpdfg.c [1.2],
gdevpdfg.h [1.2], gdevpdft.c [1.8], gdevpdfx.h [1.11]: 2000/04/11 19:10:13
lpd)

Integrates a couple of minor overlooked changes in the text-writing code.
(gdevpdf.c [1.13], gdevpdft.c [1.9], gdevpdfx.h [1.12]: 2000/04/11 19:20:56
lpd)

In pdfwrite, rewrites the image writing code to use Cos objects rather than
direct printing, and splits off the creation of image dictionaries into a
new file; adds support for tiling with uncolored Patterns; implements
converting ImageType 4 images to their PDF 1.3 counterpart; starts to do the
same for ImageType 3. This code is "in progress" and likely to have problems
for a while. (gdevpdf.c [1.14], gdevpdfc.c [1.2], gdevpdfg.c [1.3],
gdevpdfg.h [1.3], gdevpdfi.c [1.9], gdevpdfj.c [1.1], gdevpdfx.h [1.13]:
2000/04/12 18:44:35 lpd)

Tweaks the PDF writer to use the ' command for positioning text when
possible (small optimization only). (gdevpdfg.c [1.4], gdevpdft.c [1.10],
gdevpdfu.c [1.8], gdevpdfx.h [1.14]: 2000/04/18 16:08:16 lpd)

Reduces the startup time for displaying PDF files, by skipping the creation
of pdfmarks for annotations and outlines when the output device doesn't
process pdfmarks. (gdevpdfp.c [1.8]: 2000/04/21 16:58:28 lpd)

Adds compression for pdfwrite Patterns. (gdevpdfc.c [1.9]: 2000/04/24
06:13:02 lpd)

Makes the [e]pswrite and pdfwrite drivers merge adjacent horizontal or
vertical line segments going in the same direction. This makes a big
difference for PostScript files produced by certain applications.
(gdevpdf.c [1.16], gdevpdfd.c [1.8]: 2000/04/25 22:39:54 lpd)

Updates the list of remaining pdfwrite tasks. (gdevpdfp.c [1.9]: 2000/04/27
21:36:52 lpd)

</pre><h2><a name="6.21 Interpreter (PDF)"></a>Interpreter (PDF)</h2><pre>

Fixes problems:
	- Embedded subset CFF fonts in PDF files were defined using the name
in the font data rather than the font name in the PDF resource object. (bug
#102901) (lib/pdf_ops.ps [1.5]: 2000/04/11 05:33:13 lpd)
	- When processing a PDF file, the font substitution heuristic based
on the FontName sometimes overrode the Flags information in the
FontDescriptor. (lib/pdf_font.ps [1.6]: 2000/04/20 06:36:02 lpd)
	- PDF images with a bitmap Mask caused errors or produced incorrect
output. (lib/pdf_draw.ps [1.10]: 2000/04/24 00:59:04 lpd)
	- Masked images weren't drawn properly, because the two data sources
could reference the same file. (lib/pdf_draw.ps [1.11]: 2000/04/24 05:39:45
lpd)
	- *Really* fixes the problem of data source aliasing for masked
images. (lib/pdf_draw.ps [1.12]: 2000/04/24 05:53:43 lpd)
	- If a font specified Subtype = /TrueType but the actual font used
was not a TrueType font, any Encoding in the Font object should be ignored.
(This is a hack required by the PDF specification.) (lib/pdf_font.ps [1.7]:
2000/04/24 06:37:18 lpd)
	- Colored annotation borders caused an error; 0-width borders were
drawn even though they shouldn't be; Link and Stamp annotations weren't
drawn at all. Also adds a new -dPrinted[=true/false] switch to choose
whether to produce "screen" or "printer" output. (code from Artifex)
(lib/pdf_draw.ps [1.13], lib/pdf_main.ps [1.7]: 2000/04/27 08:16:40 lpd)

Makes undefined XObject resources for the Do operator produce a warning
rather than an error, to parallel Acrobat Reader. (lib/pdf_draw.ps [1.9]:
2000/04/16 07:48:23 lpd)

Tweaks up the performance of the PDF interpreter loop slightly.
(lib/pdf_base.ps [1.7]: 2000/04/18 05:45:49 lpd)

Reduces the startup time for displaying PDF files, by skipping the creation
of pdfmarks for annotations and outlines when the output device doesn't
process pdfmarks. (lib/pdf_main.ps [1.6]: 2000/04/21 16:58:28 lpd)

</pre><h2><a name="6.21 Interpreter"></a>Interpreter</h2><pre>

Fixes problems:
	- Fixes some signed/unsigned char * mismatches. (zfrsd.c [1.3]:
2000/04/07 15:27:14 lpd)
	- Automatic loading of fonts from resource files didn't work
(usually caused an unmatchedmark or typecheck error).
(lib/gs_fonts.ps [1.5], lib/gs_res.ps [1.9]: 2000/04/08 03:45:41 lpd)
	- A -> should have been a . (only shows up on 64-bit systems).
(zfunc4.c [1.3]: 2000/04/09 20:04:00 lpd)
	- the most recent 'fixes' for loading font resources caused all
built-in fonts to be returned as null. (lib/gs_res.ps [1.10]: 2000/04/09
22:51:01 lpd)
	- /Category defineresource didn't make the category definition
dictionary read-only. (lib/gs_res.ps [1.11]: 2000/04/10 18:29:04 lpd)
	- Attempting to build an invalid FunctionType 4 function could cause
a memory access error. (zfunc4.c [1.4]: 2000/04/10 19:38:53 lpd)
	- Embedded subset CFF fonts in PDF files were defined using the name
in the font data rather than the font name in the PDF resource object. (bug
#102901) (lib/gs_cff.ps [1.4]: 2000/04/11 05:33:13 lpd)
	- CMaps with more than one code space range weren't converted to the
internal form correctly; begincidchar and beginnotdefchar caused errors.
(lib/gs_cmap.ps [1.3], zfcmap.c [1.6]: 2000/04/14 07:53:10 lpd)
	- flushfile and closefile didn't properly flush streams whose final
target was a procedure, and closefile didn't actually close them. (This is a
very old bug.) (zfproc.c [1.2]: 2000/04/18 05:50:15 lpd)
	- CIDFontType 0 CIDFonts in which some FDArray element had no Subrs
caused an error. (lib/gs_cidfn.ps [1.14]: 2000/04/18 05:58:08 lpd)
	- Attempting to set a PageSize with 4 elements actually set the
PageSize (to the first 2 elements), rather than ignoring the attempt. (This
is just a patch to prevent some PageMaker files from being thrown off by the
4-element PageSizes in Input Attributes.) (lib/gs_setpd.ps [1.2]: 2000/04/19
06:01:19 lpd)
	- When choosing a substituted font, 'Serif' had priority over
'Sans', so unknown fonts with 'SansSerif' in their name would have a serif
font substituted. (lib/gs_fonts.ps [1.6]: 2000/04/19 13:48:48 lpd)
	- The fix to make setpagedevice ignore 4-element PageSizes in
InputAttributes was broken. (It's impossible that it could ever have worked,
despite the fact that we tested it.) (lib/gs_setpd.ps [1.3]: 2000/04/20
06:24:39 lpd)
	- When processing a PDF file, the font substitution heuristic based
on the FontName sometimes overrode the Flags information in the
FontDescriptor. (lib/gs_fonts.ps [1.7]: 2000/04/20 06:36:02 lpd)
	- Showing a string in a Type 1 font with a singular combined matrix
(e.g., after 0 scalefont setfont) caused an error instead of doing nothing.
(zchar1.c [1.3]: 2000/04/22 00:34:46 lpd)
	- Images with multiple file DataSources where two or more of the
files were the same caused a crash. (zimage.c [1.3]: 2000/04/24 00:07:41
lpd)
	- .reusablestreamdecode wasn't defined for use in LanguageLevel 2.
(The ReusableStreamDecode filter itself was properly defined.)
(lib/gs_frsd.ps [1.3]: 2000/04/24 00:45:38 lpd)
	- Loading an unknown font gave a spurious "non-string font name"
message; unknown fonts with names containing style strings like Bold or
Italic caused an error. (bug introduced since 6.20) (lib/gs_fonts.ps [1.8]:
2000/04/28 22:03:58 lpd)

Adds a workaround for misnamed glyphs in some Microsoft TrueType font 'post'
tables. (lib/gs_mgl_e.ps [1.2], lib/gs_ttf.ps [1.4]: 2000/04/08 01:53:16
lpd)

Completely redesigns the representation of CMaps, to reduce space
requirements and make comparing them more reasonable, changing gs_cmap to
gs_cmap_t and gx_code_map to gx_code_map_t. (****** NOTE ****** The
PostScript code currently only handles a few well-behaved CMap structures.)
(lib/gs_cmap.ps [1.2], zfcmap.c [1.4], zfont0.c [1.2]: 2000/04/08 03:54:38
lpd)

Updates version #s to 6.21. (We should have done this earlier.)
(lib/gs_init.ps [1.7]: 2000/04/10 04:46:36 lpd)

Makes Separation and DeviceN color spaces detect that their tint transform
procedure is a Function, and call it rather than using its cached values.
(zcsdevn.c [1.2], zcssepr.c [1.3]: 2000/04/10 19:39:44 lpd)

Adds code to write out CMaps, similar to the code for writing fonts, for
eventual embedding in PDF output. (zfcmap.c [1.5]: 2000/04/14 07:17:24 lpd)

Completes code for reading and writing CMaps. (lib/gs_cmap.ps [1.4],
zfcmap.c [1.7]: 2000/04/16 03:05:29 lpd)

Works around a bug in the AdobePS5 Windows driver, which emits CMaps lacking
the required CMapName entry. (lib/gs_cidfn.ps [1.15], lib/gs_cmap.ps [1.5]:
2000/04/18 07:18:42 lpd)

Moves the optimization prologue for ps2pdf from the command line to a
procedure, to avoid shell length limits. (lib/gs_pdfwr.ps [1.3]: 2000/04/18
16:40:14 lpd)

Removes all remaining direct references to stdin/out/err from the library,
interpreter, and non-contributed drivers; moves the ersatz definitions of
stdin/out/err to a new header file. (imainarg.c [1.2]: 2000/04/20 23:30:22
lpd)

Speeds up Type 1 font loading slightly by removing a conversion from binary
to hex and back again. (zmisc1.c [1.2]: 2000/04/22 16:03:18 lpd)

Adds a MD5Encode filter, which computes the 16-byte MD5 digest of the input.
No output is produced until the filter is closed. (zfmd5.c [1.1]: 2000/04/27
14:39:57 lpd)

Adds a sample file containing a wide variety of PDF annotations; updates
documentation for this and some other overlooked files.
(examples/annots.pdf [1.1]: 2000/04/28 10:51:02 lpd)

</pre><h2><a name="6.21 Streams"></a>Streams</h2><pre>

Fixes problems:
	- FILE_IMPLEMENTATION=both was broken (by the introduction of
sread_subfile). (sfxfd.c [1.3]: 2000/04/10 02:41:48 lpd)
	- flushfile and closefile didn't properly flush streams whose final
target was a procedure, and closefile didn't actually close them. (This is a
very old bug.) (stream.c [1.6]: 2000/04/18 05:50:15 lpd)
	- The PixelDifference filters (Predictor = 2) weren't implemented
for Colors > 4 and BitsPerComponent != 8, and they dropped trailing bytes if
the length of the data wasn't an exact multiple of the pixel size.
(spdiff.c [1.2]: 2000/04/22 03:55:22 lpd)

Enhances the ASCII85Encode filter to avoid %! at the beginning of a line of
output, in addition to avoiding %% which it did already. (sa85x.h [1.2],
sfilter2.c [1.2]: 2000/04/08 01:30:36 lpd)

Removes all remaining direct references to stdin/out/err from the library,
interpreter, and non-contributed drivers; moves the ersatz definitions of
stdin/out/err to a new header file. (std.h [1.2]: 2000/04/20 23:30:22 lpd)

Speeds up Type 1 font loading slightly by removing a conversion from binary
to hex and back again. (seexec.c [1.2], sfilter.h [1.5]: 2000/04/22 16:03:18
lpd)

Adds a MD5Encode filter, which computes the 16-byte MD5 digest of the input.
No output is produced until the filter is closed. (smd5.c [1.1],
smd5.h [1.1]: 2000/04/27 14:39:57 lpd)

</pre><h2><a name="6.21 Library"></a>Library</h2><pre>

Fixes problems:
	- Fixes some signed/unsigned char * mismatches. (gdevpsf2.c [1.5]:
2000/04/07 15:27:14 lpd)
	- Writing a Type 2 CFF with multiply-encoded glyphs produced an
incorrect Encoding. Also, when producing output for PDF 1.2 files, no longer
emits certain opcodes that cause an (unjustified) error in Acrobat Reader 3
for Linux. (gdevpsf.h [1.3], gdevpsf2.c [1.6]: 2000/04/10 07:42:31 lpd)
	- gsmisc.c didn't compile in DEBUG mode on systems with a
non-standard prototype for the sqrt function. (gsmisc.c [1.3]: 2000/04/10
16:00:31 lpd)
	- One picky compiler complained about (1L << 31). (gsmisc.c [1.4]:
2000/04/10 17:21:41 lpd)
	- putdeviceparams allowed a PageSize or .MediaSize value with the
wrong number of elements to take effect. (gsdparam.c [1.2]: 2000/04/19
05:59:05 lpd)
	- The elimination of stdin/out/err also eliminated some #defines
that are needed for error printout. (gsio.h [1.3]: 2000/04/21 06:39:17 lpd)
	- The structure descriptor for ImageType 3 images was public rather
than private. (gsiparm3.h [1.3], gximage3.c [1.2]: 2000/04/22 07:02:18 lpd)
	- The "point matching" feature of TrueType composite glyphs wasn't
implemented, causing some composite (accented) characters to have their
accents misplaced. (gstype42.c [1.4]: 2000/04/25 07:22:50 lpd)

Completely redesigns the representation of CMaps, to reduce space
requirements and make comparing them more reasonable, changing gs_cmap to
gs_cmap_t and gx_code_map to gx_code_map_t. (****** NOTE ****** The
PostScript code currently only handles a few well-behaved CMap structures.)
(gsfcmap.c [1.4], gsfcmap.h [1.2], gxfcmap.h [1.3], gxfont0.h [1.2]:
2000/04/08 03:54:38 lpd)

Adds Function-based tint_transform procedures for Separation and DeviceN
color spaces. (gscdevn.c [1.3], gscdevn.h [1.2], gscsepr.c [1.3],
gscsepr.h [1.2]: 2000/04/10 19:02:19 lpd)

Adds code to write out CMaps, similar to the code for writing fonts, for
eventual embedding in PDF output. (gdevpsf.h [1.4], gdevpsfm.c [1.1]:
2000/04/14 07:17:24 lpd)

Completes code for reading and writing CMaps. (gdevpsf.h [1.5],
gdevpsfm.c [1.2], gsccode.h [1.3], gsfcid.c [1.3], gsfcmap.c [1.5],
gxcid.h [1.2], gxfcmap.h [1.4]: 2000/04/16 03:05:29 lpd)

Removes the gp_ procedures for managing screen swapping between console and
graphics, which haven't been used for a long time and are no longer useful.
(gp.h [1.3]: 2000/04/20 22:47:35 lpd)

Removes all remaining direct references to stdin/out/err from the library,
interpreter, and non-contributed drivers; moves the ersatz definitions of
stdin/out/err to a new header file. (gsdevice.c [1.3], gsio.h [1.2],
gsmisc.c [1.5], gxdevice.h [1.2]: 2000/04/20 23:30:22 lpd)

Adds an essential new file overlooked in the removal of references to
stdin/out/err. (gxstdio.h [1.1]: 2000/04/20 23:50:20 lpd)

Makes the [e]pswrite and pdfwrite drivers merge adjacent horizontal or
vertical line segments going in the same direction. This makes a big
difference for PostScript files produced by certain applications.
(gdevvec.c [1.2], gdevvec.h [1.2]: 2000/04/25 22:39:54 lpd)

Adds template macros for printer devices that implement print_page_copies
rather than print_page. (gdevprn.c [1.2], gdevprn.h [1.3]: 2000/04/28
13:36:16 lpd)

<hr>

<h1><a name="Version6.20"></a>Version 6.20 (2000-04-06)</h1>

<p>
This fileset includes the first steps towards bringing the pdfwrite driver
closer to matching Acrobat Distiller 4.  Highlights:

<ul>

<li> Reimplementation of CIDFontType 0 support in C rather than PostScript;

<li> Parsing (but not functional implementation) of nearly all the Acrobat
Distiller 4 parameters;

<li> Implementation of AutoRotatePages and DCTEncode filtering in the PDF
writer;

<li> A PDF linearizer ("optimizer").

</ul>

<p>
All problems registered on SourceForge numbered 103963 or lower are closed,
except for the following: 101549, 101814, 101829, 101905, 101955, 102046,
102047, 102132, 102146, 102735, 102901, 103016, 103528, 103963.

<pre>

<h2><a name="6.20_Incompatible_changes"></a>Incompatible changes</h2>

(Procedures)
	- The default value of FPU_TYPE in all Windows and OS/2 makefiles
is now 387 rather than 0.
	- The process for reporting problems has changed significantly.
(PDF writer)
	- The Cos procedures no longer take the device as an argument,
except for object-creating procedures, which now take the device rather
than an allocator.
	- The is_object member of Cos values is replaced by value_type.
Clients must use COS_VALUE_IS_OBJECT() to test whether a value is an object
reference.
	- The Cos procedures that take C strings no longer copy the string.
	- The argument of cos_write_object is no longer const.
(Drivers)
	- The default BufferSpace for printer drivers is now 4 Mb.
	- Device halftone order implementations must now provide a new
bit_index procedure.
	- The image argument for psdf_setup_image_filters is changed from
gs_image_t to gs_pixel_image_t.
	- The font-related psdf_ procedures are renamed psf_.
(Streams)
	- The interface to the [T]BCP filters is now in a separate file,
sbcp.h.
(PDF interpreter)
	- The internal beginpage procedure is renamed dictbeginpage, and
now takes a dictionary argument.
(Interpreter)
	- The argument list for the internal build_gs_TrueType_font
procedure has changed.
	- The zcharstring_glyph_outline procedure is renamed
zchar1_glyph_outline.
	- The Instances dictionary of resources is renamed .Instances.
(Library)
	- ImageType 4 images now give an error if a MaskColor value is out
of the range of possible sample values.
	- The definition of gs_param_key_t, the key type returned by
parameter list enumeration, is changed.
	- Implementors of parameter lists must now call gs_param_list_init
to initialize the common members.
	- st_indexed_map is now private.  Clients allocating instances of
this structure must now call alloc_indexed_map.
	- Setting a transfer map as the identity mapping now requires
calling gx_set_identity_transfer.
	- gs_cid_system_info is renamed gs_cid_system_info_t.
	- The get_outline procedure of a Type 42 or Type 11 (CIDFontType 0)
font now returns 1 if the string was newly allocated and can be freed by the
client.
	- The procs member of gs_type1_data is now an in-line structure
rather than a pointer to a const structure.


<h2><a name="6.20 Documentation"></a>Documentation</h2><pre>

Fixes problems:
	- If log2_transfer_map_size > 8, identity transfer functions
returned garbage. The fix requires that if a client wants to set a transfer
function to the identity mapping, it must call gx_set_identity_transfer
rather than simply setting the procedure to gs_identity_transfer.
(doc/News.htm [1.13]: 2000/03/19 17:14:47 lpd)
	- In PDF files, the page CropBox was not being used to clip the
output. (doc/News.htm [1.18]: 2000/03/21 23:08:32 lpd)
	- Fixes several problems in resourceforall and resource loading: the
operands of resourceforall were restored even in the case of an error in the
client's procedure; the name Instances had special meaning for some Adobe
code; resourceforall caused an invalidaccess error if an operand was in
local VM but the current VM was global; loading a resource from a file could
cause a typecheck error if the file left values on the operand stack.
(doc/News.htm [1.25]: 2000/04/04 22:26:02 lpd)
	- The location of the lists of supported and unsupported drivers was
incorrect. (doc/Bug-info.htm [1.2]: 2000/04/07 03:01:52 lpd)

Undoes an accidental RCS ID substitution in what was supposed to be literal
text. (doc/Htmstyle.htm [1.2]: 2000/03/18 22:29:03 lpd)

Increments the version number to 6.20, in anticipation of the next release.
(We do this at the beginning of the development for a release, not the end.)
(doc/History6.htm [1.4], doc/News.htm [1.6]: 2000/03/19 00:27:22 lpd)

Splits out the [T]BCP filter interface into a separate file.
(doc/News.htm [1.7]: 2000/03/19 02:40:18 lpd)

Documents the fact that ImageType 4 images now cause an error for
out-of-range MaskColor values. (doc/News.htm [1.8]: 2000/03/19 04:32:09 lpd)

Updates the change log with recent changes. (doc/Changes.htm [1.4]:
2000/03/19 05:39:58 lpd)

Adds a new document listing projects with which we are seeking help. Also
makes the description of Changes.htm and News.htm more accurate.
(doc/New-user.htm [1.2], doc/Projects.htm [1.1], doc/Readme.htm [1.3]:
2000/03/19 06:07:15 lpd)

Changes the default value of BufferSpace to 4 Mb. In desktop applications,
this is a reasonable value that can substantially improve performance
(especially for color printers); embedded applications will want to set
BufferSpace themselves in any case. (doc/News.htm [1.9]: 2000/03/19 06:51:13
lpd)

Changes the key type returned by parameter list enumeration to include a
persistence flag, makes C parameter lists support non-persistent keys, and
upgrades GC descriptors so that parameter lists can be used non-transiently;
updates implementors of parameter lists to call gs_param_list_init to
initialize the common members, which is now required. (doc/News.htm [1.10]:
2000/03/19 15:16:11 lpd)

Documents the fact that drivers that device halftone order implementations
must now provide the new bit_index procedure. (This should have been
documented when bit_index was introduced!) (doc/News.htm [1.11]: 2000/03/19
15:47:47 lpd)

Makes st_indexed_map private. Clients must now use the constructor procedure
alloc_indexed_map rather than allocating instances directly.
(doc/News.htm [1.12]: 2000/03/19 16:37:28 lpd)

Update the date and change log for the latest batches of checked-in changes.
(doc/Changes.htm [1.5]: 2000/03/19 17:29:57 lpd)

Adds a PDF linearizer ("optimizer"). This is a separate utility (not
integrated with the pdfwrite driver), written in PostScript.
(doc/Psfiles.htm [1.2]: 2000/03/20 04:31:22 lpd)

Adds parsing for the remaining Acrobat Distiller 4 parameters. Implements
the LockDistillerParams, xxxDownsampleThreshold, xxxImageDict, and
xxxACSImageDict distiller parameters. Implements DCTEncode as an
xxxImageFilter option (it used to cause a crash). Makes the
AutoFilterxxxImages distiller parameters select JPEG encoding (with ACSDict)
if the image has 8 bits per component and is not Indexed, and LZW/Flate
otherwise: this still isn't right, but it's closer. Implementation changes:
Changes the implementation of distiller parameter dictionaries from stream
states to parameter lists; changes the test for masks in
psdf_setup_image_filters, and changes the image argument from gs_image_t to
gs_pixel_image_t. (doc/News.htm [1.14]: 2000/03/20 05:40:04 lpd)

Moves font-writing support into a new module (gdevpsf*), changing the source
file names. Adds the ability to write CFF fonts, with either Type 1 or Type
2 CharStrings; unfortunately, Acrobat Reader appears not to accept CFF fonts
with Type 1 CharStrings. Adds the ability to convert Type 1 CharStrings to
Type 2, including optimizing sequences of Type 1 operators into a single
Type 2 operator. Implements writing CIDFontType 0 CFF fonts (CIDFonts) [NOT
TESTED]. Starts (just barely) to remove more unneeded information from
embedded TrueType fonts. (doc/News.htm [1.15]: 2000/03/20 07:02:12 lpd)

Updates the consolidated change log with today's changes.
(doc/Changes.htm [1.6]: 2000/03/20 07:18:38 lpd)

Starts to move support for CIDFontType 0 and 2 into C code, needed by the
PDF writer for handling CID-keyed fonts. Implements GlyphDirectory for
CIDFonts. Makes GDBytes and CIDMapOffset optional for CIDFontType 0 fonts
that have a GlyphDirectory (not documented in the PLRM, but clearly
correct). Implements Adobe 3011 features: integer and dictionary CIDMaps,
and the MetricsCount entry, in CIDFontType 2 fonts (but only in the C code,
which isn't hooked in yet, not in the PostScript code in gs_cidfn.ps.)
(doc/News.htm [1.16]: 2000/03/20 19:53:06 lpd)

Notes that the argument list for the internal build_gs_TrueType_font
procedure has changed, as part of the CIDFont migration to C code.
(doc/News.htm [1.17]: 2000/03/20 20:04:20 lpd)

Adds invocation scripts and documentation for the PDF "optimizer".
(man/pdfopt.1 [1.1]: 2000/03/21 17:01:33 lpd)

Updates information about reporting problems when using Ghostview or GSview.
(doc/Bug-form.htm [1.3], doc/New-user.htm [1.3]: 2000/03/22 22:13:49 lpd)

Checks in the latest consolidated change log. (doc/Changes.htm [1.7]:
2000/03/24 05:04:55 lpd)

Substantially enhances the Cos object machinery. Interface: Adds a few more
procedures, including a procedure to create a stream that writes directly
into a Cos stream object, procedures for putting more kinds of values into
arrays and dictionaries, and a param_list interface. Changes Cos objects to
store a reference to the PDF device, and removes the device argument from
all Cos procedures other than object creation. Replaces the Boolean
is_object member of Cos values by a value_type enum: clients must now use
COS_VALUE_IS_OBJECT() to test whether a value is an object reference. To
reduce allocator overhead, makes the Cos procedures that take C strings no
longer copy the string. Records whether each Cos object has been written
into the output, so that in the future (but not in this batch of changes)
resource definitions can be copied at the end of each page. Implementation:
Moves more of the implementation of Cos objects to the .c file.
(doc/News.htm [1.19]: 2000/03/24 06:12:52 lpd)

Adds parsing for the remaining Acrobat Distiller 4 parameters, although most
of them don't have any effect yet; brings documentation up to date.
(doc/Ps2pdf.htm [1.3]: 2000/03/28 07:36:58 lpd)

Implements LockDistillerParams; completes the StartPage/EndPage fix checked
in just before. (doc/Ps2pdf.htm [1.4]: 2000/03/28 07:52:06 lpd)

Changes the default value of FPU_TYPE in all Windows and OS/2 makefiles from
0 to 387, since all current desktop CPUs include floating point hardware.
(doc/News.htm [1.20]: 2000/03/28 17:03:48 lpd)

Changes the get_outline / glyph_data procedure for getting encoded font
outline data to return an indication of whether the outline data were just
allocated and can be freed by the client. (This is a possibly
non-backward-compatible change.) (doc/News.htm [1.21]: 2000/03/28 18:47:02
lpd)

Adds a note about bogus "ANSI aliasing" warnings from the DEC C compiler.
(doc/Make.htm [1.8]: 2000/03/29 19:29:08 lpd)

Changes the procs structure of gs_type1_data to an in-line structure rather
than a pointer to a const structure. (Needed for moving CIDFontType 0
support into C.) (doc/News.htm [1.22]: 2000/03/29 22:10:31 lpd)

Updates the change log with recent changes. (doc/Changes.htm [1.8]:
2000/03/30 07:59:39 lpd)

Creates a real list of projects on which help would be appreciated.
(doc/Projects.htm [1.2]: 2000/04/01 00:43:11 lpd)

Finishes implementing the ability to write CIDFontType 0 CFFs. This involved
a surprising number of changes in other font-related files.
(doc/News.htm [1.23]: 2000/04/02 07:38:46 lpd)

Updates the documentation on preparing releases to reflect the addition of
the toolbin directory. (doc/Release.htm [1.7]: 2000/04/02 18:56:58 lpd)

Implements the AutoRotatePages distiller parameter. (doc/Ps2pdf.htm [1.5]:
2000/04/03 02:54:41 lpd)

Updates the problem reporting procedure to use SourceForge; separates the
description of the procedure from the reporting form.
(doc/Bug-form.htm [1.4], doc/Bug-info.htm [1.1], doc/New-user.htm [1.4],
doc/News.htm [1.24], doc/Readme.htm [1.4]: 2000/04/04 04:14:02 lpd)

Updates release dates and version numbers. (doc/Bug-form.htm [1.5],
doc/Bug-info.htm [1.3], doc/Htmstyle.htm [1.3], doc/Make.htm [1.9],
doc/New-user.htm [1.5], doc/Projects.htm [1.3], doc/Ps2pdf.htm [1.6],
doc/Psfiles.htm [1.3], doc/Readme.htm [1.5], man/ps2pdf.1 [1.4],
man/ps2ps.1 [1.4]: 2000/04/07 05:21:45 lpd)

Removes redundant material, and the www.aladdin.com distribution point, from
the release procedure documentation. (doc/Release.htm [1.8]: 2000/04/07
05:24:29 lpd)

</pre><h2><a name="6.20 Procedures"></a>Procedures</h2><pre>

Fixes problems:
	- pdfread.dev incorrectly depended on dpsnext_. (int.mak [1.4]:
2000/03/19 02:00:09 lpd)
	- The referenced libpng version hadn't been updated to 1.0.5.
(openvms.mmk [1.3]: 2000/03/20 16:38:46 lpd)
	- The MSVC++ 6 compiler no longer recognizes the /FPi87 switch.
(msvccmd.mak [1.2]: 2000/03/31 05:06:53 lpd)
	- MSVC versions before 5, not before 6, recognize /FPi87.
(msvccmd.mak [1.3]: 2000/03/31 05:50:33 lpd)
	- Removes some occurrences of $,I,d,: that shouldn't be substituted.
(toolbin/pre [1.2]: 2000/04/07 05:20:35 lpd)

Increments the version number to 6.20, in anticipation of the next release.
(We do this at the beginning of the development for a release, not the end.)
(version.mak [1.6]: 2000/03/19 00:27:22 lpd)

Adds a pseudo-encoding for the CFF StandardStrings that represent
characters. (devs.mak [1.3], int.mak [1.3], unixinst.mak [1.5]: 2000/03/19
00:38:50 lpd)

Updates makefiles with dependencies for recent changes. (int.mak [1.5],
lib.mak [1.3]: 2000/03/19 05:37:38 lpd)

Adds dependencies for the new implementation of FunctionType 4 functions.
(int.mak [1.6]: 2000/03/19 07:03:53 lpd)

Splits off "vanilla" Functions into separate files, in anticipation of
removing them (they were only used to implement PostScript Calculator
Functions). (lib.mak [1.4]: 2000/03/19 07:33:08 lpd)

Update the date and change log for the latest batches of checked-in changes.
(version.mak [1.7]: 2000/03/19 17:29:57 lpd)

Moves font-writing support into a new module (gdevpsf*), changing the source
file names. Adds the ability to write CFF fonts, with either Type 1 or Type
2 CharStrings; unfortunately, Acrobat Reader appears not to accept CFF fonts
with Type 1 CharStrings. Adds the ability to convert Type 1 CharStrings to
Type 2, including optimizing sequences of Type 1 operators into a single
Type 2 operator. Implements writing CIDFontType 0 CFF fonts (CIDFonts) [NOT
TESTED]. Starts (just barely) to remove more unneeded information from
embedded TrueType fonts. (devs.mak [1.4], lib.mak [1.5]: 2000/03/20 07:02:12
lpd)

Updates dependencies to reflect today's batches of checked-in changes.
(devs.mak [1.5], int.mak [1.7], lib.mak [1.6]: 2000/03/20 07:16:35 lpd)

Updates the makefile for the renaming of gdevpsdf.c => gdevpsdu.c.
(devs.mak [1.6]: 2000/03/20 19:30:35 lpd)

Starts to move support for CIDFontType 0 and 2 into C code, needed by the
PDF writer for handling CID-keyed fonts. Implements GlyphDirectory for
CIDFonts. Makes GDBytes and CIDMapOffset optional for CIDFontType 0 fonts
that have a GlyphDirectory (not documented in the PLRM, but clearly
correct). Implements Adobe 3011 features: integer and dictionary CIDMaps,
and the MetricsCount entry, in CIDFontType 2 fonts (but only in the C code,
which isn't hooked in yet, not in the PostScript code in gs_cidfn.ps.)
(int.mak [1.8], lib.mak [1.7]: 2000/03/20 19:53:06 lpd)

Extends the C support for CIDFontType 0 fonts to include those with FontType
2 subfonts in the FDArray (an Adobe 3011 addition, specifically for CFF
fonts). (int.mak [1.9]: 2000/03/21 07:43:42 lpd)

Adds invocation scripts and documentation for the PDF "optimizer".
(unixinst.mak [1.6]: 2000/03/21 17:01:33 lpd)

Splits off the ReusableStreamDecode filter as a separate module, since
CIDFontType 0 fonts will use it even in LanguageLevels below 3.
(int.mak [1.10]: 2000/03/21 21:34:57 lpd)

Makes file streams remember the file name, needed for efficiently
implementing reusable streams. (int.mak [1.11]: 2000/03/23 02:13:40 lpd)

Checks in the latest consolidated change log. (version.mak [1.8]: 2000/03/24
05:04:55 lpd)

Changes the implementation of incrementally loaded CIDFontType 0 fonts to
use a ReusableStreamDecode filter, in anticipation of moving the BuildGlyph
procedure for these fonts from PostScript to C. (int.mak [1.12],
version.mak [1.9]: 2000/03/27 16:36:24 lpd)

Changes the default value of FPU_TYPE in all Windows and OS/2 makefiles from
0 to 387, since all current desktop CPUs include floating point hardware.
(msvc32.mak [1.3], msvclib.mak [1.3], os2.mak [1.4], watcw32.mak [1.3]:
2000/03/28 17:03:48 lpd)

Updates the change log with recent changes. (version.mak [1.10]: 2000/03/30
07:59:39 lpd)

Cleans up some dependencies missed at the last checkin. (devs.mak [1.7],
int.mak [1.13]: 2000/03/31 05:03:30 lpd)

Finishes implementing the ability to write CIDFontType 0 CFFs. This involved
a surprising number of changes in other font-related files. (int.mak [1.14]:
2000/04/02 07:38:46 lpd)

Adds a variety of tools used to build and distribute Ghostscript releases.
The only documentation is comments in the files themselves, and there isn't
much of it. All aspects of these tools are subject to change without notice.
(toolbin/3way.tcl [1.1], toolbin/cvs2hist.py [1.1],
toolbin/errlist.tcl [1.1], toolbin/gsmake.tcl [1.1],
toolbin/headers.tcl [1.1], toolbin/leaks.tcl [1.1],
toolbin/makeset.tcl [1.1], toolbin/package.tcl [1.1], toolbin/pre [1.1],
toolbin/pre.chk [1.1], toolbin/precheck.tcl [1.1], toolbin/smoke.ps [1.1],
toolbin/suite.tcl [1.1], toolbin/tmake.tcl [1.1]: 2000/04/02 18:44:27 lpd)

Moves gsindent from src to toolbin. (toolbin/gsindent [1.1]: 2000/04/02
18:56:25 lpd)

Adds an #include required by the Watcom compiler. (devs.mak [1.8]:
2000/04/05 19:51:54 lpd)

Adds a missing dependency. (lib.mak [1.8]: 2000/04/07 03:00:56 lpd)

Updates a few dependencies for the release. (int.mak [1.15]: 2000/04/07
05:23:12 lpd)

Updates the build date for the release. (version.mak [1.11]: 2000/04/07
05:25:18 lpd)

Adds .cvsignore files, to prevent bogus warnings on cvs update.
(.cvsignore [1.1], src/.cvsignore [1.1]: 2000/04/05 19:46:04 lpd)

</pre><h2><a name="6.20 Utilities"></a>Utilities</h2><pre>

Fixes problems:
	- A couple of places in the Windows code didn't correctly handle
Ghostscript version 6.23, 7 August 2000
21:45:03 lpd)
	- Replaces a final exit() with a return, to avoid a compiler
warning. (genconf.c [1.2]: 2000/04/05 19:53:27 lpd)

Makes geninit remove whitespace adjacent to hex and base-85 string literals.
(geninit.c [1.2]: 2000/03/18 22:51:24 lpd)

Adds a PDF linearizer ("optimizer"). This is a separate utility (not
integrated with the pdfwrite driver), written in PostScript.
(lib/pdfopt.ps [1.1], lib/pdfwrite.ps [1.1]: 2000/03/20 04:31:22 lpd)

Replaces the O(N^2) sorting algorithm for printing unencoded characters with
a O(N log N) algorithm, which makes printing Unicode and Chinese/Japanese
fonts practical. (lib/prfont.ps [1.2]: 2000/03/21 06:39:49 lpd)

Adds invocation scripts and documentation for the PDF "optimizer".
(lib/pdfopt [1.1], lib/pdfopt.bat [1.1], lib/pdfopt.ps [1.2]: 2000/03/21
17:01:33 lpd)

Splits off the ReusableStreamDecode filter as a separate module, since
CIDFontType 0 fonts will use it even in LanguageLevels below 3.
(zfreuse.c [1.2]: 2000/03/21 21:34:57 lpd)

Adds a variety of tools used to build and distribute Ghostscript releases.
The only documentation is comments in the files themselves, and there isn't
much of it. All aspects of these tools are subject to change without notice.
(gsindent [1.2]: 2000/04/02 18:44:27 lpd)

</pre><h2><a name="6.20 Drivers"></a>Drivers</h2><pre>

Fixes problems:
	- The color_info member of the Windows and OS/2 printer devices (and
other devices using PC-style palettes) wasn't initialized properly, causing
improper behavior. (gdevos2p.c [1.2], gdevpccm.h [1.2], gdevwpr2.c [1.3]:
2000/03/20 21:05:11 lpd)
	- Fixes a bug in the mswinpr2 driver in the handling of
BitsPerPixel. (gdevwpr2.c [1.4]: 2000/03/22 17:08:33 lpd)
	- In PCL XL output (pxl* drivers), if a PostScript image didn't
provide enough source data, the remainder of the output image was
erroneously filled with pixel value 0 (typically black or the foreground
color). (gdevpx.c [1.2]: 2000/03/22 20:55:21 lpd)
	- In the output of the pswrite driver (pdf2ps, ps2ps), the showpage
for each page occurred before, not after, the restore that ended the page
contents. This contradicted Adobe's documentation, and made utilities like
N-up printing not work properly. (gdevps.c [1.4]: 2000/03/28 00:52:46 lpd)
	- The PCL XL 2.0 value for sRGB color space was wrong, and the
attribute for writing mode was missing. (gdevpxat.h [1.2], gdevpxen.h [1.2]:
2000/03/29 18:19:44 lpd)
	- When printing on monochrome LaserJet/DeskJet printers, the driver
didn't set the number of copies to 1; on the LJ 4si, this sometimes caused
double printing. (gdevdjet.c [1.2]: 2000/04/03 14:36:12 lpd)
	- Updates clients for the change in the last argument of
cff_string_index from uint * to int *. (gdevpsf2.c [1.4]: 2000/04/05
19:55:29 lpd)

Adds parsing for the remaining Acrobat Distiller 4 parameters. Implements
the LockDistillerParams, xxxDownsampleThreshold, xxxImageDict, and
xxxACSImageDict distiller parameters. Implements DCTEncode as an
xxxImageFilter option (it used to cause a crash). Makes the
AutoFilterxxxImages distiller parameters select JPEG encoding (with ACSDict)
if the image has 8 bits per component and is not Indexed, and LZW/Flate
otherwise: this still isn't right, but it's closer. Implementation changes:
Changes the implementation of distiller parameter dictionaries from stream
states to parameter lists; changes the test for masks in
psdf_setup_image_filters, and changes the image argument from gs_image_t to
gs_pixel_image_t. (gdevpsdf.h [1.4], gdevpsdi.c [1.3], gdevpsdp.c [1.3]:
2000/03/20 05:40:04 lpd)

Moves font-writing support into a new module (gdevpsf*), changing the source
file names. Adds the ability to write CFF fonts, with either Type 1 or Type
2 CharStrings; unfortunately, Acrobat Reader appears not to accept CFF fonts
with Type 1 CharStrings. Adds the ability to convert Type 1 CharStrings to
Type 2, including optimizing sequences of Type 1 operators into a single
Type 2 operator. Implements writing CIDFontType 0 CFF fonts (CIDFonts) [NOT
TESTED]. Starts (just barely) to remove more unneeded information from
embedded TrueType fonts. (gdevpsd1.c [1.2], gdevpsdf.c [1.3],
gdevpsdf.h [1.5], gdevpsdt.c [1.2], gdevpsf.h [1.1], gdevpsf1.c [1.1],
gdevpsf2.c [1.1], gdevpsft.c [1.1], gdevpsfu.c [1.1], gdevpsfx.c [1.1]:
2000/03/20 07:02:12 lpd)

Renames an inappropriately named file. (gdevpsdf.c [1.4], gdevpsdf.h [1.6],
gdevpsdu.c [1.1]: 2000/03/20 19:03:43 lpd)

Extends the C support for CIDFontType 0 fonts to include those with FontType
2 subfonts in the FDArray (an Adobe 3011 addition, specifically for CFF
fonts). (gdevpsf.h [1.2]: 2000/03/21 07:43:42 lpd)

Changes the procs structure of gs_type1_data to an in-line structure rather
than a pointer to a const structure. (Needed for moving CIDFontType 0
support into C.) (gdevpsf1.c [1.2], gdevpsf2.c [1.2], gdevpsfx.c [1.2]:
2000/03/29 22:10:31 lpd)

Finishes implementing the ability to write CIDFontType 0 CFFs. This involved
a surprising number of changes in other font-related files.
(gdevpsf2.c [1.3], gdevpsfu.c [1.2]: 2000/04/02 07:38:45 lpd)

Slightly simplifies the output of the psmono and psgray drivers.
(gdevpsim.c [1.2]: 2000/04/02 19:57:37 lpd)

Adds an #include required by the Watcom compiler. (gdevpsf1.c [1.3]:
2000/04/05 19:51:54 lpd)

</pre><h2><a name="6.20 PDF writer"></a>PDF writer</h2><pre>

Fixes problems:
	- The pointer enumeration procedure for pdf_image_enum was wrong,
possibly producing a mangled pointer and a memory access error if a garbage
collection occured while writing an image in a PDF file. (gdevpdfi.c [1.5]:
2000/03/20 05:54:13 lpd)
	- The computation for testing whether a tiled pattern could be
represented in line, and whether it exceeded Acrobat Reader's size limit,
was wrong, causing some patterns not to be represented as Patterns.
(gdevpdfi.c [1.6]: 2000/03/20 05:58:15 lpd)
	- When ProcessColorModel=/DeviceCMYK, if the first object on a page
or after changing the clipping path was white, the PDF writer would write it
as black. (gdevpdfu.c [1.3]: 2000/03/21 18:36:36 lpd)
	- If a page ended with an incomplete outline tree, an invalid memory
access occurred. (gdevpdf.c [1.3], gdevpdfm.c [1.2]: 2000/03/24 05:09:56
lpd)
	- The SP pdfmark didn't check that its argument was a graphics
stream. (gdevpdfm.c [1.4]: 2000/03/24 06:18:39 lpd)
	- The name of the EndPage Distiller parameter collided with the
EndPage page device parameter. (gdevpdfp.c [1.4]: 2000/03/28 07:45:25 lpd)
	- If two embedded fonts had the same base font, the PDF file could
wind up with an invalid entry in the xref table. (gdevpdft.c [1.4]:
2000/04/01 01:18:32 lpd)

Adds parsing for the remaining Acrobat Distiller 4 parameters. Implements
the LockDistillerParams, xxxDownsampleThreshold, xxxImageDict, and
xxxACSImageDict distiller parameters. Implements DCTEncode as an
xxxImageFilter option (it used to cause a crash). Makes the
AutoFilterxxxImages distiller parameters select JPEG encoding (with ACSDict)
if the image has 8 bits per component and is not Indexed, and LZW/Flate
otherwise: this still isn't right, but it's closer. Implementation changes:
Changes the implementation of distiller parameter dictionaries from stream
states to parameter lists; changes the test for masks in
psdf_setup_image_filters, and changes the image argument from gs_image_t to
gs_pixel_image_t. (gdevpdfi.c [1.4]: 2000/03/20 05:40:04 lpd)

Moves font-writing support into a new module (gdevpsf*), changing the source
file names. Adds the ability to write CFF fonts, with either Type 1 or Type
2 CharStrings; unfortunately, Acrobat Reader appears not to accept CFF fonts
with Type 1 CharStrings. Adds the ability to convert Type 1 CharStrings to
Type 2, including optimizing sequences of Type 1 operators into a single
Type 2 operator. Implements writing CIDFontType 0 CFF fonts (CIDFonts) [NOT
TESTED]. Starts (just barely) to remove more unneeded information from
embedded TrueType fonts. (gdevpdff.c [1.2], gdevpdfw.c [1.2]: 2000/03/20
07:02:12 lpd)

Substantially enhances the Cos object machinery. Interface: Adds a few more
procedures, including a procedure to create a stream that writes directly
into a Cos stream object, procedures for putting more kinds of values into
arrays and dictionaries, and a param_list interface. Changes Cos objects to
store a reference to the PDF device, and removes the device argument from
all Cos procedures other than object creation. Replaces the Boolean
is_object member of Cos values by a value_type enum: clients must now use
COS_VALUE_IS_OBJECT() to test whether a value is an object reference. To
reduce allocator overhead, makes the Cos procedures that take C strings no
longer copy the string. Records whether each Cos object has been written
into the output, so that in the future (but not in this batch of changes)
resource definitions can be copied at the end of each page. Implementation:
Moves more of the implementation of Cos objects to the .c file.
(gdevpdf.c [1.4], gdevpdfi.c [1.7], gdevpdfm.c [1.3], gdevpdfo.c [1.2],
gdevpdfo.h [1.2], gdevpdfr.c [1.2], gdevpdfu.c [1.4], gdevpdfx.h [1.3]:
2000/03/24 06:12:52 lpd)

Changes a few initializations to suppress warnings from one picky compiler
that doesn't like ptr = buf - 1 where buf is an array. (gdevpdfr.c [1.3]:
2000/03/28 02:01:34 lpd)

Adds parsing for the remaining Acrobat Distiller 4 parameters, although most
of them don't have any effect yet; brings documentation up to date.
(gdevpdf.c [1.5], gdevpdfp.c [1.3], gdevpdfx.h [1.4]: 2000/03/28 07:36:58
lpd)

Implements LockDistillerParams; completes the StartPage/EndPage fix checked
in just before. (gdevpdf.c [1.6], gdevpdfp.c [1.5], gdevpdfx.h [1.5]:
2000/03/28 07:52:06 lpd)

Changes the initial values of the "job control" parameters to match Acrobat
Distiller 4. (gdevpdf.c [1.7], gdevpdfp.c [1.6], gdevpdfx.h [1.6]:
2000/03/28 07:57:14 lpd)

Implements the AutoRotatePages distiller parameter. (gdevpdf.c [1.8],
gdevpdft.c [1.5], gdevpdfu.c [1.5], gdevpdfx.h [1.7]: 2000/04/03 02:54:41
lpd)

</pre><h2><a name="6.20 Interpreter (PDF)"></a>Interpreter (PDF)</h2><pre>

Fixes problems:
	- Reading embedded compressed CIDFonts wasn't implemented.
(lib/pdf_font.ps [1.3]: 2000/03/19 01:28:59 lpd)
	- PDF images with DeviceN color spaces caused an error.
(lib/pdf_draw.ps [1.2]: 2000/03/19 01:44:53 lpd)
	- PDF images with a Mask ignored the mask. (lib/pdf_draw.ps [1.3]:
2000/03/19 01:46:27 lpd)
	- the PDF interpreter hadn't been updated for the move to
library-based FunctionType 4 Functions, and still tried to bind the names
true and false to the no longer existing operators .true and .false.
(lib/pdf_draw.ps [1.5]: 2000/03/19 07:37:03 lpd)
	- FunctionType 2 and 3 functions didn't work.
(lib/pdf_draw.ps [1.6]: 2000/03/19 15:23:10 lpd)
	- In PDF files, the page CropBox was not being used to clip the
output. (lib/pdf_main.ps [1.4], lib/pdf_ops.ps [1.3]: 2000/03/21 23:08:32
lpd)
	- The "fix" for FunctionTypes 2 and 3 in PDF files had made things
worse, because the code didn't distinguish between resolving to a PostScript
function (for shadings) and resolving to a PostScript procedure (for
halftones, BG/UCR, alternate color space mapping, etc.)
(lib/pdf_draw.ps [1.7]: 2000/03/23 18:31:46 lpd)
	- Text with a Pattern color scaled the pattern according to the text
matrix, not the default matrix of the marking context.
(lib/pdf_base.ps [1.6], lib/pdf_main.ps [1.5], lib/pdf_ops.ps [1.4]:
2000/03/30 18:01:58 lpd)
	- Resolving a Shading didn't create a reusable stream for the
shading data; since the data was then read at unpredictable times, the
shading or other constructs in the PDF file could read incorrect data.
(lib/pdf_draw.ps [1.8]: 2000/04/03 06:01:25 lpd)

Adds a lforall procedure for the PDF linearizer. (lib/pdf_base.ps [1.3]:
2000/03/19 01:50:05 lpd)

Changes the PDF interpreter so that following an object reference doesn't
store the result back into the referring slot, and so that # # R always
creates an indirect object. This is necessary for the PDF linearizer. It
shouldn't have any visible effect (other than a possible small performance
cost). (lib/pdf_base.ps [1.4], lib/pdf_draw.ps [1.4]: 2000/03/19 01:53:58
lpd)

Refactors some code to make it usable by the PDF linearizer.
(lib/pdf_main.ps [1.3]: 2000/03/19 17:26:42 lpd)

Speeds up loading embedded Type 1 fonts a little. (lib/pdf_base.ps [1.5],
lib/pdf_font.ps [1.4]: 2000/03/24 07:42:16 lpd)

Speeds up reading embedded Type 1 fonts a little more.
(lib/pdf_font.ps [1.5]: 2000/03/24 16:28:26 lpd)

</pre><h2><a name="6.20 Interpreter"></a>Interpreter</h2><pre>

Fixes problems:
	- Font substitution was broken. (lib/gs_fonts.ps [1.3]: 2000/03/19
00:22:05 lpd)
	- The CFF reader gave an error if a font included any Subrs (it's
very surprising that this hasn't surfaced before, but apparently Acrobat
Distiller always produces CFF fonts with no Subrs); the CFF reader didn't
default lenIV to -1 for Type 1 CharStrings; the CFF reader wasn't able to
read CIDFonts. (lib/gs_cff.ps [1.3], lib/gs_cidfn.ps [1.4]: 2000/03/19
00:45:40 lpd)
	- EXTEND_NAMES had stopped working, because not all places that
needed the index of a name ref used name_index rather than r_size
(ilocate.c), and because the high_index value in the name sub-table was set
incorrectly (iname.c). (ilocate.c [1.2], iname.c [1.2]: 2000/03/19 01:33:23
lpd)
	- The attribute check for Functions being executed was incorrect
(always succeeded). (zfunc.c [1.2]: 2000/03/19 02:12:37 lpd)
	- s_add_filter didn't ensure enough buffering. This entailed moving
the NullEncode/Decode filters to stream.[hc]. (sfilter1.c [1.2]: 2000/03/19
03:15:02 lpd)
	- The parameters of SubFileDecode filters weren't initialized fully
(required by a change in this version). (zfilter.c [1.3]: 2000/03/19
04:03:45 lpd)
	- The AutoPositionEPSFiles Distiller parameter was misspelled
AutoPositionEPSFile. (lib/gs_pdfwr.ps [1.2]: 2000/03/19 05:03:31 lpd)
	- Enumerating the elements of a dictionary-based parameter list
returned garbage for the keys. (iparam.c [1.2]: 2000/03/19 15:13:13 lpd)
	- .buildfont0 should not check CIDSystemInfo compatibility. The
PLRM3 says PostScript interpreters do not make this check, even though the
PLRM2 says compatibility is required (!). (zfcmap.c [1.2]: 2000/03/19
16:53:50 lpd)
	- If log2_transfer_map_size > 8, identity transfer functions
returned garbage. The fix requires that if a client wants to set a transfer
function to the identity mapping, it must call gx_set_identity_transfer
rather than simply setting the procedure to gs_identity_transfer.
(zcolor.c [1.2]: 2000/03/19 17:14:47 lpd)
	- Separation color spaces didn't store the separation name.
(zcssepr.c [1.2]: 2000/03/19 17:21:36 lpd)
	- The addition of the dummy cid_Setup procedure in gs 6.01 was
accidentally commented out. (lib/gs_cidfn.ps [1.5]: 2000/03/21 00:11:55 lpd)
	- The test for whether an CIDFontType 2 outline string was large
enough to include prefixed metrics was backwards, which would have caused
problems with any font that used MetricsCount. (zfcid.c [1.3]: 2000/03/21
00:43:17 lpd)
	- A couple of places in the Windows code didn't correctly handle
Ghostscript version numbers of the form #.0#. (dwsetup.cpp [1.2]: 2000/03/22
21:45:03 lpd)
	- In some cases, re-registering an existing font or CIDFont with
definefont would cause an invalidfont error. (zbfont.c [1.4],
zfont42.c [1.3]: 2000/03/28 18:20:39 lpd)
	- Re-registering a CIDFont with definefont, or defining a CIDFont
with definefont instead of /CIDFont defineresource, caused an invalidfont
error or a crash. (lib/gs_cidfn.ps [1.9], lib/gs_fonts.ps [1.4]: 2000/03/28
18:21:50 lpd)
	- The new C BuildGlyph code for CIDFontType 0 fonts didn't handle
GlyphDirectory or Type 2 CharStrings correctly. (lib/gs_cidfn.ps [1.12],
zfcid.c [1.8]: 2000/03/31 23:21:57 lpd)
	- The internaldict "operator" was allocated in local VM, preventing
it from being bound into procedures allocated in global VM.
(lib/gs_init.ps [1.6]: 2000/04/04 22:16:02 lpd)
	- If there was a CIDInit ProcSet defined in the filesystem, the code
for initializing the built-in CIDInit ProcSet became confused.
(lib/gs_cidfn.ps [1.13]: 2000/04/04 22:17:33 lpd)
	- Fixes several problems in resourceforall and resource loading: the
operands of resourceforall were restored even in the case of an error in the
client's procedure; the name Instances had special meaning for some Adobe
code; resourceforall caused an invalidaccess error if an operand was in
local VM but the current VM was global; loading a resource from a file could
cause a typecheck error if the file left values on the operand stack.
(interp.c [1.3], lib/gs_ccfnt.ps [1.2], lib/gs_res.ps [1.3]: 2000/04/04
22:26:02 lpd)
	- resourceforall didn't enumerate external (loadable) instances, and
would enumerate an instance twice if it had both a local and a global
definition. (lib/gs_res.ps [1.4]: 2000/04/05 21:07:02 lpd)
	- The implementation of resourcestatus wasn't compatible with some
badly written code in an Adobe font downloader that assumes that the
implementation of resourcestatus in Generic and Font is the same.
(lib/gs_res.ps [1.5]: 2000/04/05 21:20:07 lpd)
	- The just-checked-in fixed for resourceforall didn't work properly
for the IdiomSet category. (They probably failed for other categories that
had no instances, but we didn't check this.) (lib/gs_res.ps [1.6]:
2000/04/05 21:51:43 lpd)
	- Some Adobe font downloading code assumed that loading a resource
file would never leave extra values on the stack; our implementation didn't
ensure this (by popping them if needed). (lib/gs_res.ps [1.8]: 2000/04/06
04:50:28 lpd)
	- If an alphabetic font defined and used a .notdef character,
pdfwrite always converted it to a bitmap. (lib/gs_lgo_e.ps [1.2]: 2000/04/07
02:48:23 lpd)

Provides a gs_atan2_degrees procedure to parallel sin and cos.
(zmath.c [1.2]: 2000/03/18 23:10:39 lpd)

Speeds up string garbage collection by scanning unmodified string regions
faster. (igcstr.c [1.2]: 2000/03/18 23:29:32 lpd)

Adds the ImagemaskTrapping parameter to the trapping state.
(lib/gs_trap.ps [1.2]: 2000/03/18 23:35:53 lpd)

Increments the version number to 6.20, in anticipation of the next release.
(We do this at the beginning of the development for a release, not the end.)
(lib/gs_init.ps [1.4]: 2000/03/19 00:27:22 lpd)

Adds a pseudo-encoding for the CFF StandardStrings that represent
characters. (lib/gs_cff.ps [1.2], lib/gs_css_e.ps [1.1]: 2000/03/19 00:38:50
lpd)

Refactors the code for getting Type 1/2/4 font parameters so it can be used
for FDArray entries of CIDFontType 0 fonts. (ifont1.h [1.2], zfont1.c [1.2]:
2000/03/19 02:07:45 lpd)

Speeds up Function evaluation slightly, by preallocating space for a
reasonable number of operands and results on the C stack rather than always
allocating it on the heap. (zfunc.c [1.3]: 2000/03/19 02:16:58 lpd)

Adds a public procedure for determining whether a PostScript object is a
Function, and if so, returning the pointer to the gs_function_t structure.
(ifunc.h [1.2], zfunc.c [1.4]: 2000/03/19 02:22:01 lpd)

Splits out the [T]BCP filter interface into a separate file. (zfbcp.c [1.2]:
2000/03/19 02:40:18 lpd)

Adds a skip_count parameter to the SubFileDecode filter, giving the number
of initial bytes or records to skip over. (Needed for printing FunctionType
4 functions, possibly useful for other things.) (sfilter1.c [1.3]:
2000/03/19 03:20:18 lpd)

Replaces the implementation of FunctionType 4 functions at the PostScript
language level with one that uses the new library-based facilities.
(zdevice2.c [1.2], zfunc4.c [1.2]: 2000/03/19 06:56:23 lpd)

Changes the key type returned by parameter list enumeration to include a
persistence flag, makes C parameter lists support non-persistent keys, and
upgrades GC descriptors so that parameter lists can be used non-transiently;
updates implementors of parameter lists to call gs_param_list_init to
initialize the common members, which is now required. (iparam.c [1.3]:
2000/03/19 15:16:11 lpd)

Makes Separation and DeviceN color spaces convert their tint transform
function to a FunctionType 4 Function if possible, for better accuracy and
to allow writing in PDF files. (lib/gs_lev2.ps [1.2], lib/gs_ll3.ps [1.2]:
2000/03/19 15:28:34 lpd)

Makes st_indexed_map private. Clients must now use the constructor procedure
alloc_indexed_map rather than allocating instances directly.
(zcsindex.c [1.2]: 2000/03/19 16:37:28 lpd)

Refactors the code for building fonts so it can be used for FDArray entries
of CIDFontType 0 fonts. (bfont.h [1.2], zbfont.c [1.2]: 2000/03/19 16:45:47
lpd)

Adds a .fileposition operator that will read the position even of
non-positionable streams, needed for the PDF linearizer. (zfileio.c [1.3]:
2000/03/20 04:30:49 lpd)

Starts to move support for CIDFontType 0 and 2 into C code, needed by the
PDF writer for handling CID-keyed fonts. Implements GlyphDirectory for
CIDFonts. Makes GDBytes and CIDMapOffset optional for CIDFontType 0 fonts
that have a GlyphDirectory (not documented in the PLRM, but clearly
correct). Implements Adobe 3011 features: integer and dictionary CIDMaps,
and the MetricsCount entry, in CIDFontType 2 fonts (but only in the C code,
which isn't hooked in yet, not in the PostScript code in gs_cidfn.ps.)
(icid.h [1.1], ifont.h [1.2], ifont42.h [1.1], zcid.c [1.2], zfcid.c [1.1],
zfcmap.c [1.3], zfont42.c [1.2]: 2000/03/20 19:53:06 lpd)

Hooks the new CIDMap code into the BuildGlyph procedure for CIDFontType 2
fonts. (Contrary to a previous log comment, MetricsCount is already hooked
in.) Support for CIDFontType 2 fonts is now implemented entirely in C, as
for Type 42 fonts. (lib/gs_cidfn.ps [1.6], zfcid.c [1.2]: 2000/03/21
00:32:15 lpd)

Extends the C support for CIDFontType 0 fonts to include those with FontType
2 subfonts in the FDArray (an Adobe 3011 addition, specifically for CFF
fonts). (ifont2.h [1.1], zfcid.c [1.4], zfont2.c [1.2]: 2000/03/21 07:43:42
lpd)

Changes Subr loading for CIDFontType 0 fonts from lazy to immediate, so that
C code can be guaranteed access to the Subrs. (In every CIDFontType 0 font
that we have seen, SubrCount is 5, so this has no significant time or space
cost.) Also adds support for FDBytes > 1 in GlyphDirectory definitions.
(lib/gs_cidfn.ps [1.7]: 2000/03/21 20:06:44 lpd)

Splits off the ReusableStreamDecode filter as a separate module, since
CIDFontType 0 fonts will use it even in LanguageLevels below 3.
(lib/gs_frsd.ps [1.1], lib/gs_ll3.ps [1.3], zfrsd.c [1.1]: 2000/03/21
21:34:57 lpd)

Makes file streams remember the file name, needed for efficiently
implementing reusable streams. (zfile.c [1.3], zfileio.c [1.4]: 2000/03/23
02:13:40 lpd)

Changes the new .filename operator to return true/false rather than causing
an error; redefines findlibfile in terms of a simpler .libfile operator +
.filename. (lib/gs_init.ps [1.5], zfile.c [1.4], zfileio.c [1.5]: 2000/03/23
18:47:17 lpd)

Finishes implementing the file case of ReusableStreamDecode. This required
adding the ability to restrict file-reading streams to a subfile.
(lib/gs_frsd.ps [1.2], sfilter1.c [1.4], zfileio.c [1.6], zfrsd.c [1.2]:
2000/03/24 03:59:42 lpd)

Changes the implementation of incrementally loaded CIDFontType 0 fonts to
use a ReusableStreamDecode filter, in anticipation of moving the BuildGlyph
procedure for these fonts from PostScript to C. (lib/gs_cidfn.ps [1.8],
zbfont.c [1.3], zfcid.c [1.5]: 2000/03/27 16:36:24 lpd)

Changes the get_outline / glyph_data procedure for getting encoded font
outline data to return an indication of whether the outline data were just
allocated and can be freed by the client. (This is a possibly
non-backward-compatible change.) (zfcid.c [1.6]: 2000/03/28 18:47:02 lpd)

Changes the procs structure of gs_type1_data to an in-line structure rather
than a pointer to a const structure. (Needed for moving CIDFontType 0
support into C.) (zfont1.c [1.3]: 2000/03/29 22:10:31 lpd)

Finishes moving support for CIDFontType 0 fonts from PostScript to C.
(ifont.h [1.3], ifont42.h [1.2], lib/gs_cidfn.ps [1.10], zfcid.c [1.7],
zfont42.c [1.4]: 2000/03/31 04:55:18 lpd)

Allows dictionaries as the value of CIDMap resources. (Also removes an
unrelated obsolete comment.) (lib/gs_cidfn.ps [1.11]: 2000/03/31 05:11:30
lpd)

Finishes implementing the ability to write CIDFontType 0 CFFs. This involved
a surprising number of changes in other font-related files. (ichar1.h [1.2],
ifcid.h [1.1], zchar1.c [1.2], zfcid.c [1.9], zfcid0.c [1.1],
zfcid1.c [1.1], zfont1.c [1.4]: 2000/04/02 07:38:46 lpd)

Makes the .writefont9 operator (used only for testing) available in both
DEBUG and PROFILE configurations. (zfcid0.c [1.2]: 2000/04/03 02:37:55 lpd)

Extends .forceput to handle arrays as well as dictionaries, required to fix
a bug with internaldict. (zdict.c [1.2], zgeneric.c [1.2]: 2000/04/04
22:13:23 lpd)

Works around an Adobe code assumption that the default FindResource
procedure does *not* call the ResourceStatus procedure if the requested
instance is already defined in VM. (lib/gs_res.ps [1.7]: 2000/04/05 23:31:54
lpd)

Implements the framework for superexec (but none of the actual access check
bypasses). (icontext.c [1.2], icstate.h [1.2], zcontrol.c [1.2]: 2000/04/06
04:40:06 lpd)

Extends the undocumented CCRun procedure to take an additional argument, a
Private dictionary, required by some Adobe font downloading code.
(lib/gs_type1.ps [1.3]: 2000/04/06 05:25:10 lpd)

</pre><h2><a name="6.20 Streams"></a>Streams</h2><pre>

Fixes problems:
	- s_add_filter didn't ensure enough buffering. This entailed moving
the NullEncode/Decode filters to stream.[hc]. (sfilter.h [1.3],
stream.c [1.3], stream.h [1.3]: 2000/03/19 03:15:02 lpd)
	- When FPU_TYPE <= 0, the image interpolation code lost too much
accuracy, producing color streaks in the output. (Fix by DanCoby.)
(siscale.c [1.2]: 2000/03/29 20:34:45 lpd)
	- Fixes a couple of typos in the recently checked-in image
interpolation fix. (siscale.c [1.3]: 2000/03/30 06:55:26 lpd)

Splits out the [T]BCP filter interface into a separate file. (sbcp.c [1.2],
sbcp.h [1.1], sfilter.h [1.2]: 2000/03/19 02:40:18 lpd)

Adds a skip_count parameter to the SubFileDecode filter, giving the number
of initial bytes or records to skip over. (Needed for printing FunctionType
4 functions, possibly useful for other things.) (sfilter.h [1.4]: 2000/03/19
03:20:18 lpd)

Changes the key type returned by parameter list enumeration to include a
persistence flag, makes C parameter lists support non-persistent keys, and
upgrades GC descriptors so that parameter lists can be used non-transiently;
updates implementors of parameter lists to call gs_param_list_init to
initialize the common members, which is now required. (spsdf.c [1.2]:
2000/03/19 15:16:11 lpd)

Makes file streams remember the file name, needed for efficiently
implementing reusable streams. (stream.c [1.4], stream.h [1.4]: 2000/03/23
02:13:40 lpd)

Finishes implementing the file case of ReusableStreamDecode. This required
adding the ability to restrict file-reading streams to a subfile.
(sfxfd.c [1.2], sfxstdio.c [1.2], stream.c [1.5], stream.h [1.5]: 2000/03/24
03:59:42 lpd)

Changes a few initializations to suppress warnings from one picky compiler
that doesn't like ptr = buf - 1 where buf is an array. (spsdf.c [1.3]:
2000/03/28 02:01:34 lpd)

</pre><h2><a name="6.20 Library"></a>Library</h2><pre>

Fixes problems:
	- Two comments in the file were incorrect. (gsiparm3.h [1.2]:
2000/03/19 02:46:11 lpd)
	- param_coerce_typed, which works with any parameter list
implementation, was incorrectly described as associated with the default
implementation. (gsparam.h [1.2]: 2000/03/19 03:37:08 lpd)
	- TrueType fonts didn't use vhea/vmtx if WMode = 1. Also makes
gs_font_type42 subclassable, for implementing CIDFontType 2 fonts, and makes
its procedure for getting a glyph's side bearing and width virtual, required
to support MetricsCount in CIDFontType 2 fonts. (gstype42.c [1.3],
gxfont42.h [1.2]: 2000/03/19 03:58:51 lpd)
	- ImageType 4 images didn't give an error for out-of-range MaskColor
values. The file also had an unnecessary #include. (gximage4.c [1.2]:
2000/03/19 04:10:09 lpd)
	- If log2_transfer_map_size > 8, identity transfer functions
returned garbage. The fix requires that if a client wants to set a transfer
function to the identity mapping, it must call gx_set_identity_transfer
rather than simply setting the procedure to gs_identity_transfer.
(gxclrast.c [1.3], gxcmap.c [1.2], gxfmap.h [1.2]: 2000/03/19 17:14:47 lpd)
	- Fixes a warning about aliasing produced by one extremely picky
compiler. (gsnogc.c [1.2]: 2000/03/22 21:39:32 lpd)
	- Filling or clipping with ridiculously large (out-of-bounds)
coordinates could cause an internal overflow that produced incorrect
results. (This is probably not the last such bug.) (gxfill.c [1.2]:
2000/03/30 07:03:59 lpd)

Provides a gs_atan2_degrees procedure to parallel sin and cos.
(gsmisc.c [1.2], gxfarith.h [1.2]: 2000/03/18 23:10:39 lpd)

Improves the 8x8 bitmap "flipping" procedure to take advantage of 32-bit
ints. (gsutil.c [1.2]: 2000/03/18 23:16:16 lpd)

Adds a public procedure for restricting a color to its legal range.
(gscspace.c [1.2], gscspace.h [1.2], gxcspace.h [1.2]: 2000/03/18 23:19:17
lpd)

Adds the new ImagemaskTrapping parameter to the trapping state.
(gstrap.c [1.2], gstrap.h [1.2]: 2000/03/18 23:26:17 lpd)

Increments the version number to 6.20, in anticipation of the next release.
(We do this at the beginning of the development for a release, not the end.)
(gscdef.c [1.2]: 2000/03/19 00:27:22 lpd)

Adds a pseudo-encoding for the CFF StandardStrings that represent
characters. (gsccode.h [1.2]: 2000/03/19 00:38:50 lpd)

Adds a bit_index procedure to the implementation of device halftones,
required for writing halftones in PDF files. (The only implementors are
internal ones.) (gxdht.h [1.2], gxhtbit.c [1.2]: 2000/03/19 05:10:55 lpd)

Adds a public procedure for getting a palette entry of an Indexed color
space, used when writing Indexed color spaces in PDF files.
(gscindex.h [1.1], gscolor2.c [1.2], gscolor2.h [1.2]: 2000/03/19 05:20:28
lpd)

Reimplements "PostScript calculator" (FunctionType 4) functions entirely in
C, to allow them to be written out in PDF files. (gsfunc4.c [1.1],
gsfunc4.h [1.1], gsstruct.h [1.2]: 2000/03/19 05:25:53 lpd)

Moves gx_device_color_equal to the public API, for detecting redundant color
setting when writing PDF files. (gsdcolor.h [1.2], gxdcolor.c [1.2],
gxdcolor.h [1.2]: 2000/03/19 06:46:08 lpd)

Changes the default value of BufferSpace to 4 Mb. In desktop applications,
this is a reasonable value that can substantially improve performance
(especially for color printers); embedded applications will want to set
BufferSpace themselves in any case. (gdevprn.h [1.2]: 2000/03/19 06:51:13
lpd)

Adds virtual procedures for Functions to write their parameters to a
parameter list, and to access their data source and subfunctions. This is
needed for writing Functions in PDF files. This change is also a
prerequisite for the C implemention of FunctionType 4 functions, even though
it appears later in the change log. (gsdsrc.h [1.2], gsfunc.c [1.2],
gsfunc.h [1.2], gsfunc0.c [1.2], gsfunc3.c [1.2], gsparam.c [1.2],
gsparam.h [1.3], gxfunc.h [1.2]: 2000/03/19 07:24:53 lpd)

Splits off "vanilla" Functions into separate files, in anticipation of
removing them (they were only used to implement PostScript Calculator
Functions). (gsfunc.c [1.3], gsfunc.h [1.3], gsfuncv.c [1.1],
gsfuncv.h [1.1]: 2000/03/19 07:33:08 lpd)

Adds a procedure for allocating a C parameter list. (gscparam.c [1.2],
gsparam.h [1.4]: 2000/03/19 15:00:05 lpd)

Undoes a premature change that depends on an update not yet checked in.
(gscparam.c [1.3]: 2000/03/19 15:07:59 lpd)

Changes the key type returned by parameter list enumeration to include a
persistence flag, makes C parameter lists support non-persistent keys, and
upgrades GC descriptors so that parameter lists can be used non-transiently;
updates implementors of parameter lists to call gs_param_list_init to
initialize the common members, which is now required. (gscparam.c [1.4],
gsparam.c [1.3], gsparam.h [1.5]: 2000/03/19 15:16:11 lpd)

Adds a procedure for copying one parameter list to another.
(gsparamx.c [1.2], gsparamx.h [1.2]: 2000/03/19 15:35:31 lpd)

Records the CTM used for sampling HalftoneType 1 spot functions. This is
needed for recognizing the standard spot functions when producing PDF
output. Also factors the code for initializing spot functions for the
benefit of the PDF writer. (gshtscr.c [1.2], gxdht.h [1.3], gzht.h [1.2]:
2000/03/19 15:43:36 lpd)

Adds a proc_data member to the map for Separation and Indexed color spaces.
(gscolor2.c [1.3], gxcolor2.h [1.2]: 2000/03/19 16:23:46 lpd)

Makes st_indexed_map private. Clients must now use the constructor procedure
alloc_indexed_map rather than allocating instances directly.
(gscolor2.c [1.4], gscsepr.c [1.2], gxclrast.c [1.2], gxcolor2.h [1.3]:
2000/03/19 16:37:28 lpd)

Adds procedures for building and accessing DeviceN color spaces.
(gscdevn.c [1.2], gscdevn.h [1.1]: 2000/03/19 17:02:37 lpd)

Exports the 'blend' operators of the Type 1 interpreter, for use by the Type
1 / Type 2 font writer. (gstype1.c [1.3], gxtype1.c [1.2], gxtype1.h [1.3]:
2000/03/19 18:46:44 lpd)

Starts to move support for CIDFontType 0 and 2 fonts into C code. (These
header files are the ones needed to compile the new gdevpsf* files; they
don't interact with any existing code.) (gxcid.h [1.1], gxfcid.h [1.1]:
2000/03/20 06:40:22 lpd)

Moves font-writing support into a new module (gdevpsf*), changing the source
file names. Adds the ability to write CFF fonts, with either Type 1 or Type
2 CharStrings; unfortunately, Acrobat Reader appears not to accept CFF fonts
with Type 1 CharStrings. Adds the ability to convert Type 1 CharStrings to
Type 2, including optimizing sequences of Type 1 operators into a single
Type 2 operator. Implements writing CIDFontType 0 CFF fonts (CIDFonts) [NOT
TESTED]. Starts (just barely) to remove more unneeded information from
embedded TrueType fonts. (gxttf.h [1.1]: 2000/03/20 07:02:12 lpd)

Starts to move support for CIDFontType 0 and 2 into C code, needed by the
PDF writer for handling CID-keyed fonts. Implements GlyphDirectory for
CIDFonts. Makes GDBytes and CIDMapOffset optional for CIDFontType 0 fonts
that have a GlyphDirectory (not documented in the PLRM, but clearly
correct). Implements Adobe 3011 features: integer and dictionary CIDMaps,
and the MetricsCount entry, in CIDFontType 2 fonts (but only in the C code,
which isn't hooked in yet, not in the PostScript code in gs_cidfn.ps.)
(gsfcid.c [1.1], gsfcmap.c [1.3], gxfcmap.h [1.2], gxfont1.h [1.2]:
2000/03/20 19:53:06 lpd)

Changes a few initializations to suppress warnings from one picky compiler
that doesn't like ptr = buf - 1 where buf is an array. (gxclpath.c [1.2]:
2000/03/28 02:01:34 lpd)

Changes the get_outline / glyph_data procedure for getting encoded font
outline data to return an indication of whether the outline data were just
allocated and can be freed by the client. (This is a possibly
non-backward-compatible change.) (gxfcid.h [1.2], gxfont42.h [1.3]:
2000/03/28 18:47:02 lpd)

Changes the procs structure of gs_type1_data to an in-line structure rather
than a pointer to a const structure. (Needed for moving CIDFontType 0
support into C.) (gstype1.c [1.4], gstype2.c [1.3], gxfont1.h [1.3],
gxtype1.c [1.3]: 2000/03/29 22:10:31 lpd)

Finishes moving support for CIDFontType 0 fonts from PostScript to C.
(gxfcid.h [1.3]: 2000/03/31 04:55:18 lpd)

Finishes implementing the ability to write CIDFontType 0 CFFs. This involved
a surprising number of changes in other font-related files. (gsfcid.c [1.2],
gxfcid.h [1.4]: 2000/04/02 07:38:46 lpd)

<hr>

<h1><a name="Version6.01"></a>Version 6.01 (2000-03-17)</h1>

This is a bug-fix release for 6.0.

This release fixes the following reported bugs: #101555, #101813, #101816,
#101818, #101827, #101830, #101871, #101853, #101906, #101949, #101950,
#102003, #102004, #102038, #102081, #102936.

<h2><a name="6.01_Incompatible_changes"></a>Incompatible changes</h2>

(Platforms)
	- OpenVMS using VAX C is no longer supported.  (OpenVMS with DEC C
and gcc are still supported.)
(Drivers)
	- The third argument of psdf_set_color is changed from const char *
to const psdf_set_color_commands_t *.
(Interpreter)
	- The non-standard feature of writing dictionaries in binary object
output is now disabled by default, but can now be enabled dynamically.
(Library)
	- The definition of TRANSPARENCY_PER_H_P is moved from gdevmrop.h to
gsropt.h.
	- The handling of the source opaque, texture transparent case of
RasterOp when TRANSPARENCY_PER_H_P is defined is changed slightly.


<h2><a name="6.01 Documentation"></a>Documentation</h2><pre>

Fixes problems:
	- Fixes a typo. (man/ps2pdf.1 [1.2]: 2000/03/10 03:11:06 lpd)
	- When converting PostScript to PDF, selecting /Bicubic as an image
DownsampleType caused an error instead of defaulting to /Average.
(doc/Ps2pdf.htm [1.2]: 2000/03/10 04:16:09 lpd)
	- The gs###src.zip and gs###lib.zip files weren't mentioned as being
included in distributions; News.htm and Changes.htm weren't mentioned at
all. (doc/Release.htm [1.5]: 2000/03/15 07:23:52 lpd)
	- Fixes a problem producing too much black in the output; also adds
support for 5 new printers (H-P Color DeskJet 690, H-P DesignJet 750, and
Epson Stylus Color 200). Note that this is user-contributed code.
(doc/Devices.htm [1.2]: 2000/03/16 02:01:36 lpd)

In ansi2knr, adds user-contributed support for concatenated string literals
and character constants, and fixes for a couple of minor bugs.
(man/ansi2knr.1 [1.2]: 2000/03/10 03:16:17 lpd)

Removes an inappropriate copying notice. (doc/Hershey.htm [1.2]: 2000/03/10
07:03:57 lpd)

Clarifies when xdpyinfo and xwininfo are needed. Adds privacy options for
problem reports. (doc/Bug-form.htm [1.2]: 2000/03/10 07:06:08 lpd)

Adds a new eps2eps utility analogous to ps2ps. (man/eps2eps.1 [1.1],
man/ps2ps.1 [1.2]: 2000/03/10 07:51:55 lpd)

Updates the documentation on making RPMs, which is no longer supported.
(doc/Install.htm [1.2], doc/Make.htm [1.2]: 2000/03/10 07:58:00 lpd)

Adds a recommendation to use gcc on SGI platforms. (doc/Make.htm [1.3]:
2000/03/10 07:59:53 lpd)

Updates documentation regarding Unix systems that do/don't use libpthread.
(doc/Make.htm [1.4]: 2000/03/10 08:01:35 lpd)

Removes support for VAX C, which DEC stopped supporting 9 (!) years ago.
(doc/Make.htm [1.5], doc/Use.htm [1.2]: 2000/03/10 08:02:59 lpd)

Updates the documentation for building Aladdin releases to reflect revised
procedures for the Windows executable, and a few other minor changes.
(doc/Release.htm [1.2]: 2000/03/10 15:55:39 lpd)

Adds the ability to compile on OS/2 with XFree86. (doc/Install.htm [1.3],
doc/Make.htm [1.6]: 2000/03/10 19:50:49 lpd)

Moves all history for versions 5.n into History5.htm; creates History6.htm
for versions 6.n; redefines News.htm as containing only news for the current
release; adds (a link to) Changes.htm for the mechanically generated change
log. (doc/History5.htm [1.2], doc/History6.htm [1.1], doc/News.htm [1.2],
doc/README [1.2], doc/Readme.htm [1.2]: 2000/03/14 06:14:43 lpd)

Partially updates the release procedure documentation to reflect the use of
SourceForge and CVS. (doc/Release.htm [1.3]: 2000/03/14 06:39:23 lpd)

Adds a change log generated mechanically from the CVS logs. Future releases
may omit this file (doc/Changes.htm) from their change log.
(doc/Changes.htm [1.1], doc/News.htm [1.3]: 2000/03/14 06:48:44 lpd)

Revises the release procedures to reflect use of SourceForge, and to
separate out the procedures for building Windows executables.
(doc/Release.htm [1.4]: 2000/03/15 02:24:58 lpd)

Adds information on uninstalling Ghostscript on Windows.
(doc/Install.htm [1.4]: 2000/03/15 07:29:53 lpd)

Adds the ability to set the ProcessColorModel of the pdfwrite device to
/DeviceGray, /DeviceRGB, or /DeviceCMYK. This affects the color space used
for fill, stroke, text, and imagemask, and for images that (for whatever
reason) can't be written in their specified color space. Note that this is a
short-term fix: pdfwrite should output colors in the color space in which
they were specified. However, a proper fix will require more significant
architectural changes. (doc/News.htm [1.4]: 2000/03/16 01:21:23 lpd)

Adds a reference to a third-party Fontmap for the Computer Modern fonts.
(doc/Fonts.htm [1.2]: 2000/03/16 04:05:07 lpd)

Adds documentation and a makefile entry for Matthew Gelhaus' cdj880 driver.
The code will eventually be included in gdevcd8.c, but it is not yet mature
enough. (doc/Devices.htm [1.3]: 2000/03/16 08:09:42 lpd)

Updates the version number reference in the troff header.
(man/ps2pdf.1 [1.3], man/ps2ps.1 [1.3]: 2000/03/17 00:47:08 lpd)

Removes the attempted documentation on building Windows executable
distributions: it was never correct, and Aladdin will no longer be creating
such distributions. Also reorganizes the document slightly and brings the
rest of it fully into line with reality. (doc/Release.htm [1.6]: 2000/03/17
04:40:47 lpd)

Adds information on building with the Intel C/C++ optimizing compiler
(requires the Microsoft Visual C++ environment), and fixes a typo in the
link to ftp.cdrom.com. (doc/Make.htm [1.7]: 2000/03/17 17:42:59 lpd)

Checks in the first wrap-up for the 6.01 release. (doc/Changes.htm [1.2],
doc/History6.htm [1.2], doc/News.htm [1.5]: 2000/03/18 04:13:40 lpd)

</pre><h2><a name="6.01 Procedures"></a>Procedures</h2><pre>

Fixes problems:
	- The terminating $ on the $Id: line in gsmalloc.c was missing, and
dwuninst.rc lacked a $Id: line. (dwuninst.rc [1.2]: 2000/03/10 03:44:33 lpd)
	- The %ram% IODevice was defined, but should not be (it represents a
RAM-based file system, which Ghostscript does not provide). Fix: The type of
the %null% IODevice was /FileSystem rather than /Special. (int.mak [1.2]:
2000/03/10 07:02:07 lpd)
	- The dependency list for coslwxl omitted a $(DD).
(contrib.mak [1.2]: 2000/03/10 07:30:54 lpd)
	- The makefile still referred to a long-gone driver for the DEC
LA70. (contrib.mak [1.3]: 2000/03/10 07:32:43 lpd)
	- The Unix install process tried to make links without deleting them
first. (unixinst.mak [1.2]: 2000/03/10 07:49:21 lpd)
	- The Watcom compiler switches didn't force enums to occupy a full
int, leading to execution errors because the code casts (enum *) pointers to
(int *). (wccommon.mak [1.2]: 2000/03/10 08:15:31 lpd)
	- The Windows zip archive didn't include font metrics files. (This
change only fixes the build procedure: it doesn't actually update the
currently released zip archive.) (winint.mak [1.2]: 2000/03/10 08:17:06 lpd)
	- the "all architectures" build and test script hadn't been updated
to use different STDLIBS values depending on where the platform provides the
pthreads library. (all-arch.mak [1.2]: 2000/03/10 15:40:43 lpd)
	- The documentation for building with pthreads on FreeBSD hadn't
been updated. (unix-gcc.mak [1.2], unixansi.mak [1.2], unixtrad.mak [1.2]:
2000/03/10 15:44:01 lpd)
	- gsmalloc.c didn't include the prototype for gs_exit(), which it
calls. (lib.mak [1.2]: 2000/03/10 15:53:08 lpd)

Because of rampant confusion, disagreement, and lack of standardization,
removes the RPM-related spec and patch files. (gs-fonts.rps [1.2],
gs.rps [1.2], rpm-conf.dif [1.2]: 2000/03/10 03:22:04 lpd)

Increases the stack size for the PC platforms, since a user had reported
that the OS/2 stack size was too small. (dw32c.def [1.2],
dwmain32.def [1.2], gsos2.def [1.2]: 2000/03/10 03:33:21 lpd)

Updates the Brother HL7xx drivers with a new user-contributed version, plus
a couple of minor fixes. (contrib.mak [1.4]: 2000/03/10 07:33:44 lpd)

Adds a new eps2eps utility analogous to ps2ps. (unixinst.mak [1.3]:
2000/03/10 07:51:55 lpd)

Removes support for VAX C, which DEC stopped supporting 9 (!) years ago.
(openvms.mak [1.2], openvms.mmk [1.2]: 2000/03/10 08:02:59 lpd)

Updates all makefiles to the current libpng version, 1.0.5.
(bcwin32.mak [1.2], dvx-gcc.mak [1.2], msvc32.mak [1.2], msvclib.mak [1.2],
os2.mak [1.2], ugcclib.mak [1.2], unix-gcc.mak [1.3], unixansi.mak [1.3],
unixtrad.mak [1.3], watc.mak [1.2], watclib.mak [1.2], watcw32.mak [1.2]:
2000/03/10 15:48:58 lpd)

Updates the version # to 6.01, and the version date. (version.mak [1.2]:
2000/03/10 17:18:29 lpd)

Adds the ability to compile on OS/2 with XFree86. (os2.mak [1.3]: 2000/03/10
19:50:49 lpd)

Moves all history for versions 5.n into History5.htm; creates History6.htm
for versions 6.n; redefines News.htm as containing only news for the current
release; adds (a link to) Changes.htm for the mechanically generated change
log. (unixinst.mak [1.4], version.mak [1.3]: 2000/03/14 06:14:44 lpd)

Adds entries for ibm-rs6000-aix-4.3, sgi-mips-irix6.5-64bit, and
sun-sparc-solaris-64bit. (all-arch.mak [1.3]: 2000/03/15 18:38:29 lpd)

Adds the ability to set the ProcessColorModel of the pdfwrite device to
/DeviceGray, /DeviceRGB, or /DeviceCMYK. This affects the color space used
for fill, stroke, text, and imagemask, and for images that (for whatever
reason) can't be written in their specified color space. Note that this is a
short-term fix: pdfwrite should output colors in the color space in which
they were specified. However, a proper fix will require more significant
architectural changes. (version.mak [1.4]: 2000/03/16 01:21:24 lpd)

Adds documentation and a makefile entry for Matthew Gelhaus' cdj880 driver.
The code will eventually be included in gdevcd8.c, but it is not yet mature
enough. (contrib.mak [1.5]: 2000/03/16 08:09:42 lpd)

Adds a missing dependency of gdevpdft.o on gxfont42.h. (devs.mak [1.2]:
2000/03/17 02:59:26 lpd)

Adds a disclaimer of responsibility for the makefile section for creating
distribution archives, which Aladdin is no longer maintaining.
(winint.mak [1.3]: 2000/03/17 03:01:58 lpd)

Checks in the first wrap-up for the 6.01 release. (unix-gcc.mak [1.4],
version.mak [1.5]: 2000/03/18 04:13:40 lpd)

</pre><h2><a name="6.01 Utilities"></a>Utilities</h2><pre>

Fixes problems:
	- The loader for the stochastic halftone incorrectly assumed that
the resource file left the resource on the stack, causing a stackunderflow
error. (lib/stocht.ps [1.2]: 2000/03/10 03:34:44 lpd)
	- The ps2pdf*.bat scripts didn't set PS2PDFSW to the empty string if
there were no arguments, causing the same file to be processed again.
(lib/ps2pdf12.bat [1.2], lib/ps2pdf13.bat [1.2]: 2000/03/10 07:40:00 lpd)
	- Fixes a typo in the fix for putting stdout in binary mode.
(gp_ntfs.c [1.3]: 2000/03/18 01:15:16 lpd)
	- For printer devices, a non-null definition for OutputFile was
required even on platforms that had a default printer (as implemented by
gp_open_printer for that platform). (gp_os9.c [1.2], gp_unix.c [1.2],
gp_vms.c [1.2]: 2000/03/18 01:45:16 lpd)

In ansi2knr, adds user-contributed support for concatenated string literals
and character constants, and fixes for a couple of minor bugs.
(ansi2knr.c [1.2]: 2000/03/10 03:16:17 lpd)

Updates the pf2afm.ps utility with a revised version from its authors.
(lib/pf2afm.ps [1.2]: 2000/03/10 03:35:37 lpd)

Adds a new eps2eps utility analogous to ps2ps. (lib/eps2eps [1.1],
lib/eps2eps.bat [1.1]: 2000/03/10 07:51:55 lpd)

Removes a temporary file that was included in the fileset by mistake.
(lib/history [1.2]: 2000/03/10 08:18:36 lpd)

Changes the ps2pdf MS Windows / MS-DOS scripts to use temporary files to
avoid the absurdly low limits on the length of a command line and the total
size of environment variable definitions. (lib/ps2pdf.bat [1.2],
lib/ps2pdf12.bat [1.3], lib/ps2pdf13.bat [1.3], lib/ps2pdfwr.bat [1.2],
lib/ps2pdfxx.bat [1.1]: 2000/03/14 20:20:20 lpd)

On Windows, puts stdout into binary mode as well as stdin, to allow piping
printer output through stdout (not a good idea, but it should be supported
as well as on other platforms). (gp_ntfs.c [1.2]: 2000/03/17 06:22:59 lpd)

</pre><h2><a name="6.01 Drivers"></a>Drivers</h2><pre>

Fixes problems:
	- When converting PostScript to PDF, selecting /Bicubic as an image
DownsampleType caused an error instead of defaulting to /Average.
(gdevpsdf.h [1.2], gdevpsdi.c [1.2], gdevpsdp.c [1.2]: 2000/03/10 04:16:09
lpd)
	- The mswinpr2 driver didn't handle setting BitsPerPixel to the same
value when the device was already open, possibly causing an error on restore
or grestore. (gdevwpr2.c [1.2]: 2000/03/10 04:26:07 lpd)
	- When operating in buffered mode (MaxBitmap > 0), the X driver
sometimes failed to copy all of the updated area to the screen.
(gdevx.c [1.2], gdevx.h [1.2], gdevxini.c [1.2], gdevxxf.c [1.2]: 2000/03/10
06:56:27 lpd)
	- The [e]pswrite driver produced invalid output if the input file
didn't end with a showpage. Also cleans up some formatting and removes a
redundant test. (gdevps.c [1.2]: 2000/03/10 07:44:27 lpd)
	- Fixes a problem producing too much black in the output; also adds
support for 5 new printers (H-P Color DeskJet 690, H-P DesignJet 750, and
Epson Stylus Color 200). Note that this is user-contributed code.
(gdevupd.c [1.2], lib/bjc610a0.upp [1.2], lib/bjc610a1.upp [1.2],
lib/bjc610a2.upp [1.2], lib/bjc610a3.upp [1.2], lib/bjc610a4.upp [1.2],
lib/bjc610a5.upp [1.2], lib/bjc610a6.upp [1.2], lib/bjc610a7.upp [1.2],
lib/bjc610a8.upp [1.2], lib/bjc610b1.upp [1.2], lib/bjc610b2.upp [1.2],
lib/bjc610b3.upp [1.2], lib/bjc610b4.upp [1.2], lib/bjc610b6.upp [1.2],
lib/bjc610b7.upp [1.2], lib/bjc610b8.upp [1.2], lib/cdj550.upp [1.2],
lib/cdj690.upp [1.1], lib/cdj690ec.upp [1.1], lib/dnj750c.upp [1.1],
lib/dnj750m.upp [1.1], lib/ras32.upp [1.2], lib/stc.upp [1.2],
lib/stc1520h.upp [1.2], lib/stc2.upp [1.2], lib/stc200_h.upp [1.1],
lib/stc2_h.upp [1.2], lib/stc2s_h.upp [1.2], lib/stc500p.upp [1.2],
lib/stc500ph.upp [1.2], lib/stc600ih.upp [1.2], lib/stc600p.upp [1.2],
lib/stc600pl.upp [1.2], lib/stc800ih.upp [1.2], lib/stc800p.upp [1.2],
lib/stc800pl.upp [1.2], lib/stc_h.upp [1.2], lib/stc_l.upp [1.2],
lib/stcany.upp [1.2]: 2000/03/16 02:01:36 lpd)
	- The X driver's algorithm for deciding when to update the screen
was changed several times between 5.50 and 6.0, and one of the more recent
changes caused it to copy many more pixels to the screen than necessary if
the file was making marks on the page in widely separated places.
(gdevx.c [1.3]: 2000/03/17 07:35:43 lpd)
	- In the X driver, the full-page buffer controlled by -dMaxBitmap=
wasn't allocated with a stable allocator, possibly leading to memory access
errors if save/restore were used. (gdevxini.c [1.3]: 2000/03/18 04:11:59
lpd)

Updates the Brother HL7xx drivers with a new user-contributed version, plus
a couple of minor fixes. (gdevhl7x.c [1.2]: 2000/03/10 07:33:44 lpd)

Enhances the [e]pswrite driver to handle Indexed color spaces over Device
color spaces, only with the standard Decode. (gdevps.c [1.3]: 2000/03/10
07:45:50 lpd)

Adds the ability to set the ProcessColorModel of the pdfwrite device to
/DeviceGray, /DeviceRGB, or /DeviceCMYK. This affects the color space used
for fill, stroke, text, and imagemask, and for images that (for whatever
reason) can't be written in their specified color space. Note that this is a
short-term fix: pdfwrite should output colors in the color space in which
they were specified. However, a proper fix will require more significant
architectural changes. (gdevpsdf.c [1.2], gdevpsdf.h [1.3]: 2000/03/16
01:21:24 lpd)

Adds two more user-contributed 'uniprint' printer parameter sets: Epson
Stylus Color 640, and a generic Epson Stylus Color in high resolution mode
(720x720 dpi). (lib/stc640p.upp [1.1], lib/stcany_h.upp [1.1]: 2000/03/16
02:03:40 lpd)

</pre><h2><a name="6.01 PDF writer"></a>PDF writer</h2><pre>

Fixes problems:
	- In-line images emitted an extra 'q' (gsave), causing the CTM to
become incorrect, entries to pile up on the dictionary stack, and an
invalidrestore error to occur at the end of the page. (gdevpdfi.c [1.2]:
2000/03/10 03:47:37 lpd)
	- The change in 5.99 to work around Acrobat Reader's 32K limit on
user space coordinates caused all 0-width rectangles to disappear, which had
major effects on some files. (gdevpdfd.c [1.2]: 2000/03/10 03:48:10 lpd)
	- Incrementally downloaded TrueType fonts produced truncated Widths
tables in the output. We have patched this with a ******HACK****** that
causes such fonts to be converted to bitmaps: the correct fix (to delay
determining the range of valid characters until the font is written) is too
large a change to make in a bug fix release. (gdevpdft.c [1.2]: 2000/03/10
03:48:48 lpd)

Adds the ability to set the ProcessColorModel of the pdfwrite device to
/DeviceGray, /DeviceRGB, or /DeviceCMYK. This affects the color space used
for fill, stroke, text, and imagemask, and for images that (for whatever
reason) can't be written in their specified color space. Note that this is a
short-term fix: pdfwrite should output colors in the color space in which
they were specified. However, a proper fix will require more significant
architectural changes. (gdevpdf.c [1.2], gdevpdfd.c [1.3], gdevpdfi.c [1.3],
gdevpdfp.c [1.2], gdevpdft.c [1.3], gdevpdfu.c [1.2], gdevpdfx.h [1.2]:
2000/03/16 01:21:24 lpd)

</pre><h2><a name="6.01 Interpreter (PDF)"></a>Interpreter (PDF)</h2><pre>

Fixes problems:
	- When interpreting a PDF file, the Install page device procedure
got more and more deeply nested after every page, eventually causing an
execstackoverflow. (lib/pdf_main.ps [1.2]: 2000/03/10 03:56:11 lpd)
	- When interpreting a PDF file, text drawing operators didn't reset
the text position, so strings could get displayed on top of each other. (bug
introduced by a fix in 5.98) (lib/pdf_ops.ps [1.2]: 2000/03/10 03:57:03 lpd)
	- When interpreting a PDF file, substituted small-cap fonts were
created with incorrect scaling. (lib/pdf_font.ps [1.2]: 2000/03/10 03:57:50
lpd)

Cleans up some formatting. (lib/pdf_base.ps [1.2]: 2000/03/10 03:58:14 lpd)

</pre><h2><a name="6.01 Interpreter"></a>Interpreter</h2><pre>

Fixes problems:
	- There were extraneous 'def' commands that caused definitions to be
made in the wrong dictionary. (lib/gs_ttf.ps [1.2]: 2000/03/10 03:31:39 lpd)
	- If an error occurred while loading a font, it wouldn't produce an
error message. (This is a 'fix' of a 'fix' of a 'fix': it might well break
something else.) (lib/gs_type1.ps [1.2]: 2000/03/10 03:37:14 lpd)
	- When reading the strings of a binary object sequence, having to
get more data from a procedure-based stream sometimes caused a syntaxerror.
Fix: If the reserved (0) field in binary objects or binary object sequences
was not 0, no syntaxerror occurred. (iscanbin.c [1.2]: 2000/03/10 03:38:50
lpd)
	- The code for handling execstackoverflow errors didn't cut back the
stack correctly, possibly causing invalid memory accesses if an incorrect
attempt was made to run a cleanup procedure. (interp.c [1.2]: 2000/03/10
04:04:38 lpd)
	- Writing of dictionaries in binary object output, a non-standard
extension, was enabled by default, and also had to be enabled at startup
time if it was ever going to be used. Fix: Binary error messages caused an
error if the command wasn't of a type that printobject could handle. We now
do what the Adobe implementations appear to do in this case, namely, convert
the object with cvs. (lib/gs_btokn.ps [1.2]: 2000/03/10 04:27:31 lpd)
	- CloseSource and CloseTarget were effectively ignored for Flate and
LZW filters with a Predictor, and for the DCT filters. (ifilter.h [1.2],
zfdctd.c [1.2], zfdcte.c [1.2], zfdecode.c [1.2], zfilter.c [1.2],
zfilter2.c [1.2]: 2000/03/10 04:32:51 lpd)
	- findlibfile didn't handle %iodevice% prefixes correctly.
(zfile.c [1.2]: 2000/03/10 04:35:08 lpd)
	- fileposition didn't give an error for filters or non-seekable
streams. (zfileio.c [1.2]: 2000/03/10 04:35:53 lpd)
	- Images with input from a file or filter demanded 1 byte of data
too many, sometimes causing the last line of the image to be dropped. (bug
probably introduced in 6.0) (zimage.c [1.2]: 2000/03/10 04:37:02 lpd)
	- The check for a show within a cshow procedure for a CID font was
wrong. Fix: Character widths in CIDFontType 0 fonts were ignored (!). Adds a
.glyphwidth operator to support correct handling of character widths for CID
fonts. Adds a glyphwidth procedure to the library, like glyphshow and
glyphpath, in order to support correct handling of widths for CID fonts.
(ichar.h [1.2], lib/gs_cidfn.ps [1.2], zchar.c [1.2], zcharx.c [1.2]:
2000/03/10 04:41:47 lpd)
	- resourcestatus for fonts was broken. (lib/gs_res.ps [1.2]:
2000/03/10 04:54:15 lpd)
	- Fixes incorrect documentation of several procedures.
(lib/gs_fonts.ps [1.2]: 2000/03/10 07:00:28 lpd)
	- The %ram% IODevice was defined, but should not be (it represents a
RAM-based file system, which Ghostscript does not provide). Fix: The type of
the %null% IODevice was /FileSystem rather than /Special. (ziodev2.c [1.2]:
2000/03/10 07:02:07 lpd)
	- Directly-loaded TrueType fonts (including embedded TrueType fonts
in PDF files) could get confused with each other in the cache, because their
XUIDs were based on the font checksum field, which some fonts don't have set
correctly. (lib/gs_ttf.ps [1.3]: 2000/03/16 07:38:07 lpd)

Adds a new example file, a 3-D synthetic image. (examples/doretree.ps [1.1]:
2000/03/10 04:00:45 lpd)

Adds implementations of the devforall, devstatus, and diskonline
compatibility operators. (lib/gs_statd.ps [1.2]: 2000/03/10 04:01:55 lpd)

Some Adobe CIDFonts include a line /Setup /cid_Setup load def that
apparently is intended only to prevent the fonts from being loaded by a
standard PostScript interpreter (as opposed to ATM or a special font
loader), since cid_Setup is not defined anywhere and Setup is never
referenced; this change adds a dummy definition of cid_Setup to work around
this. (lib/gs_cidfn.ps [1.3]: 2000/03/10 04:53:25 lpd)

Updates the version # to 6.01, and the version date. (lib/gs_init.ps [1.2]:
2000/03/10 17:18:29 lpd)

Changes the default undercolor removal and black generation functions back
from f(k) = k to f(k) = 0. This fixes some, but not all, of the reported
problems with color inkjet output in 6.0. (lib/gs_init.ps [1.3]: 2000/03/10
18:47:31 lpd)

On Windows, puts stdout into binary mode as well as stdin, to allow piping
printer output through stdout (not a good idea, but it should be supported
as well as on other platforms). (dwmainc.cpp [1.2]: 2000/03/17 06:22:59 lpd)

</pre><h2><a name="6.01 Streams"></a>Streams</h2><pre>

Changes the sbuf_min_left macro to a procedure for readability and in
preparation for later revision. (stream.c [1.2], stream.h [1.2]: 2000/03/10
03:40:13 lpd)

</pre><h2><a name="6.01 Library"></a>Library</h2><pre>

Fixes problems:
	- (%os%) currentdevparams didn't return (fixed) values for
InitializeAction, Mounted, Removable, Searchable, SearchOrder, and
Writeable, or (meaningful) values for BlockSize, Free, and LogicalSize.
Currently, the latter values are dummies. (gsiodev.c [1.2]: 2000/03/10
03:43:06 lpd)
	- The terminating $ on the $Id: line in gsmalloc.c was missing, and
dwuninst.rc lacked a $Id: line. (gsmalloc.c [1.2]: 2000/03/10 03:44:33 lpd)
	- RasterOps with source transparency = 0, texture transparency = 1
didn't match the (very peculiar) H-P specification even if
TRANSPARENCY_PER_H_P was defined. (gdevdrop.c [1.2], gdevmrop.h [1.2],
gsropt.h [1.2]: 2000/03/10 04:06:15 lpd)
	- The prototype for gs_exit() was not included even though gs_exit()
was called. Fix: A cast discarded const unnecessarily. (gsalloc.c [1.2]:
2000/03/10 04:08:23 lpd)
	- The type of the %pipe% IODevice was /FileSystem, whereas it should
be /Special. (gdevpipe.c [1.2]: 2000/03/10 04:13:57 lpd)
	- An incorrectly formatted procedure couldn't be converted correctly
by ansi2knr. (gxidata.c [1.2]: 2000/03/10 04:30:58 lpd)
	- The check for a show within a cshow procedure for a CID font was
wrong. Fix: Character widths in CIDFontType 0 fonts were ignored (!). Adds a
.glyphwidth operator to support correct handling of character widths for CID
fonts. Adds a glyphwidth procedure to the library, like glyphshow and
glyphpath, in order to support correct handling of widths for CID fonts.
(gschar.c [1.2], gschar.h [1.2], gstext.c [1.2], gstext.h [1.2]: 2000/03/10
04:41:47 lpd)
	- The description of the value returned by code_map_decode_next in
*pchr was incorrect. (documentation bug only) (gsfcmap.c [1.2]: 2000/03/10
07:03:09 lpd)
	- Fixes a problem producing too much black in the output; also adds
support for 5 new printers (H-P Color DeskJet 690, H-P DesignJet 750, and
Epson Stylus Color 200). Note that this is user-contributed code.
(gsargs.h [1.2]: 2000/03/16 02:01:36 lpd)
	- The code for Axial shadings incorrectly assumed that if the
shading axis was horizontal or vertical in user space, it was also
horizontal or vertical in device space: this caused incorrect results when
the CTM wasn't orthogonal. (gxshade1.c [1.2]: 2000/03/17 08:17:55 lpd)
	- For printer devices, a non-null definition for OutputFile was
required even on platforms that had a default printer (as implemented by
gp_open_printer for that platform). (gp.h [1.2], gsdevice.c [1.2]:
2000/03/18 01:45:16 lpd)

Clears the glyf and loca offsets in TrueType fonts that lack these tables,
so that clients who care can tell whether the font is being downloaded
incrementally. (gstype42.c [1.2]: 2000/03/10 03:45:29 lpd)

Changes a few macro definitions to work around over-zealous compiler
warnings. (gstype1.c [1.2], gstype2.c [1.2], gxtype1.h [1.2]: 2000/03/10
04:29:37 lpd)

Changes the default undercolor removal and black generation functions back
from f(k) = k to f(k) = 0. This fixes some, but not all, of the reported
problems with color inkjet output in 6.0. (gxdcconv.c [1.2]: 2000/03/10
18:47:31 lpd)

<hr>

<h1><a name="Version6.0"></a>Version 6.0 (2000-02-03)</h1>

This is the first public release since 5.50.  See <a href="Current.htm">the
release summary</a> for information about new capabilities and known
problems.

<h2><a name="6.0_Documentation"></a>Documentation</h2>

Documents the fact that the plane_depths of a gx_image_enum structure may
vary, and that planes_wanted procedure of a gx_image_enum must return false
if the depths *or* widths can change.  (gxiparam.h)

Documents the fact that a wanted plane's wanted status, width, or depth can
only be changed by a call of plane_data that provides data for that plane.
(gxiparam.h)

Documents the change in the handling of the pthreads library.
(doc/Make.htm)

Documents the fact that setting parameters for the DCTEncode filter in
ps2pdf causes a crash.  (doc/Ps2pdf.htm)

Documents another bug in the MIPSpro 7.x / IRIX 6.5.x compilers, with
isave.c.  (doc/Make.htm)

Corrects Russell Lang's e-mail address.  (doc/New-user.htm)

Documents the new image operator test file and the pdfeof file.
(doc/Psfiles.htm)

Documents the 'w' argument for image_render procedures.  (gxiclass.h)

Adds a little more checking to the release process.  (doc/Release.htm)

Documents the return values from the font build_char procedure.  (gxfont.h)

Documents the fact that the free 'zip' program is needed to build the
self-extracting Windows executable, as well as WinZipSE.  (doc/Make.htm,
msvc32.mak, winint.mak)

Adds references to several new free fonts.  (doc/Fonts.htm)

Documents an important invariant for streams.  (stream.h)

Adds a reference for user-supported Watcom / GNU make makefiles.
(doc/Make.htm, doc/New-user.htm)

Documents the dependence of gs_ttf.ps on some of the gs_*_e.ps files.
(lib/gs_ttf.ps)

Documents how to make self-extracting Windows executables.
(doc/Release.htm)

Adds a number of new user-contributed man pages.  (unixinst.mak, man/gslp.1,
man/wftopfa.1, man/printafm.1, man/pfbtopfa.1, man/font2c.1, man/dvipdf.1,
man/ps2pdfwr.1, man/gsnd.1, man/pf2afm.1, man/ps2pdf.1)

<h2><a name="6.0_Procedures"></a>Procedures</h2>

Fixes problems:
	- Building on BSDI didn't work.  The simplest way to fix this was to
change the linking of the pthreads library on Unix platforms to be included
in STDLIBS rather than the "sync" implementation. (fix contributed by a
user) (lib.mak, unix-gcc.mak, unixansi.mak, unixtrad.mak)
	- Once again, some runtime files weren't installed.  (unixinst.mak)
	- Building the self-extracting executable didn't work.  (winint.mak)

Updates the user-contributed all-architectures makefile.  (all-arch.mak)

<h2><a name="6.0_Utilities"></a>Utilities</h2>

Fixes problems:
	- A needed #include was missing.  (geninit.c)
	- There were signed/unsigned char mismatches.  (genht.c, geninit.c)
	- The MacOS compiler imposes a 32K limit on the size of a stack
frame: we changed the code to use malloc/free.  (geninit.c)

Removes an unnecessary variable.  (echogs.c)

Adds a file that attempts to test the image operators exhaustively.
(lib/image-qa.ps, unixinst.mak)

Enhances the prfont.ps utility to print CIDFonts.  (lib/prfont.ps)

Adds a utility file that patches the PDF interpreter to allow garbage after
the %%EOF (or the %%EOF to be missing completely).  (lib/pdfeof.ps)

<h2><a name="6.0_Drivers"></a>Drivers</h2>

Fixes problems:
	- The X driver compared too many bits of color value, leading to
unnecessary halftoning.  (bug introduced by a fix in 5.99) (gdevxcmp.c)
	- Output from the pswrite driver got a dictfull error on Level 1
printers.  (gdevps.c)
	- Anti-aliasing had stopped working on MS Windows and OS/2. (bug
probably introduced in 5.65) (gdevmswn.c, gdevpm.c)

<h2><a name="6.0_Platforms"></a>Platforms</h2>

Adds a conditional definition of PTHREAD_CREATE_DETACHED for old versions of
the pthreads library.  (gp_psync.c)

Updates the Microsoft Visual C++ library makefile for VC++ 6.  (msvclib.mak)

Updates some copyright dates.  (winint.mak, dwsetup.rc)

<h2><a name="6.0_Fonts"></a>Fonts</h2>

Updates the URW fonts to include the expanded Adobe character set, including
many Eastern European accented characters.  (doc/New-user.htm)

Removes a 'readonly' that inconvenienced the authors of ttf2pf.
(lib/gs_ttf.ps)

<h2><a name="6.0_PDF_writer"></a>PDF writer</h2>

Fixes problems:
	- The Dest key was deleted from GoTo and GoToR link annotation
pdfmarks.  (gdevpdfm.c)
	- {name} references were substituted even in stream data for the
/PUT pdfmark.  (gdevpdfm.c)
	- The revision number was sometimes printed incorrectly if its
fraction part was zero.  (gdevpdf.c)
	- Embedded Multiple Master font instances weren't identified as
MMType1 rather than Type1.  (gdevpdff.h, gdevpdff.c, gdevpdft.c, gdevpdfw.c)
	- The test against MaxSubsetPct was incorrect when the percentages
were equal.  (gdevpdfw.c)
	- Font registrations weren't removed when the device was closed.
(gdevpdff.h, gdevpdfx.h, gdevpdff.c, gdevpdfw.c)
	- Multiple /OBJ pdfmarks with the same name caused an error.  For
Distiller compatibility, we now allow this if the type is the same, even
though the pdfmark specification doesn't say anything about this being
legal.  (gdevpdfm.c)

Removes an unnecessary variable.  (gdevpdff.c, gdevpdfr.c)

Disables embedding Multiple Master font instances, since Acrobat Reader
doesn't accept what appear to be correct output and we don't have time
before the release to track down the problem.  (gdevpdft.c)

<h2><a name="6.0_Interpreter_PDF"></a>Interpreter (PDF)</h2>

Factors some code to allow patching the PDF reader to allow garbage after
the %%EOF (or the %%EOF to be missing completely).  (lib/pdf_main.ps)

<h2><a name="6.0_Interpreter"></a>Interpreter</h2>

Fixes problems:
	- Type 1 fonts with non-standard OtherSubrs had stopped working.
(bug introduced since 5.60) (zchar1.c)
	- usecmap didn't work.  (lib/gs_cmap.ps)
	- The glyph_info procedure for Type 1 fonts didn't take Metrics[2]
or CDevProc into account.  (zchar1.c, zfont1.c)
	- The multiple-data-source case of images was broken. (bug
introduced in 5.99) (zimage.c)
	- If a page device Install procedure caused an error, things could
be left in an inconsistent state.  (lib/gs_setpd.ps)
	- Using a DeviceN color space could access uninitialized data in a
color value.  (zcsdevn.c)
	- DeviceN images with procedure data sources were broken.
(zimage.c)
	- Images with a procedure data source could terminate prematurely if
their processing was interrupted.  (zimage.c)
	- The garbage collector only marked half the name table sub-tables,
and attempted to mark an equal number of invalid pointers, leading to
invalid accesses or memory corruption.  (iname.c)

Removes an unused variable.  (zmisc.c)

<h2><a name="6.0_Streams"></a>Streams</h2>

Fixes problems:
	- sgets didn't reset the cursor pointers, so sgets into a client
buffer followed by sseek (for some kinds of streams, including files) could
get confused.  (stream.c)

<h2><a name="6.0_Library"></a>Library</h2>

Fixes problems:
	- A 'const' qualifier was omitted, leading to a type mismatch.
(gxclrast.c)
	- The revision number was sometimes printed incorrectly if its
fraction part was zero.  (gsmisc.c)
	- gs_image_next returned the wrong value in *pused if it incremented
the plane number.  (bug introduced in 5.99) (gsimage.c)
	- Only the last of the data_x and raster values in the local
'planes' array in gs_image_next_planes were initialized.  (bug introduced in
5.99) (gsimage.c)
	- The multiple-data-source case of images was broken. (bug
introduced in 5.99) (gsimage.h, gsimage.c)
	- ImageType 3 images with unequal scaling for the mask and data
didn't work.  (We thought they once did, but it appears they never have.)
(gximage3.c)
	- Images with 12-bit samples treated a Decode entry of [1 0] the
same as [0 1].  (Other, general Decode entries worked correctly.)
(gxipixel.c)
	- ImageType 3 images didn't work if processing was ever interrupted
for remapping a color.  (gximage3.c)
	- Images in DeviceN color spaces with 12-bit samples didn't work.
(gxi12bit.c, gxidata.c)
	- Images in DeviceN color spaces could fail to render properly
because the interruption of rendering left a half-built entry in an internal
cache.  (gxi12bit.c, gxicolor.c)
	- Images with non-idempotent RasterOps in 1-component DeviceN color
spaces didn't render properly, because the same pixel was rendered multiple
times after a color remapping interruption.  (gximono.c)
	- The fast case of masked images caused a crash if invoked without
an imager state.  (gximono.c)
	- Flushing buffered image data could cause coordinate bookkeeping
to get out of sync.  (gxidata.c)
	- ImageType 3, InterleaveType 2 images sometimes failed to render
the last row.  (gximage3.c)
	- The fix in 5.88 for resizing large objects had a bug itself.
(gsalloc.c)
	- Whan banding, if a client supplied more data than necessary for an
image, the client was told (incorrectly) that all of the data was used.
(fix from Artifex) (gxclimag.c)
	- Null patterns caused a crash. (bug probably introduced by changes
to support PatternType 2) (gspcolor.c)
	- On hand-initialized memory devices where line_ptrs[0] != base,
monobit RasterOps could cause invalid or stray memory accesses.  (gdevmr1.c)

Removes an unnecessary variable.  (gdevppla.c, gsfont.c)

Adds the ability to call a specified procedure when unregistering
notification, needed for removing PDF font registrations.  (gsnotify.h,
gsnotify.c)

Updates the copyright year.  (gscdef.c)

</pre>

<!-- [2.0 end contents] ==================================================== -->

<!-- [3.0 begin visible trailer] =========================================== -->
<hr>

<font size=2>

<p>Copyright &copy; 2000 Aladdin Enterprises.  All rights reserved.

<p>This file is part of Aladdin Ghostscript.  See the
<a href="Public.htm">Aladdin Free Public License</a> (the "License") for
full details of the terms of using, copying, modifying, and redistributing
Aladdin Ghostscript.

<p>
Ghostscript version 6.22, 5 July 2000

</font>

<!-- [3.0 end visible trailer] ============================================= -->

</body>
</html>
