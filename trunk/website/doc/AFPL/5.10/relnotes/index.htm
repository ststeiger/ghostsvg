<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>

<HEAD>
<TITLE>Post-release news for Aladdin Ghostscript 5.10</TITLE>
</HEAD>

<BODY>
<H2>Post-release news for Aladdin Ghostscript 5.10</H2>
<HR>
<P>
This file contains information about bugs found since
the 5.10 release, and workarounds or fixes when available.
<P>
<LI><I>(July 14, 1998)</I> <A HREF="#980714">stackunderflow error from PDF files using CalGray color space</A></LI>
<LI><I>(June 26, 1998)</I> <A HREF="#980626">pdfTeX output gives a typecheck error</A></LI>
<LI><I>(June 23, 1998)</I> <A HREF="#980623">Patterns don't display</A></LI>
<LI><I>(June 4, 1998)</I> <A HREF="#980604">"/rangecheck in --get--" when reading PDF file</A></LI>
<LI><I>(May 27, 1998)</I> <A HREF="#980527">ps2pdf converts 3-sided box to closed box</A></LI>
<LI><I>(April 25, 1998)</I> <A HREF="#980425">crash when printing Pattern with text operator in PaintProc</A></LI>
<LI><I>(March 5, 1998)</I> <A HREF="#980305">crash when printing files with dashed lines (setdash)</A></LI>
<LI><I>(February 9, 1998)</I> <A HREF="#980209">pdf2ps output is incorrect</A></LI>
<P>
<A NAME="980714"><HR><I>(July 14, 1998)</I>
<P>
<B>Problem:</B>
Displaying or printing a PDF file that uses the CalGray color space
gives a stackunderflow error.
<P>
<B>Workaround:</B> Apply <A HREF="980714.txt">this patch</A>
(does not require recompiling).
<P>
<A NAME="980626"><HR><I>(June 26, 1998)</I>
<P>
<B>Problem:</B>
Displaying or printing the output of pdfTeX sometimes gives a
"/typecheck in put" error.
(This problem is caused by a bug in pdfTeX, not in Ghostscript.)
<P>
<B>Workaround:</B> Apply <A HREF="980626.txt">this patch</A>
(does not require recompiling).
<P>
Even though this is not a Ghostscript bug, we will include the
workaround in future releases.
<P>
<A NAME="980623"><HR><I>(June 23, 1998)</I>
<P>
<B>Problem:</B>
Patterns sometimes don't display.
<P>
<B>Fix:</B> Apply <A HREF="980623.txt">this patch</A>
(requires recompiling Ghostscript).
<P>
<A NAME="980604"><HR><I>(June 4, 1998)</I>
<P>
<B>Problem:</B>
When processing PDF files produced by recent versions of
Adobe Acrobat Distiller,
Ghostscript sometimes gets a "/rangecheck in --get--" error with 0 as the top
(last) element of the operand stack.
<P>
<B>Fix:</B> Apply <A HREF="980604.txt">this patch</A>
(does not require recompiling).
<P>
<A NAME="980527"><HR><I>(May 6, 1998; updated May 27, 1998)</I>
<P>
<B>Problem:</B>
When producing PDF output, Ghostscript sometimes adds a fourth (closing)
line to stroked rectangles that have one side missing.
<P>
<B>Fix:</B> Apply <A HREF="980527.txt">this patch</A>
(requires recompiling Ghostscript).
<P>
Note that this fix may cause ps2pdf to produce larger output for some
PostScript files.
<P>
<A NAME="980425"><HR><I>(April 25, 1998)</I>
<P>
<B>Problem:</B>
Ghostscript crashes with a memory access error in clist_fill_mask
when printing files that contain Patterns whose PaintProc
executes a text operator such as 'show'.
<P>
<B>Fix:</B> Apply <A HREF="980425.txt">this patch</A>
(requires recompiling Ghostscript).
<P>
<B>Workaround:</B>
See Workaround #1 below.
<P>
<A NAME="980305"><HR><I>(March 5, 1998)</I>
<P>
<B>Problem:</B>
Ghostscript crashes with a memory access error
when printing files that contain any dashed lines or dashed curves.
<P>
<B>Fix:</B> Apply <A HREF="980305.txt">this patch</A>
(requires recompiling Ghostscript).
<P>
<B>Workaround #1:</B>
Insert the following code into gs_init.ps
just before the line that currently begins with /setdash.
<PRE>
   /setdash { 1 index length 0 eq { {1000 0} 0 //setdash pop pop }
      { //setdash } ifelse } odef
</PRE>
Alternatively (not quite as reliable), put the code
in a small file (say dashfix.ps),
and then mention dashfix.ps on the Ghostscript command line
before your own file.
<P>
<B>Workaround #2:</B>
If your machine has enough memory (real or virtual),
you can tell Ghostscript to allocate
a RAM buffer large enough to hold the entire page, with the switch
<PRE>
	-dBufferSpace=N
</PRE>
where N is at least as large as the result of the following computation:
<PRE>
	(width_of_page_in_inches * X_resolution * depth + 64)
	  * height_of_page_in_inches * Y_resolution / 8 + 10000.
</PRE>
The "depth" value is the number of bits of data per pixel
in the internal page buffer,
and depends on the specific printer or file format.
Black-and-white output almost always uses a depth of 1;
color output may use a depth of 4, 24, or 32 depending on the driver.
For example, a U.S. letter-size page on a 300 DPI color printer
using a driver with 32-bit color values would require
a minimum N = (8.5 * 300 * 32 + 64) * 11 * 300 / 8 + 10000 =
about 33 Mb of buffer space.
If you don't know what depth a particular driver uses, try using 4,
and if Ghostscript still crashes, try 24 and then 32.
<P>
<B>Workaround #3:</B>
You may be able to work around the problem by
including the -Z, (dash, Z, comma) switch on the command line,
preferably as the first switch; however, this doesn't always work.
<P>
<A NAME="980209"><HR><I>(February 9, 1998)</I>
<P>
<B>Problem:</B>
The output from the pdf2ps program is often incorrect.
<P>
<B>Workaround:</B>
Instead of
<PRE>
	pdf2ps xx.pdf yy.ps
</PRE>use
<PRE>
	gs -sDEVICE=pswrite -dNOPAUSE -dBATCH -sOutputFile=yy.ps xx.pdf
</PRE>This produces larger and cruder PostScript files,
but they are much more likely to be correct.
<HR>
Last edited by L. Peter Deutsch
