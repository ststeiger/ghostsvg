*** master/550/gs5.50/pdf_draw.ps	Tue Aug 25 22:43:01 1998
--- pdf_draw.ps	Tue Dec 22 11:27:05 1998
***************
*** 362,389 ****
     count 1 gt
   } bdef
! /resolvepattern		% <patternstreamdict> resolvepattern <patterndict>
!  {		% Don't do the resolvestream now: just capture the data
  		% from the file if necessary.
!    dup length dict copy
!    dup /FilePosition .knownget
!     { 1 index /File get dup fileposition 3 1 roll
  		% Stack: dict savepos pos file
!       dup 3 -1 roll setfileposition
!       dup 3 index /Length get string readstring pop
  		% Stack: dict savepos file string
!       3 1 roll exch setfileposition
!       1 index /File 3 -1 roll put
!       dup /FilePosition undef
!     }
!    if
!    dup /PaintProc {
!      DEBUG { (%Begin PaintProc) = flush } if
!      false resolvestream pdfopdict .pdfrun
!      DEBUG { (%End PaintProc) = flush } if
!    } put
!    DEBUG {
!      (%Pattern: ) print dup === flush
!    } if
!  } bdef
  
  drawopdict begin
--- 360,393 ----
     count 1 gt
   } bdef
! /resolvepattern {	% <patternstreamdict> resolvepattern <patterndict>
! 		% Don't do the resolvestream now: just capture the data
  		% from the file if necessary.
!   dup length dict copy
!   dup /FilePosition .knownget {
!     1 index /File get dup fileposition 3 1 roll
  		% Stack: dict savepos pos file
!     dup 3 -1 roll setfileposition
!     dup 3 index /Length get string readstring pop
  		% Stack: dict savepos file string
!     3 1 roll exch setfileposition
!     1 index /File 3 -1 roll put
!     dup /FilePosition undef
!   } if
!   dup /PaintProc {
!     DEBUG { (%Begin PaintProc) = flush } if
! 		% For uncolored patterns, we have to unbind the current
! 		% color and color space before running the PaintProc.
! 		% There's no harm in doing this for colored patterns,
! 		% so for simplicity, we always do it.
!     q
!     null sc1 null SC1
!     false resolvestream pdfopdict .pdfrun
!     Q
!     DEBUG { (%End PaintProc) = flush } if
!   } put
!   DEBUG {
!     (%Pattern: ) print dup === flush
!   } if
! } bdef
  
  drawopdict begin
